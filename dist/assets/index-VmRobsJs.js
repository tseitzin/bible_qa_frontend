const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-CfFo9EZr.js","assets/vendor-BGRE3DlF.js"])))=>i.map(i=>d[i]);
import{r as ya,c as ir,o as X,s as Uh,d as Gd,u as tt,a as zh,b as je,i as Ua,p as Fo,e as Ae,w as qt,h as Jd,n as bn,f as Nr,g as ne,j as Re,k as d,l as Me,t as le,m as Ze,q as Kd,v as Yd,x as ar,y as Vn,z as st,A as St,F as Pt,B as Ut,C as ds,D as Gt,E as Hh,G as Vr,H as Vh,I as yu,T as Wh,J as ba,K as en,L as sr,M as Pl,N as $o,O as Qd,P as Xd,Q as Gh,R as Jh}from"./vendor-BGRE3DlF.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();const Kh={__name:"App",setup(t){return(e,n)=>{const r=ya("router-view");return X(),ir(r)}}};/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Ms=typeof document<"u";function Zd(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Yh(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Zd(t.default)}const Tt=Object.assign;function Il(t,e){const n={};for(const r in e){const a=e[r];n[r]=Cr(a)?a.map(t):t(a)}return n}const Ci=()=>{},Cr=Array.isArray,e1=/#/g,Qh=/&/g,Xh=/\//g,Zh=/=/g,ef=/\?/g,t1=/\+/g,tf=/%5B/g,nf=/%5D/g,n1=/%5E/g,rf=/%60/g,r1=/%7B/g,af=/%7C/g,a1=/%7D/g,sf=/%20/g;function wu(t){return encodeURI(""+t).replace(af,"|").replace(tf,"[").replace(nf,"]")}function of(t){return wu(t).replace(r1,"{").replace(a1,"}").replace(n1,"^")}function ru(t){return wu(t).replace(t1,"%2B").replace(sf,"+").replace(e1,"%23").replace(Qh,"%26").replace(rf,"`").replace(r1,"{").replace(a1,"}").replace(n1,"^")}function lf(t){return ru(t).replace(Zh,"%3D")}function uf(t){return wu(t).replace(e1,"%23").replace(ef,"%3F")}function cf(t){return t==null?"":uf(t).replace(Xh,"%2F")}function Ri(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const df=/\/$/,hf=t=>t.replace(df,"");function El(t,e,n="/"){let r,a={},s="",u="";const o=e.indexOf("#");let c=e.indexOf("?");return o<c&&o>=0&&(c=-1),c>-1&&(r=e.slice(0,c),s=e.slice(c+1,o>-1?o:e.length),a=t(s)),o>-1&&(r=r||e.slice(0,o),u=e.slice(o,e.length)),r=gf(r??e,n),{fullPath:r+(s&&"?")+s+u,path:r,query:a,hash:Ri(u)}}function ff(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function dc(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function pf(t,e,n){const r=e.matched.length-1,a=n.matched.length-1;return r>-1&&r===a&&Vs(e.matched[r],n.matched[a])&&s1(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Vs(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function s1(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!vf(t[n],e[n]))return!1;return!0}function vf(t,e){return Cr(t)?hc(t,e):Cr(e)?hc(e,t):t===e}function hc(t,e){return Cr(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function gf(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),a=r[r.length-1];(a===".."||a===".")&&r.push("");let s=n.length-1,u,o;for(u=0;u<r.length;u++)if(o=r[u],o!==".")if(o==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(u).join("/")}const Ma={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Fi;(function(t){t.pop="pop",t.push="push"})(Fi||(Fi={}));var Pi;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Pi||(Pi={}));function mf(t){if(!t)if(Ms){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),hf(t)}const bf=/^[^#]+#/;function yf(t,e){return t.replace(bf,"#")+e}function wf(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Wo=()=>({left:window.scrollX,top:window.scrollY});function _f(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),a=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!a)return;e=wf(a,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function fc(t,e){return(history.state?history.state.position-e:-1)+t}const au=new Map;function kf(t,e){au.set(t,e)}function xf(t){const e=au.get(t);return au.delete(t),e}let Sf=()=>location.protocol+"//"+location.host;function i1(t,e){const{pathname:n,search:r,hash:a}=e,s=t.indexOf("#");if(s>-1){let o=a.includes(t.slice(s))?t.slice(s).length:1,c=a.slice(o);return c[0]!=="/"&&(c="/"+c),dc(c,"")}return dc(n,t)+r+a}function Af(t,e,n,r){let a=[],s=[],u=null;const o=({state:w})=>{const v=i1(t,location),y=n.value,k=e.value;let L=0;if(w){if(n.value=v,e.value=w,u&&u===y){u=null;return}L=k?w.position-k.position:0}else r(v);a.forEach(x=>{x(n.value,y,{delta:L,type:Fi.pop,direction:L?L>0?Pi.forward:Pi.back:Pi.unknown})})};function c(){u=n.value}function h(w){a.push(w);const v=()=>{const y=a.indexOf(w);y>-1&&a.splice(y,1)};return s.push(v),v}function f(){const{history:w}=window;w.state&&w.replaceState(Tt({},w.state,{scroll:Wo()}),"")}function m(){for(const w of s)w();s=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",f)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",f,{passive:!0}),{pauseListeners:c,listen:h,destroy:m}}function pc(t,e,n,r=!1,a=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:a?Wo():null}}function Lf(t){const{history:e,location:n}=window,r={value:i1(t,n)},a={value:e.state};a.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(c,h,f){const m=t.indexOf("#"),w=m>-1?(n.host&&document.querySelector("base")?t:t.slice(m))+c:Sf()+t+c;try{e[f?"replaceState":"pushState"](h,"",w),a.value=h}catch(v){console.error(v),n[f?"replace":"assign"](w)}}function u(c,h){const f=Tt({},e.state,pc(a.value.back,c,a.value.forward,!0),h,{position:a.value.position});s(c,f,!0),r.value=c}function o(c,h){const f=Tt({},a.value,e.state,{forward:c,scroll:Wo()});s(f.current,f,!0);const m=Tt({},pc(r.value,c,null),{position:f.position+1},h);s(c,m,!1),r.value=c}return{location:r,state:a,push:o,replace:u}}function Nf(t){t=mf(t);const e=Lf(t),n=Af(t,e.state,e.location,e.replace);function r(s,u=!0){u||n.pauseListeners(),history.go(s)}const a=Tt({location:"",base:t,go:r,createHref:yf.bind(null,t)},e,n);return Object.defineProperty(a,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(a,"state",{enumerable:!0,get:()=>e.state.value}),a}function Cf(t){return typeof t=="string"||t&&typeof t=="object"}function o1(t){return typeof t=="string"||typeof t=="symbol"}const l1=Symbol("");var vc;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(vc||(vc={}));function Ws(t,e){return Tt(new Error,{type:t,[l1]:!0},e)}function fa(t,e){return t instanceof Error&&l1 in t&&(e==null||!!(t.type&e))}const gc="[^/]+?",Pf={sensitive:!1,strict:!1,start:!0,end:!0},If=/[.+*?^${}()[\]/\\]/g;function Ef(t,e){const n=Tt({},Pf,e),r=[];let a=n.start?"^":"";const s=[];for(const h of t){const f=h.length?[]:[90];n.strict&&!h.length&&(a+="/");for(let m=0;m<h.length;m++){const w=h[m];let v=40+(n.sensitive?.25:0);if(w.type===0)m||(a+="/"),a+=w.value.replace(If,"\\$&"),v+=40;else if(w.type===1){const{value:y,repeatable:k,optional:L,regexp:x}=w;s.push({name:y,repeatable:k,optional:L});const P=x||gc;if(P!==gc){v+=10;try{new RegExp(`(${P})`)}catch(M){throw new Error(`Invalid custom RegExp for param "${y}" (${P}): `+M.message)}}let H=k?`((?:${P})(?:/(?:${P}))*)`:`(${P})`;m||(H=L&&h.length<2?`(?:/${H})`:"/"+H),L&&(H+="?"),a+=H,v+=20,L&&(v+=-8),k&&(v+=-20),P===".*"&&(v+=-50)}f.push(v)}r.push(f)}if(n.strict&&n.end){const h=r.length-1;r[h][r[h].length-1]+=.7000000000000001}n.strict||(a+="/?"),n.end?a+="$":n.strict&&!a.endsWith("/")&&(a+="(?:/|$)");const u=new RegExp(a,n.sensitive?"":"i");function o(h){const f=h.match(u),m={};if(!f)return null;for(let w=1;w<f.length;w++){const v=f[w]||"",y=s[w-1];m[y.name]=v&&y.repeatable?v.split("/"):v}return m}function c(h){let f="",m=!1;for(const w of t){(!m||!f.endsWith("/"))&&(f+="/"),m=!1;for(const v of w)if(v.type===0)f+=v.value;else if(v.type===1){const{value:y,repeatable:k,optional:L}=v,x=y in h?h[y]:"";if(Cr(x)&&!k)throw new Error(`Provided param "${y}" is an array but it is not repeatable (* or + modifiers)`);const P=Cr(x)?x.join("/"):x;if(!P)if(L)w.length<2&&(f.endsWith("/")?f=f.slice(0,-1):m=!0);else throw new Error(`Missing required param "${y}"`);f+=P}}return f||"/"}return{re:u,score:r,keys:s,parse:o,stringify:c}}function Rf(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function u1(t,e){let n=0;const r=t.score,a=e.score;for(;n<r.length&&n<a.length;){const s=Rf(r[n],a[n]);if(s)return s;n++}if(Math.abs(a.length-r.length)===1){if(mc(r))return 1;if(mc(a))return-1}return a.length-r.length}function mc(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const Ff={type:0,value:""},Tf=/[a-zA-Z0-9_]/;function qf(t){if(!t)return[[]];if(t==="/")return[[Ff]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(v){throw new Error(`ERR (${n})/"${h}": ${v}`)}let n=0,r=n;const a=[];let s;function u(){s&&a.push(s),s=[]}let o=0,c,h="",f="";function m(){h&&(n===0?s.push({type:0,value:h}):n===1||n===2||n===3?(s.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:h,regexp:f,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),h="")}function w(){h+=c}for(;o<t.length;){if(c=t[o++],c==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:c==="/"?(h&&m(),u()):c===":"?(m(),n=1):w();break;case 4:w(),n=r;break;case 1:c==="("?n=2:Tf.test(c)?w():(m(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&o--);break;case 2:c===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+c:n=3:f+=c;break;case 3:m(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&o--,f="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${h}"`),m(),u(),a}function Mf(t,e,n){const r=Ef(qf(t.path),n),a=Tt(r,{record:t,parent:e,children:[],alias:[]});return e&&!a.record.aliasOf==!e.record.aliasOf&&e.children.push(a),a}function Of(t,e){const n=[],r=new Map;e=_c({strict:!1,end:!0,sensitive:!1},e);function a(m){return r.get(m)}function s(m,w,v){const y=!v,k=yc(m);k.aliasOf=v&&v.record;const L=_c(e,m),x=[k];if("alias"in m){const M=typeof m.alias=="string"?[m.alias]:m.alias;for(const oe of M)x.push(yc(Tt({},k,{components:v?v.record.components:k.components,path:oe,aliasOf:v?v.record:k})))}let P,H;for(const M of x){const{path:oe}=M;if(w&&oe[0]!=="/"){const fe=w.record.path,pe=fe[fe.length-1]==="/"?"":"/";M.path=w.record.path+(oe&&pe+oe)}if(P=Mf(M,w,L),v?v.alias.push(P):(H=H||P,H!==P&&H.alias.push(P),y&&m.name&&!wc(P)&&u(m.name)),c1(P)&&c(P),k.children){const fe=k.children;for(let pe=0;pe<fe.length;pe++)s(fe[pe],P,v&&v.children[pe])}v=v||P}return H?()=>{u(H)}:Ci}function u(m){if(o1(m)){const w=r.get(m);w&&(r.delete(m),n.splice(n.indexOf(w),1),w.children.forEach(u),w.alias.forEach(u))}else{const w=n.indexOf(m);w>-1&&(n.splice(w,1),m.record.name&&r.delete(m.record.name),m.children.forEach(u),m.alias.forEach(u))}}function o(){return n}function c(m){const w=Df(m,n);n.splice(w,0,m),m.record.name&&!wc(m)&&r.set(m.record.name,m)}function h(m,w){let v,y={},k,L;if("name"in m&&m.name){if(v=r.get(m.name),!v)throw Ws(1,{location:m});L=v.record.name,y=Tt(bc(w.params,v.keys.filter(H=>!H.optional).concat(v.parent?v.parent.keys.filter(H=>H.optional):[]).map(H=>H.name)),m.params&&bc(m.params,v.keys.map(H=>H.name))),k=v.stringify(y)}else if(m.path!=null)k=m.path,v=n.find(H=>H.re.test(k)),v&&(y=v.parse(k),L=v.record.name);else{if(v=w.name?r.get(w.name):n.find(H=>H.re.test(w.path)),!v)throw Ws(1,{location:m,currentLocation:w});L=v.record.name,y=Tt({},w.params,m.params),k=v.stringify(y)}const x=[];let P=v;for(;P;)x.unshift(P.record),P=P.parent;return{name:L,path:k,params:y,matched:x,meta:jf(x)}}t.forEach(m=>s(m));function f(){n.length=0,r.clear()}return{addRoute:s,resolve:h,removeRoute:u,clearRoutes:f,getRoutes:o,getRecordMatcher:a}}function bc(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function yc(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:Bf(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Bf(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function wc(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function jf(t){return t.reduce((e,n)=>Tt(e,n.meta),{})}function _c(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function Df(t,e){let n=0,r=e.length;for(;n!==r;){const s=n+r>>1;u1(t,e[s])<0?r=s:n=s+1}const a=$f(t);return a&&(r=e.lastIndexOf(a,r-1)),r}function $f(t){let e=t;for(;e=e.parent;)if(c1(e)&&u1(t,e)===0)return e}function c1({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Uf(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let a=0;a<r.length;++a){const s=r[a].replace(t1," "),u=s.indexOf("="),o=Ri(u<0?s:s.slice(0,u)),c=u<0?null:Ri(s.slice(u+1));if(o in e){let h=e[o];Cr(h)||(h=e[o]=[h]),h.push(c)}else e[o]=c}return e}function kc(t){let e="";for(let n in t){const r=t[n];if(n=lf(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Cr(r)?r.map(s=>s&&ru(s)):[r&&ru(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function zf(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Cr(r)?r.map(a=>a==null?null:""+a):r==null?r:""+r)}return e}const Hf=Symbol(""),xc=Symbol(""),Go=Symbol(""),_u=Symbol(""),su=Symbol("");function xi(){let t=[];function e(r){return t.push(r),()=>{const a=t.indexOf(r);a>-1&&t.splice(a,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Da(t,e,n,r,a,s=u=>u()){const u=r&&(r.enterCallbacks[a]=r.enterCallbacks[a]||[]);return()=>new Promise((o,c)=>{const h=w=>{w===!1?c(Ws(4,{from:n,to:e})):w instanceof Error?c(w):Cf(w)?c(Ws(2,{from:e,to:w})):(u&&r.enterCallbacks[a]===u&&typeof w=="function"&&u.push(w),o())},f=s(()=>t.call(r&&r.instances[a],e,n,h));let m=Promise.resolve(f);t.length<3&&(m=m.then(h)),m.catch(w=>c(w))})}function Rl(t,e,n,r,a=s=>s()){const s=[];for(const u of t)for(const o in u.components){let c=u.components[o];if(!(e!=="beforeRouteEnter"&&!u.instances[o]))if(Zd(c)){const f=(c.__vccOpts||c)[e];f&&s.push(Da(f,n,r,u,o,a))}else{let h=c();s.push(()=>h.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${o}" at "${u.path}"`);const m=Yh(f)?f.default:f;u.mods[o]=f,u.components[o]=m;const v=(m.__vccOpts||m)[e];return v&&Da(v,n,r,u,o,a)()}))}}return s}function Sc(t){const e=Ua(Go),n=Ua(_u),r=je(()=>{const c=tt(t.to);return e.resolve(c)}),a=je(()=>{const{matched:c}=r.value,{length:h}=c,f=c[h-1],m=n.matched;if(!f||!m.length)return-1;const w=m.findIndex(Vs.bind(null,f));if(w>-1)return w;const v=Ac(c[h-2]);return h>1&&Ac(f)===v&&m[m.length-1].path!==v?m.findIndex(Vs.bind(null,c[h-2])):w}),s=je(()=>a.value>-1&&Kf(n.params,r.value.params)),u=je(()=>a.value>-1&&a.value===n.matched.length-1&&s1(n.params,r.value.params));function o(c={}){if(Jf(c)){const h=e[tt(t.replace)?"replace":"push"](tt(t.to)).catch(Ci);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:r,href:je(()=>r.value.href),isActive:s,isExactActive:u,navigate:o}}function Vf(t){return t.length===1?t[0]:t}const Wf=Gd({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Sc,setup(t,{slots:e}){const n=Nr(Sc(t)),{options:r}=Ua(Go),a=je(()=>({[Lc(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Lc(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&Vf(e.default(n));return t.custom?s:Jd("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:a.value},s)}}}),Gf=Wf;function Jf(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Kf(t,e){for(const n in e){const r=e[n],a=t[n];if(typeof r=="string"){if(r!==a)return!1}else if(!Cr(a)||a.length!==r.length||r.some((s,u)=>s!==a[u]))return!1}return!0}function Ac(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Lc=(t,e,n)=>t??e??n,Yf=Gd({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Ua(su),a=je(()=>t.route||r.value),s=Ua(xc,0),u=je(()=>{let h=tt(s);const{matched:f}=a.value;let m;for(;(m=f[h])&&!m.components;)h++;return h}),o=je(()=>a.value.matched[u.value]);Fo(xc,je(()=>u.value+1)),Fo(Hf,o),Fo(su,a);const c=Ae();return qt(()=>[c.value,o.value,t.name],([h,f,m],[w,v,y])=>{f&&(f.instances[m]=h,v&&v!==f&&h&&h===w&&(f.leaveGuards.size||(f.leaveGuards=v.leaveGuards),f.updateGuards.size||(f.updateGuards=v.updateGuards))),h&&f&&(!v||!Vs(f,v)||!w)&&(f.enterCallbacks[m]||[]).forEach(k=>k(h))},{flush:"post"}),()=>{const h=a.value,f=t.name,m=o.value,w=m&&m.components[f];if(!w)return Nc(n.default,{Component:w,route:h});const v=m.props[f],y=v?v===!0?h.params:typeof v=="function"?v(h):v:null,L=Jd(w,Tt({},y,e,{onVnodeUnmounted:x=>{x.component.isUnmounted&&(m.instances[f]=null)},ref:c}));return Nc(n.default,{Component:L,route:h})||L}}});function Nc(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const Qf=Yf;function Xf(t){const e=Of(t.routes,t),n=t.parseQuery||Uf,r=t.stringifyQuery||kc,a=t.history,s=xi(),u=xi(),o=xi(),c=Uh(Ma);let h=Ma;Ms&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=Il.bind(null,S=>""+S),m=Il.bind(null,cf),w=Il.bind(null,Ri);function v(S,j){let C,J;return o1(S)?(C=e.getRecordMatcher(S),J=j):J=S,e.addRoute(J,C)}function y(S){const j=e.getRecordMatcher(S);j&&e.removeRoute(j)}function k(){return e.getRoutes().map(S=>S.record)}function L(S){return!!e.getRecordMatcher(S)}function x(S,j){if(j=Tt({},j||c.value),typeof S=="string"){const Q=El(n,S,j.path),_=e.resolve({path:Q.path},j),se=a.createHref(Q.fullPath);return Tt(Q,_,{params:w(_.params),hash:Ri(Q.hash),redirectedFrom:void 0,href:se})}let C;if(S.path!=null)C=Tt({},S,{path:El(n,S.path,j.path).path});else{const Q=Tt({},S.params);for(const _ in Q)Q[_]==null&&delete Q[_];C=Tt({},S,{params:m(Q)}),j.params=m(j.params)}const J=e.resolve(C,j),te=S.hash||"";J.params=f(w(J.params));const _e=ff(r,Tt({},S,{hash:of(te),path:J.path})),be=a.createHref(_e);return Tt({fullPath:_e,hash:te,query:r===kc?zf(S.query):S.query||{}},J,{redirectedFrom:void 0,href:be})}function P(S){return typeof S=="string"?El(n,S,c.value.path):Tt({},S)}function H(S,j){if(h!==S)return Ws(8,{from:j,to:S})}function M(S){return pe(S)}function oe(S){return M(Tt(P(S),{replace:!0}))}function fe(S){const j=S.matched[S.matched.length-1];if(j&&j.redirect){const{redirect:C}=j;let J=typeof C=="function"?C(S):C;return typeof J=="string"&&(J=J.includes("?")||J.includes("#")?J=P(J):{path:J},J.params={}),Tt({query:S.query,hash:S.hash,params:J.path!=null?{}:S.params},J)}}function pe(S,j){const C=h=x(S),J=c.value,te=S.state,_e=S.force,be=S.replace===!0,Q=fe(C);if(Q)return pe(Tt(P(Q),{state:typeof Q=="object"?Tt({},te,Q.state):te,force:_e,replace:be}),j||C);const _=C;_.redirectedFrom=j;let se;return!_e&&pf(r,J,C)&&(se=Ws(16,{to:_,from:J}),Le(J,J,!0,!1)),(se?Promise.resolve(se):ce(_,J)).catch(z=>fa(z)?fa(z,2)?z:Ee(z):ve(z,_,J)).then(z=>{if(z){if(fa(z,2))return pe(Tt({replace:be},P(z.to),{state:typeof z.to=="object"?Tt({},te,z.to.state):te,force:_e}),j||_)}else z=B(_,J,!0,be,te);return F(_,J,z),z})}function re(S,j){const C=H(S,j);return C?Promise.reject(C):Promise.resolve()}function $(S){const j=R.values().next().value;return j&&typeof j.runWithContext=="function"?j.runWithContext(S):S()}function ce(S,j){let C;const[J,te,_e]=Zf(S,j);C=Rl(J.reverse(),"beforeRouteLeave",S,j);for(const Q of J)Q.leaveGuards.forEach(_=>{C.push(Da(_,S,j))});const be=re.bind(null,S,j);return C.push(be),O(C).then(()=>{C=[];for(const Q of s.list())C.push(Da(Q,S,j));return C.push(be),O(C)}).then(()=>{C=Rl(te,"beforeRouteUpdate",S,j);for(const Q of te)Q.updateGuards.forEach(_=>{C.push(Da(_,S,j))});return C.push(be),O(C)}).then(()=>{C=[];for(const Q of _e)if(Q.beforeEnter)if(Cr(Q.beforeEnter))for(const _ of Q.beforeEnter)C.push(Da(_,S,j));else C.push(Da(Q.beforeEnter,S,j));return C.push(be),O(C)}).then(()=>(S.matched.forEach(Q=>Q.enterCallbacks={}),C=Rl(_e,"beforeRouteEnter",S,j,$),C.push(be),O(C))).then(()=>{C=[];for(const Q of u.list())C.push(Da(Q,S,j));return C.push(be),O(C)}).catch(Q=>fa(Q,8)?Q:Promise.reject(Q))}function F(S,j,C){o.list().forEach(J=>$(()=>J(S,j,C)))}function B(S,j,C,J,te){const _e=H(S,j);if(_e)return _e;const be=j===Ma,Q=Ms?history.state:{};C&&(J||be?a.replace(S.fullPath,Tt({scroll:be&&Q&&Q.scroll},te)):a.push(S.fullPath,te)),c.value=S,Le(S,j,C,be),Ee()}let ee;function Z(){ee||(ee=a.listen((S,j,C)=>{if(!q.listening)return;const J=x(S),te=fe(J);if(te){pe(Tt(te,{replace:!0,force:!0}),J).catch(Ci);return}h=J;const _e=c.value;Ms&&kf(fc(_e.fullPath,C.delta),Wo()),ce(J,_e).catch(be=>fa(be,12)?be:fa(be,2)?(pe(Tt(P(be.to),{force:!0}),J).then(Q=>{fa(Q,20)&&!C.delta&&C.type===Fi.pop&&a.go(-1,!1)}).catch(Ci),Promise.reject()):(C.delta&&a.go(-C.delta,!1),ve(be,J,_e))).then(be=>{be=be||B(J,_e,!1),be&&(C.delta&&!fa(be,8)?a.go(-C.delta,!1):C.type===Fi.pop&&fa(be,20)&&a.go(-1,!1)),F(J,_e,be)}).catch(Ci)}))}let de=xi(),ge=xi(),ke;function ve(S,j,C){Ee(S);const J=ge.list();return J.length?J.forEach(te=>te(S,j,C)):console.error(S),Promise.reject(S)}function Se(){return ke&&c.value!==Ma?Promise.resolve():new Promise((S,j)=>{de.add([S,j])})}function Ee(S){return ke||(ke=!S,Z(),de.list().forEach(([j,C])=>S?C(S):j()),de.reset()),S}function Le(S,j,C,J){const{scrollBehavior:te}=t;if(!Ms||!te)return Promise.resolve();const _e=!C&&xf(fc(S.fullPath,0))||(J||!C)&&history.state&&history.state.scroll||null;return bn().then(()=>te(S,j,_e)).then(be=>be&&_f(be)).catch(be=>ve(be,S,j))}const I=S=>a.go(S);let V;const R=new Set,q={currentRoute:c,listening:!0,addRoute:v,removeRoute:y,clearRoutes:e.clearRoutes,hasRoute:L,getRoutes:k,resolve:x,options:t,push:M,replace:oe,go:I,back:()=>I(-1),forward:()=>I(1),beforeEach:s.add,beforeResolve:u.add,afterEach:o.add,onError:ge.add,isReady:Se,install(S){const j=this;S.component("RouterLink",Gf),S.component("RouterView",Qf),S.config.globalProperties.$router=j,Object.defineProperty(S.config.globalProperties,"$route",{enumerable:!0,get:()=>tt(c)}),Ms&&!V&&c.value===Ma&&(V=!0,M(a.location).catch(te=>{}));const C={};for(const te in Ma)Object.defineProperty(C,te,{get:()=>c.value[te],enumerable:!0});S.provide(Go,j),S.provide(_u,zh(C)),S.provide(su,c);const J=S.unmount;R.add(S),S.unmount=function(){R.delete(S),R.size<1&&(h=Ma,ee&&ee(),ee=null,c.value=Ma,V=!1,ke=!1),J()}}};function O(S){return S.reduce((j,C)=>j.then(()=>$(C)),Promise.resolve())}return q}function Zf(t,e){const n=[],r=[],a=[],s=Math.max(e.matched.length,t.matched.length);for(let u=0;u<s;u++){const o=e.matched[u];o&&(t.matched.find(h=>Vs(h,o))?r.push(o):n.push(o));const c=t.matched[u];c&&(e.matched.find(h=>Vs(h,c))||a.push(c))}return[n,r,a]}function Wr(){return Ua(Go)}function Gs(t){return Ua(_u)}const tn=(t,e)=>{const n=t.__vccOpts||t;for(const[r,a]of e)n[r]=a;return n},ep={key:0,class:"textarea-label-wrapper"},tp=["for"],np={key:0,class:"required-indicator"},rp={key:0,class:"char-count-header"},ap={class:"textarea-container"},sp=["id","value","placeholder","rows","disabled","maxlength","aria-label","aria-describedby","aria-invalid"],ip=["disabled","title"],op={key:0,viewBox:"0 0 24 24",fill:"currentColor"},lp={key:1,viewBox:"0 0 24 24",fill:"currentColor"},up=["id"],cp={__name:"BaseTextarea",props:{modelValue:{type:String,default:""},label:{type:String,default:""},placeholder:{type:String,default:""},helpText:{type:String,default:""},error:{type:String,default:""},rows:{type:[Number,String],default:4},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},maxLength:{type:Number,default:null},showCharCount:{type:Boolean,default:!1},floatingLabel:{type:Boolean,default:!1},autoResize:{type:Boolean,default:!1},speechSupported:{type:Boolean,default:!1},isListening:{type:Boolean,default:!1},dense:{type:Boolean,default:!1}},emits:["update:modelValue","focus","blur","keydown"],setup(t,{emit:e}){const n=t,r=e,a=Ae(!1),s=je(()=>`textarea-${Math.random().toString(36).substr(2,9)}`),u=Ua("toggleSpeech",()=>{}),o=je(()=>({"base-textarea":!0,"base-textarea--focused":a.value,"base-textarea--error":n.error,"base-textarea--disabled":n.disabled,"base-textarea--floating":n.floatingLabel&&n.label,"base-textarea--has-value":n.modelValue.length>0,"base-textarea--dense":n.dense})),c=je(()=>({"floating-label":!0,"floating-label--active":a.value||n.modelValue.length>0,"floating-label--error":n.error})),h=je(()=>{const k=n.maxLength?n.modelValue.length/n.maxLength*100:0;return{"char-count":!0,"char-count--warning":k>=80&&k<100,"char-count--danger":k>=100}}),f=k=>{r("update:modelValue",k.target.value),n.autoResize&&y(k.target)},m=k=>{a.value=!0,r("focus",k)},w=k=>{a.value=!1,r("blur",k)},v=k=>{r("keydown",k)},y=k=>{k.style.height="auto",k.style.height=k.scrollHeight+"px"};return(k,L)=>(X(),ne("div",{class:Ze(["textarea-wrapper",{"textarea-wrapper--dense":t.dense}])},[t.label?(X(),ne("div",ep,[d("label",{for:s.value,class:"textarea-label"},[Me(le(t.label)+" ",1),t.required?(X(),ne("span",np,"*")):Re("",!0)],8,tp),t.showCharCount&&t.maxLength?(X(),ne("div",rp,[d("span",{class:Ze(h.value)},"Characters: "+le(t.modelValue.length)+"/"+le(t.maxLength),3)])):Re("",!0)])):Re("",!0),d("div",ap,[d("div",{class:Ze(["textarea-inner",{"textarea-inner--dense":t.dense}])},[d("textarea",{id:s.value,value:t.modelValue,placeholder:t.placeholder,rows:t.rows,disabled:t.disabled,maxlength:t.maxLength,"aria-label":t.label||t.placeholder||"Text input field","aria-describedby":t.helpText?`${s.value}-help`:void 0,"aria-invalid":t.error?"true":"false",class:Ze(o.value),onInput:f,onFocus:m,onBlur:w,onKeydown:v},null,42,sp),t.speechSupported?(X(),ne("button",{key:0,onClick:L[0]||(L[0]=(...x)=>tt(u)&&tt(u)(...x)),disabled:t.disabled,type:"button",class:Ze(["speech-button",{"speech-button--listening":t.isListening}]),title:t.isListening?"Stop listening":"Start voice input"},[t.isListening?(X(),ne("svg",lp,L[2]||(L[2]=[d("path",{d:"M19 11h-1.7c0 .74-.16 1.43-.43 2.05l1.23 1.23c.56-.98.9-2.09.9-3.28zm-4.02.17c0-.06.02-.11.02-.17V5c0-1.66-1.34-3-3-3S9 3.34 9 5v.18l5.98 5.99zM4.27 3L3 4.27l6.01 6.01V11c0 1.66 1.33 3 2.99 3 .22 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c.91-.13 1.77-.45 2.54-.9L19.73 21 21 19.73 4.27 3z"},null,-1)]))):(X(),ne("svg",op,L[1]||(L[1]=[d("path",{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"},null,-1)])))],10,ip)):Re("",!0),t.floatingLabel&&t.label?(X(),ne("div",{key:1,class:Ze(c.value)},le(t.label),3)):Re("",!0),d("div",{class:Ze(["focus-indicator",{"focus-indicator--active":a.value}])},null,2)],2),t.showCharCount&&t.maxLength&&!t.label?(X(),ne("div",{key:0,class:Ze(["char-count-bottom",{"char-count-bottom--dense":t.dense}])},[d("span",{class:Ze(h.value)},"Characters: "+le(t.modelValue.length)+"/"+le(t.maxLength),3)],2)):Re("",!0)]),t.helpText?(X(),ne("div",{key:1,id:`${s.value}-help`,class:Ze(["help-text",{"help-text--dense":t.dense}])},[L[3]||(L[3]=d("svg",{class:"help-icon",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})],-1)),Me(" "+le(t.helpText),1)],10,up)):Re("",!0),t.error?(X(),ne("div",{key:2,class:Ze(["error-text",{"error-text--dense":t.dense}])},[L[4]||(L[4]=d("svg",{class:"error-icon",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),Me(" "+le(t.error),1)],2)):Re("",!0)],2))}},dp=tn(cp,[["__scopeId","data-v-0cf50eba"]]),hp=["disabled"],fp={key:0,class:"loading-spinner"},pp={__name:"BaseButton",props:{variant:{type:String,default:"primary",validator:t=>["primary","secondary","ghost","danger","success"].includes(t)},size:{type:String,default:"md",validator:t=>["sm","md","lg","xl"].includes(t)},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},fullWidth:{type:Boolean,default:!1},rounded:{type:Boolean,default:!1}},emits:["click"],setup(t,{emit:e}){const n=t,r=e,a=Ae(null),s=je(()=>({btn:!0,[`btn--${n.variant}`]:!0,[`btn--${n.size}`]:!0,"btn--loading":n.loading,"btn--disabled":n.disabled,"btn--full-width":n.fullWidth,"btn--rounded":n.rounded})),u=c=>{n.disabled||n.loading||(o(c),r("click",c))},o=c=>{const f=c.currentTarget.getBoundingClientRect(),m=Math.max(f.width,f.height),w=c.clientX-f.left-m/2,v=c.clientY-f.top-m/2,y=document.createElement("span");y.className="ripple-effect",y.style.width=y.style.height=m+"px",y.style.left=w+"px",y.style.top=v+"px",a.value&&(a.value.appendChild(y),setTimeout(()=>{y.parentNode&&y.parentNode.removeChild(y)},600))};return(c,h)=>(X(),ne("button",{class:Ze(s.value),disabled:t.disabled||t.loading,onClick:u},[t.loading?(X(),ne("span",fp,h[0]||(h[0]=[d("svg",{viewBox:"0 0 24 24",fill:"none"},[d("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2",opacity:"0.3"}),d("path",{d:"M12 2a10 10 0 0 1 10 10",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)]))):Re("",!0),d("span",{class:Ze([{"content-hidden":t.loading},"button-content"])},[Kd(c.$slots,"default",{},void 0)],2),d("div",{class:"button-ripple",ref_key:"ripple",ref:a},null,512)],10,hp))}},nr=tn(pp,[["__scopeId","data-v-a2d6db54"]]),vp={key:0,class:"loading-message"},gp={__name:"LoadingSpinner",props:{show:{type:Boolean,default:!0},message:{type:String,default:""},size:{type:String,default:"md",validator:t=>["sm","md","lg"].includes(t)},center:{type:Boolean,default:!1}},setup(t){const e=t,n=je(()=>({"loading-spinner":!0,"loading-spinner--center":e.center}));return(r,a)=>t.show?(X(),ne("div",{key:0,class:Ze(n.value)},[d("div",{class:Ze(["spinner",`spinner--${t.size}`])},null,2),t.message?(X(),ne("span",vp,le(t.message),1)):Re("",!0)],2)):Re("",!0)}},mp=tn(gp,[["__scopeId","data-v-aee19f69"]]);function d1(){const t=Ae(!1),e=Ae(!1),n=Ae(""),r=Ae("");let a=null,s=null;const u=window.SpeechRecognition||window.webkitSpeechRecognition;u&&(e.value=!0,a=new u,a.continuous=!1,a.interimResults=!0,a.lang="en-US",a.maxAlternatives=1,a.onstart=()=>{t.value=!0,r.value="",n.value=""},a.onresult=f=>{let m="",w="";for(let v=f.resultIndex;v<f.results.length;v++){const y=f.results[v];y.isFinal?m+=y[0].transcript:w+=y[0].transcript}n.value=m||w},a.onend=()=>{t.value=!1,s&&(clearTimeout(s),s=null)},a.onerror=f=>{switch(t.value=!1,f.error){case"no-speech":r.value="No speech detected. Please try again.";break;case"audio-capture":r.value="Microphone not available. Please check your microphone settings.";break;case"not-allowed":r.value="Microphone access denied. Please allow microphone access and try again.";break;case"network":r.value="Network error. Please check your internet connection.";break;default:r.value="Speech recognition error. Please try again."}s&&(clearTimeout(s),s=null)});const o=()=>{if(!(!a||t.value))try{a.start(),s=setTimeout(()=>{t.value&&c()},1e4)}catch(f){r.value="Failed to start speech recognition. Please try again.",console.error("Speech recognition error:",f)}},c=()=>{if(!(!a||!t.value)){try{a.stop()}catch(f){console.error("Error stopping speech recognition:",f)}s&&(clearTimeout(s),s=null)}},h=()=>{n.value="",r.value=""};return Yd(()=>{a&&t.value&&a.stop(),s&&clearTimeout(s)}),{isListening:t,isSupported:e,transcript:n,error:r,startListening:o,stopListening:c,clearTranscript:h}}const bp={class:"question-form animate-scale-in"},yp={key:0,class:"speech-error"},wp={class:"form-actions"},_p={class:"action-buttons"},kp={key:0,class:"loading-section"},xp={key:0,class:"quick-suggestions"},Sp={key:0,class:"suggestions-group"},Ap={class:"suggestions-grid"},Lp=["onClick"],Np=["onClick","onKeydown"],Cp={class:"suggestions-group"},Pp={class:"suggestions-grid"},Ip=["onClick"],Ep={__name:"QuestionForm",props:{question:{type:String,default:""},loading:{type:Boolean,default:!1},recentQuestions:{type:Array,default:()=>[]},showRecentQuestions:{type:Boolean,default:!1}},emits:["update:question","submit","clear","remove-recent"],setup(t,{emit:e}){const n=t,r=e,a=Ae(n.question),s=Ae(0),u=Ae(""),{isListening:o,isSupported:c,transcript:h,error:f,startListening:m,stopListening:w,clearTranscript:v}=d1();Fo("toggleSpeech",()=>{o.value?w():(u.value="",m())});const k=["What is love according to the Bible?","What are the Ten Commandments?","Who was Jesus Christ?","What is the meaning of faith?","How should Christians pray?","What does the Bible say about forgiveness?"],L=oe=>typeof oe=="string"?oe:oe&&typeof oe=="object"&&typeof oe.question=="string"?oe.question:"",x=oe=>{!oe||typeof oe!="object"||!oe.id||r("remove-recent",oe)};qt(h,oe=>{oe&&(a.value=oe,v())}),qt(f,oe=>{oe&&(u.value=oe)}),qt(()=>n.question,oe=>{a.value=oe}),qt(a,oe=>{r("update:question",oe)});const P=()=>{!a.value.trim()||n.loading||r("submit",a.value)},H=()=>{a.value="",r("clear")},M=oe=>{a.value=oe};return(oe,fe)=>(X(),ne("div",bp,[fe[12]||(fe[12]=ar(`<div class="form-header" data-v-159b079b><div class="form-icon" data-v-159b079b><svg viewBox="0 0 24 24" fill="currentColor" data-v-159b079b><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 15.2c-.66 0-1.2-.54-1.2-1.2
                  0-.66.54-1.2 1.2-1.2s1.2.54 1.2 1.2c0 .66-.54 1.2-1.2 1.2zm1.58-4.88c-.52.44-.88.87-.88 1.68h-1.5c0-1.26.59-2.03 1.26-2.58
                  .6-.49 1.12-.91 1.12-1.67 0-.97-.78-1.68-1.83-1.68-1.12 0-1.86.78-1.92 1.82H8.4c.06-2.02 1.58-3.32 3.73-3.32
                  2.07 0 3.57 1.24 3.57 3.04 0 1.39-.83 2.1-1.52 2.71z" data-v-159b079b></path></svg></div><div class="form-title-section" data-v-159b079b><h2 class="form-title" data-v-159b079b>Ask or Research Bible Topics</h2><p class="form-subtitle" data-v-159b079b> Enter one or more questions or request information you’d like to research — from Bible verses to explanations of biblical themes. </p></div></div>`,1)),(X(),ne("form",{onSubmit:Vn(P,["prevent"]),class:"form",key:s.value},[st(dp,{modelValue:a.value,"onUpdate:modelValue":fe[0]||(fe[0]=pe=>a.value=pe),label:"Your Bible Question",placeholder:"Ask anything about the Bible... (e.g., What does the Bible say about forgiveness?)",rows:5,disabled:t.loading,"max-length":500,"show-char-count":!0,"floating-label":!1,"auto-resize":!0,"speech-supported":tt(c),"is-listening":tt(o),"help-text":"Ask clear, specific questions for the most accurate and helpful biblical answers",class:"question-input"},null,8,["modelValue","disabled","speech-supported","is-listening"]),u.value?(X(),ne("div",yp,[fe[2]||(fe[2]=d("svg",{class:"speech-error-icon",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),Me(" "+le(u.value)+" ",1),d("button",{onClick:fe[1]||(fe[1]=pe=>u.value=""),class:"speech-error-dismiss"},"×")])):Re("",!0),d("div",wp,[d("div",_p,[st(nr,{type:"submit",disabled:t.loading||!a.value.trim(),loading:t.loading,size:"md",class:"submit-button"},{default:St(()=>[t.loading?Re("",!0):(X(),ne(Pt,{key:0},[fe[3]||(fe[3]=d("svg",{class:"submit-icon",viewBox:"0 0 24 24",fill:"currentColor"},[d("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"})],-1)),fe[4]||(fe[4]=Me(" Ask Question ",-1))],64))]),_:1},8,["disabled","loading"]),a.value.trim()?(X(),ir(nr,{key:0,type:"button",variant:"ghost",size:"md",onClick:H,disabled:t.loading,class:"clear-button"},{default:St(()=>fe[5]||(fe[5]=[d("svg",{class:"clear-icon",viewBox:"0 0 24 24",fill:"currentColor"},[d("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1),Me(" Clear ",-1)])),_:1,__:[5]},8,["disabled"])):Re("",!0)]),t.loading?(X(),ne("div",kp,[st(mp,{show:!0,size:"xl",class:"form-spinner"}),fe[6]||(fe[6]=d("div",{class:"loading-text"},[d("p",{class:"loading-primary"},"Searching Scripture..."),d("p",{class:"loading-secondary"},"Finding the perfect biblical answer for you")],-1))])):Re("",!0)])],32)),!a.value.trim()&&!t.loading?(X(),ne("div",xp,[t.showRecentQuestions&&t.recentQuestions.length?(X(),ne("div",Sp,[fe[9]||(fe[9]=d("h3",{class:"suggestions-title"},"Your Recently Asked Questions",-1)),d("div",Ap,[(X(!0),ne(Pt,null,Ut(t.recentQuestions,(pe,re)=>(X(),ne("div",{key:pe?.id??`${L(pe)}-${re}`,class:"suggestion-item"},[d("button",{class:"suggestion-button",type:"button",onClick:$=>M(L(pe))},[fe[7]||(fe[7]=d("svg",{class:"suggestion-icon",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})],-1)),Me(" "+le(L(pe)),1)],8,Lp),pe&&typeof pe=="object"&&pe.id?(X(),ne("button",{key:0,class:"suggestion-remove",type:"button","aria-label":"Remove recent question","data-tooltip":"Remove",onClick:Vn($=>x(pe),["stop"]),onKeydown:[ds(Vn($=>x(pe),["prevent","stop"]),["enter"]),ds(Vn($=>x(pe),["prevent","stop"]),["space"])]},fe[8]||(fe[8]=[d("svg",{viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M10 8.586l3.95-3.95a1 1 0 111.414 1.414L11.414 10l3.95 3.95a1 1 0 01-1.414 1.414L10 11.414l-3.95 3.95a1 1 0 01-1.414-1.414L8.586 10l-3.95-3.95A1 1 0 116.05 4.636L10 8.586z","clip-rule":"evenodd"})],-1)]),40,Np)):Re("",!0)]))),128))])])):Re("",!0),d("div",Cp,[fe[11]||(fe[11]=d("h3",{class:"suggestions-title"},"Popular Questions",-1)),d("div",Pp,[(X(),ne(Pt,null,Ut(k,pe=>d("button",{key:pe,onClick:re=>M(pe),class:"suggestion-button",type:"button"},[fe[10]||(fe[10]=d("svg",{class:"suggestion-icon",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})],-1)),Me(" "+le(pe),1)],8,Ip)),64))])])])):Re("",!0)]))}},Rp=tn(Ep,[["__scopeId","data-v-159b079b"]]),iu="http://localhost:8000",mn=Gt.create({baseURL:iu,headers:{"Content-Type":"application/json"},withCredentials:!0});function ou(){const t="bible_qa_csrf=",e=document.cookie.split(";");for(let n of e)if(n=n.trim(),n.startsWith(t))return n.substring(t.length);return null}mn.interceptors.request.use(t=>{const e=ou();return e&&t.method&&!["get","head","options"].includes(t.method.toLowerCase())&&(t.headers["X-CSRF-Token"]=e),t},t=>Promise.reject(t));mn.interceptors.response.use(t=>t,t=>{const e=t.response?.data?.detail||t.response?.data?.message||t.message||"An unexpected error occurred";return Promise.reject(new Error(e))});const Kt={async askQuestion(t,e=1){if(!t?.trim())throw new Error("Question cannot be empty");try{return(await mn.post("/api/ask",{question:t.trim(),user_id:e})).data}catch(n){throw n}},async askFollowUpQuestion({question:t,conversation_history:e=[],parent_question_id:n=null,userId:r=1}){if(!t?.trim())throw new Error("Question cannot be empty");try{return(await mn.post("/api/ask/followup",{question:t.trim(),conversation_history:e,parent_question_id:n,user_id:r})).data}catch(a){throw a}},async getVerse(t){if(!t?.trim())throw new Error("Reference cannot be empty");try{return(await mn.get("/api/bible/verse",{params:{ref:t.trim()}})).data}catch(e){throw e}},async getPassage(t){if(!t?.trim())throw new Error("Reference cannot be empty");try{return(await mn.get("/api/bible/passage",{params:{reference:t.trim()}})).data}catch(e){throw e}},async getChapter(t,e){if(!t?.trim()||!e)throw new Error("Book and chapter are required");return this.getPassage(`${t.trim()} ${e}`)},async streamQuestion(t,e,n=1){if(!t?.trim())throw new Error("Question cannot be empty");const r=ou(),a={"Content-Type":"application/json"};r&&(a["X-CSRF-Token"]=r);try{const s=await fetch(`${iu}/api/ask/stream`,{method:"POST",headers:a,credentials:"include",body:JSON.stringify({question:t.trim(),user_id:n})});if(!s.ok){const h=await s.json().catch(()=>({}));throw new Error(h.detail||h.message||`HTTP ${s.status}`)}const u=s.body.getReader(),o=new TextDecoder;let c="";for(;;){const{done:h,value:f}=await u.read();if(h)break;c+=o.decode(f,{stream:!0});const m=c.split(`

`);c=m.pop()||"";for(const w of m)if(w.startsWith("data: "))try{const v=JSON.parse(w.substring(6));e(v)}catch(v){console.error("Error parsing SSE data:",v)}}}catch(s){throw new Error(s.message||"Streaming request failed")}},async streamFollowUpQuestion(t,e,n=1){const{question:r,conversation_history:a,parent_question_id:s}=t;if(!r?.trim())throw new Error("Question cannot be empty");const u=ou(),o={"Content-Type":"application/json"};u&&(o["X-CSRF-Token"]=u);try{const c=await fetch(`${iu}/api/ask/followup/stream`,{method:"POST",headers:o,credentials:"include",body:JSON.stringify({question:r.trim(),conversation_history:a||[],parent_question_id:s,user_id:n})});if(!c.ok){const w=await c.json().catch(()=>({}));throw new Error(w.detail||w.message||`HTTP ${c.status}`)}const h=c.body.getReader(),f=new TextDecoder;let m="";for(;;){const{done:w,value:v}=await h.read();if(w)break;m+=f.decode(v,{stream:!0});const y=m.split(`

`);m=y.pop()||"";for(const k of y)if(k.startsWith("data: "))try{const L=JSON.parse(k.substring(6));e(L)}catch(L){console.error("Error parsing SSE data:",L)}}}catch(c){throw new Error(c.message||"Follow-up streaming request failed")}},async getApiLogs(t={}){try{return(await mn.get("/api/admin/logs/",{params:t})).data}catch(e){throw e}},async getApiStats(t={}){try{return(await mn.get("/api/admin/logs/stats",{params:t})).data}catch(e){throw e}},async getEndpointStats(t={}){try{return(await mn.get("/api/admin/logs/endpoints",{params:t})).data}catch(e){throw e}},async getOpenAIStats(t={}){try{return(await mn.get("/api/admin/logs/openai/stats",{params:t})).data}catch(e){throw e}},async getOpenAICalls(t={}){try{return(await mn.get("/api/admin/logs/openai",{params:t})).data}catch(e){throw e}},async getOpenAIUserUsage(t={}){try{return(await mn.get("/api/admin/logs/openai/users",{params:t})).data}catch(e){throw e}},async getUserStats(){try{return(await mn.get("/api/admin/users/stats")).data}catch(t){throw t}},async listUsers(t={}){try{return(await mn.get("/api/admin/users/",{params:t})).data}catch(e){throw e}},async getUserDetail(t){try{return(await mn.get(`/api/admin/users/${t}`)).data}catch(e){throw e}},async resetUserAccount(t){try{return(await mn.post(`/api/admin/users/${t}/reset-account`)).data}catch(e){throw e}},async clearUserSavedAnswers(t){try{return(await mn.post(`/api/admin/users/${t}/clear-saved-answers`)).data}catch(e){throw e}},async toggleUserActive(t){try{return(await mn.post(`/api/admin/users/${t}/toggle-active`)).data}catch(e){throw e}},async deleteUser(t){try{return(await mn.delete(`/api/admin/users/${t}`)).data}catch(e){throw e}},async cleanupGuestUsers(){try{return(await mn.post("/api/admin/users/cleanup-guest-users")).data}catch(t){throw t}}},Fp=["Genesis","Exodus","Leviticus","Numbers","Deuteronomy","Joshua","Judges","Ruth","1 Samuel","2 Samuel","1 Kings","2 Kings","1 Chronicles","2 Chronicles","Ezra","Nehemiah","Esther","Job","Psalm","Psalms","Proverbs","Ecclesiastes","Song of Solomon","Song of Songs","Isaiah","Jeremiah","Lamentations","Ezekiel","Daniel","Hosea","Joel","Amos","Obadiah","Jonah","Micah","Nahum","Habakkuk","Zephaniah","Haggai","Zechariah","Malachi","Matthew","Mark","Luke","John","Acts","Romans","1 Corinthians","2 Corinthians","Galatians","Ephesians","Philippians","Colossians","1 Thessalonians","2 Thessalonians","1 Timothy","2 Timothy","Titus","Philemon","Hebrews","James","1 Peter","2 Peter","1 John","2 John","3 John","Jude","Revelation"],Tp={Genesis:["Gen","Gen.","Ge","Ge.","Gn"],Exodus:["Exod","Exod.","Ex","Ex.","Exo","Exo."],Leviticus:["Lev","Lev.","Lv","Lv."],Numbers:["Num","Num.","Nm","Nm.","Nu","Nu."],Deuteronomy:["Deut","Deut.","Dt","Dt.","Deu","Deu."],Joshua:["Josh","Josh.","Jos","Jos."],Judges:["Judg","Judg.","Jud","Jud.","Jdg","Jdg.","Jdgs"],Ruth:["Ru","Ru.","Rth","Rth."],"1 Samuel":["1 Sam","1 Sam.","1Sa","1Sa.","1Sam","1Sam.","I Sam","I Sam."],"2 Samuel":["2 Sam","2 Sam.","2Sa","2Sa.","2Sam","2Sam.","II Sam","II Sam."],"1 Kings":["1 Kgs","1 Kgs.","1Ki","1Ki.","1Kings","1Kings.","I Kgs","I Kgs."],"2 Kings":["2 Kgs","2 Kgs.","2Ki","2Ki.","2Kings","2Kings.","II Kgs","II Kgs."],"1 Chronicles":["1 Chr","1 Chr.","1Ch","1Ch.","1Chron","1Chron.","I Chr","I Chr."],"2 Chronicles":["2 Chr","2 Chr.","2Ch","2Ch.","2Chron","2Chron.","II Chr","II Chr."],Ezra:["Ezr","Ezr.","Ez."],Nehemiah:["Neh","Neh.","Ne","Ne."],Esther:["Esth","Esth.","Est","Est."],Job:["Jb","Jb."],Psalm:["Ps","Ps.","Psa","Psa.","Psm","Psm.","Pss","Pss."],Psalms:["Ps","Ps.","Psa","Psa.","Psm","Psm.","Pss","Pss."],Proverbs:["Prov","Prov.","Pr","Pr.","Prv","Prv."],Ecclesiastes:["Eccl","Eccl.","Ecc","Ecc.","Qoheleth","Qoheleth."],"Song of Solomon":["Song of Sol","Song of Sol.","Song","Song.","SoS","Cant","Cant.","Canticles","Canticles."],"Song of Songs":["Song of Sol","Song of Sol.","Song","Song.","SoS","Cant","Cant.","Canticles","Canticles."],Isaiah:["Isa","Isa."],Jeremiah:["Jer","Jer."],Lamentations:["Lam","Lam."],Ezekiel:["Ezek","Ezek.","Eze","Eze."],Daniel:["Dan","Dan."],Hosea:["Hos","Hos."],Joel:["Joe","Joe."],Amos:["Am","Am."],Obadiah:["Obad","Obad.","Ob","Ob."],Jonah:["Jon","Jon."],Micah:["Mic","Mic."],Nahum:["Nah","Nah."],Habakkuk:["Hab","Hab."],Zephaniah:["Zeph","Zeph.","Zep","Zep."],Haggai:["Hag","Hag."],Zechariah:["Zech","Zech.","Zec","Zec."],Malachi:["Mal","Mal."],Matthew:["Matt","Matt.","Mt","Mt."],Mark:["Mk","Mk."],Luke:["Lk","Lk."],John:["Jn","Jn.","Jhn","Jhn."],Acts:["Act","Act."],Romans:["Rom","Rom.","Ro","Ro."],"1 Corinthians":["1 Cor","1 Cor.","1 Co","1 Co.","1Cor","1Cor.","I Cor","I Cor."],"2 Corinthians":["2 Cor","2 Cor.","2 Co","2 Co.","2Cor","2Cor.","II Cor","II Cor."],Galatians:["Gal","Gal."],Ephesians:["Eph","Eph."],Philippians:["Phil","Phil.","Php","Php."],Colossians:["Col","Col."],"1 Thessalonians":["1 Thess","1 Thess.","1 Thes","1 Thes.","1 Th","1 Th.","1Thess","1Thess.","I Thess","I Thess."],"2 Thessalonians":["2 Thess","2 Thess.","2 Thes","2 Thes.","2 Th","2 Th.","2Thess","2Thess.","II Thess","II Thess."],"1 Timothy":["1 Tim","1 Tim.","1 Ti","1 Ti.","1Tim","1Tim.","I Tim","I Tim."],"2 Timothy":["2 Tim","2 Tim.","2 Ti","2 Ti.","2Tim","2Tim.","II Tim","II Tim."],Titus:["Tit","Tit."],Philemon:["Philem","Philem.","Phm","Phm."],Hebrews:["Heb","Heb."],James:["Jas","Jas."],"1 Peter":["1 Pet","1 Pet.","1 Pe","1 Pe.","1 Pt","1 Pt.","1Peter","1Peter.","I Pet","I Pet."],"2 Peter":["2 Pet","2 Pet.","2 Pe","2 Pe.","2 Pt","2 Pt.","2Peter","2Peter.","II Pet","II Pet."],"1 John":["1 John","1 Jn","1 Jn.","1Jn","1Jn.","I John","I John.","1 Jo","1 Jo."],"2 John":["2 John","2 Jn","2 Jn.","2Jn","2Jn.","II John","II John.","2 Jo","2 Jo."],"3 John":["3 John","3 Jn","3 Jn.","3Jn","3Jn.","III John","III John.","3 Jo","3 Jo."],Jude:["Jud","Jud."],Revelation:["Rev","Rev.","Re","Re.","Apoc","Apoc.","Revelations"]},Cc={Genesis:50,Exodus:40,Leviticus:27,Numbers:36,Deuteronomy:34,Joshua:24,Judges:21,Ruth:4,"1 Samuel":31,"2 Samuel":24,"1 Kings":22,"2 Kings":25,"1 Chronicles":29,"2 Chronicles":36,Ezra:10,Nehemiah:13,Esther:10,Job:42,Psalm:150,Psalms:150,Proverbs:31,Ecclesiastes:12,"Song of Solomon":8,"Song of Songs":8,Isaiah:66,Jeremiah:52,Lamentations:5,Ezekiel:48,Daniel:12,Hosea:14,Joel:3,Amos:9,Obadiah:1,Jonah:4,Micah:7,Nahum:3,Habakkuk:3,Zephaniah:3,Haggai:2,Zechariah:14,Malachi:4,Matthew:28,Mark:16,Luke:24,John:21,Acts:28,Romans:16,"1 Corinthians":16,"2 Corinthians":13,Galatians:6,Ephesians:6,Philippians:4,Colossians:4,"1 Thessalonians":5,"2 Thessalonians":3,"1 Timothy":6,"2 Timothy":4,Titus:3,Philemon:1,Hebrews:13,James:5,"1 Peter":5,"2 Peter":3,"1 John":5,"2 John":1,"3 John":1,Jude:1,Revelation:22},qp=/^(?<book>(?:[1-3]\s*)?[A-Za-z][A-Za-z\s]+?)\s+(?<chapter>\d{1,3})(?::(?<start>\d{1,3})(?:-(?<end>\d{1,3}))?)?$/i;function Jo(t){if(typeof t!="string")return null;const e=t.replace(/[\u2013\u2014]/g,"-").trim();if(!e)return null;const n=e.match(qp);if(!n||!n.groups)return null;const r=n.groups.book.replace(/\s+/g," ").trim(),a=Number(n.groups.chapter),s=n.groups.start?Number(n.groups.start):null,u=n.groups.end?Number(n.groups.end):s;return{reference:e,book:r,chapter:a,startVerse:s,endVerse:s==null?null:u}}function Ti(t){if(typeof t!="string")return!1;const e=Jo(t);return e?e.startVerse==null&&e.endVerse==null:!1}const Mp={key:0},Op=["role","aria-label","onMouseenter","onFocus","onKeydown","onClick"],Bp={class:"verse-popup__reference"},jp={key:0,class:"verse-popup__status"},Dp={key:1,class:"verse-popup__status"},$p={key:2,class:"verse-popup__text"},Up={key:3,class:"verse-popup__notice"},zp=["href"],Hp=560,$r=16,Vp=240,Pc=420,Ic=180,Wp="This verse is too long to show here. Please navigate to the Reading View to see the rest.",Gp=3,Jp={__name:"ScriptureText",props:{text:{type:String,default:""},wrapperClass:{type:String,default:"scripture-text-wrapper"},textClass:{type:String,default:"scripture-text"},readLinkText:{type:String,default:"Open in Reading View →"},bibleGatewayVersion:{type:String,default:"KJV"},enableReferenceClick:{type:Boolean,default:!1},navigationSource:{type:String,default:"answer"},allowBookOnly:{type:Boolean,default:!1}},emits:["reference-click","reading-view"],setup(t,{emit:e}){const n=t,r=e,a=Ae(null),s=Ae(null),u=Ae(null),o=Ae(typeof window<"u"),h=Hh()?.proxy?.$router??null,f=new Map,m=Ae({visible:!1,reference:"",display:"",text:"",fullText:"",routeReference:"",loading:!1,error:null,x:0,y:0,truncated:!1}),w=Ae(null),v=Ae(0),y=C=>C&&Number.isInteger(Cc[C])?Cc[C]:null,k=C=>C.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),L=new Set,x=new Map,P=(C,J)=>{if(!C||!J)return;const te=C.replace(/\s+/g," ").trim();if(!te)return;const _e=J.replace(/\s+/g," ").trim();L.add(te),new Set([te.toLowerCase(),te.replace(/\./g,"").toLowerCase(),te.replace(/[\s.]/g,"").toLowerCase()]).forEach(Q=>{x.has(Q)||x.set(Q,_e)})};Fp.forEach(C=>P(C,C)),Object.entries(Tp).forEach(([C,J])=>{P(C,C),J.forEach(te=>P(te,C))});const H=Array.from(L).sort((C,J)=>J.length-C.length).map(C=>k(C).replace(/\s+/g,"\\s+")).join("|"),M=new RegExp(`\\b(${H})\\s+\\d{1,3}(?::\\d{1,3})?(?:[-–—]\\d{1,3}(?::\\d{1,3})?)?`,"gi"),oe=new RegExp(`\\b(${H})(?=\\s|\\d|[:;,.!?-]|$)(?:\\s+\\d{1,3}(?::\\d{1,3})?(?:[-–—]\\d{1,3}(?::\\d{1,3})?)?)?`,"gi"),fe=/^(\s*[;,]\s*(?:and\s+)?)(\d{1,3}(?::\d{1,3})?(?:[-–—]\d{1,3}(?::\d{1,3})?)?)(?!\s*[A-Za-z])/,pe=C=>{if(!C)return null;const J=C.replace(/\s+/g," ").trim();if(!J)return null;const te=[J.toLowerCase(),J.replace(/\./g,"").toLowerCase(),J.replace(/[\s.]/g,"").toLowerCase()];for(const _e of te)if(x.has(_e))return x.get(_e);return null},re=C=>C.replace(/\s+/g,"").replace(/[–—]/g,"-"),$=(C,J)=>{const te=(C??"").trim();if(!te){if(!Number.isInteger(J))return null;const Y=J;return{chapters:[Y],startChapter:Y,endChapter:Y,displayLabel:`${Y}`,normalizedSpec:`${Y}`,usedFallback:!0}}const _e=re(te),be=_e.split("-");if(be.length>2)return null;const Q=be.map(Y=>Number.parseInt(Y,10));if(Q.some(Y=>!Number.isInteger(Y)||Y<=0))return null;if(Q.length===1){const Y=Q[0];return{chapters:[Y],startChapter:Y,endChapter:Y,displayLabel:te,normalizedSpec:_e,usedFallback:!1}}const[_,se]=Q;if(se<_)return null;const z=[];for(let Y=_;Y<=se;Y+=1)z.push(Y);return{chapters:z,startChapter:_,endChapter:se,displayLabel:te,normalizedSpec:_e,usedFallback:!1}},ce=(C,J)=>{if(!C)return null;if(C.includes(":")){const[_e,be]=C.split(":"),Q=Number.parseInt(_e,10),_=Number.parseInt(be,10);return!Number.isInteger(Q)||!Number.isInteger(_)||Q<=0||_<=0?null:{chapter:Q,verse:_}}const te=Number.parseInt(C,10);return!Number.isInteger(te)||te<=0||!Number.isInteger(J)?null:{chapter:J,verse:te}},F=(C,J)=>{const te=(C??"").trim();if(!te)return{type:"none"};const _e=re(te),be=_e.split("-");if(be.length>2)return null;const Q=ce(be[0],J);if(!Q)return null;if(be.length===1)return{type:"single",points:[Q],normalizedSpec:_e,displaySpec:te,start:Q,end:Q};const _=ce(be[1],Q.chapter);if(!_||_.chapter<Q.chapter||_.chapter===Q.chapter&&_.verse<Q.verse)return null;if(Q.chapter===_.chapter){const se=[];for(let z=Q.verse;z<=_.verse;z+=1)se.push({chapter:Q.chapter,verse:z});return{type:"singleChapterRange",points:se,normalizedSpec:_e,displaySpec:te,start:Q,end:_}}return{type:"multiChapterRange",points:[Q,_],normalizedSpec:_e,displaySpec:te,start:Q,end:_}},B=({book:C,chapterPart:J,versePart:te,display:_e,fallbackChapter:be,allowBookFallback:Q=!1})=>{const _=C.replace(/\s+/g," ").trim();if(!_)return null;let se=J,z=!1;if((!se||!se.trim())&&Q){z=!0;const De=y(_);Number.isInteger(De)&&De>1?se=`1-${De}`:se="1"}const Y=$(se,be);if(!Y)return null;const Oe=!!!(te&&te.trim());let Be=[],Ue=!1,Ve=null,At="chapter",lt="",et=Y.endChapter;if(Oe){const De=Y.chapters.slice(0,Gp);Be=De.map(kt=>({reference:`${_} ${kt}:1`,chapter:kt,verse:1,chapterOnly:!0})),Ue=De.length<Y.chapters.length}else{const De=F(te,Y.startChapter);if(!De||De.type==="none")return null;At=De.normalizedSpec,lt=De.displaySpec,De.type==="single"||De.type==="singleChapterRange"?(Be=De.points.map(kt=>({reference:`${_} ${kt.chapter}:${kt.verse}`,chapter:kt.chapter,verse:kt.verse})),et=De.end.chapter):De.type==="multiChapterRange"&&(Be=De.points.map((kt,xt)=>({reference:`${_} ${kt.chapter}:${kt.verse}`,chapter:kt.chapter,verse:kt.verse,boundary:xt===0?"start":"end"})),et=De.end.chapter,Ve=`Showing the opening verse of ${_} ${De.start.chapter}:${De.start.verse} and the closing verse of ${_} ${De.end.chapter}:${De.end.verse}.`)}if(!Be.length)return null;const ut=Y.displayLabel||`${Y.startChapter}`,ct=Y.normalizedSpec||`${Y.startChapter}`,ze=Oe?`${_} ${ut}`:`${_} ${ut}:${lt||At}`,dt=`${_.toLowerCase()}|${ct}|${At}`;return{type:"reference",display:_e,reference:ze,book:_,chapterSpec:ut,verseSpec:Oe?"":lt||At,fetchRefs:Be,cacheKey:dt,hasVerseSpec:!Oe,chapterReference:Oe,truncatedChapters:Ue,totalChapters:Y.chapters.length,rangeNote:Ve,lastChapter:et,bookOnlyReference:z}},ee=C=>{if(!C)return"";const J=C.indexOf(":");return J===-1?C:C.slice(0,J)},Z=C=>{const J=typeof C=="string"?C.trim():"";return J?Jo(J)?.reference||J:""},de=C=>{if(!C)return"";const J=Z(C.reference||C.display);if(J)return J;let te="";return C.chapterReference?Array.isArray(C.fetchRefs)&&C.fetchRefs.length?te=ee(C.fetchRefs[0].reference):te=ee(C.reference||C.display):Array.isArray(C.fetchRefs)&&C.fetchRefs.length?te=C.fetchRefs[0].reference:te=C.reference||C.display||"",Z(te)||te||""},ge=(C,J=!1)=>{if(!C)return[];const te=J?oe:M;te.lastIndex=0;const _e=[];let be=0,Q;for(;(Q=te.exec(C))!==null;){const _=Q.index,se=Q[0],z=Q[1],Y=pe(z)||z;_>be&&_e.push({type:"text",text:C.slice(be,_)});const Oe=se.slice(z.length).trim(),Be=/\d/.test(Oe),Ue=Oe.indexOf(":"),Ve=Ue>=0?Oe.slice(0,Ue):Oe,At=Ue>=0?Oe.slice(Ue+1):"",lt=B({book:Y,chapterPart:Ve,versePart:At,display:se,allowBookFallback:J&&!Be});if(!lt){_e.push({type:"text",text:se}),be=te.lastIndex;continue}_e.push(lt);let et=te.lastIndex,ut=lt;for(;et<C.length;){const ct=C.slice(et),ze=fe.exec(ct);if(!ze)break;const[dt,De,kt]=ze;_e.push({type:"text",text:De});const xt=kt.trim();let ht=null;if(xt.includes(":")){const[yt,zt=""]=xt.split(":");ht=B({book:Y,chapterPart:yt,versePart:zt,display:kt})}else ut?.hasVerseSpec?ht=B({book:Y,chapterPart:"",versePart:xt,display:kt,fallbackChapter:ut.lastChapter}):ht=B({book:Y,chapterPart:xt,versePart:"",display:kt});ht?(_e.push(ht),ut=ht):_e.push({type:"text",text:kt}),et+=dt.length}be=et,te.lastIndex=et}return be<C.length&&_e.push({type:"text",text:C.slice(be)}),_e.length?_e:[{type:"text",text:C}]},ke=je(()=>ge(n.text,n.allowBookOnly)),ve=C=>{if(typeof window>"u")return;const J=C||u.value;if(!J)return;const te=J.getBoundingClientRect(),_e=s.value,be=_e?.offsetWidth??Hp,Q=_e?.offsetHeight??Vp,_=window.innerWidth,se=window.innerHeight;let z=te.left+te.width/2-be/2,Y=te.top-Q-12;Y<$r&&(Y=te.bottom+12),z+be+$r>_&&(z=_-be-$r),z<$r&&(z=$r),Y+Q+$r>se&&(Y=se-Q-$r),Y<$r&&(Y=$r),u.value=J,m.value.x=Math.round(z),m.value.y=Math.round(Y)},Se=(C,J=Pc)=>{if(!C)return"";if(!Number.isFinite(J)||J<=0||C.length<=J)return C;const te=C.slice(0,J),_e=te.lastIndexOf(" ");return`${(_e>J*.3?te.slice(0,_e):te).trim()}…`},Ee=async C=>{if(typeof window>"u")return;await bn(),ve(C);const J=s.value;if(!J)return;const _e=window.innerHeight-$r*2;if(J.scrollHeight<=_e){m.value.truncated=!1,m.value.text=m.value.fullText;return}let be=Pc,Q=!1;const _=m.value.fullText||m.value.text||"";for(;be>=Ic;){m.value.text=Se(_,be),m.value.truncated=!0,await bn(),ve(C);const se=s.value;if(se?.scrollHeight&&se.scrollHeight<=_e){Q=!0;break}be=Math.floor(be*.85)}Q||(m.value.text=Se(_,Ic),m.value.truncated=!0,await bn(),ve(C))},Le=()=>{w.value!==null&&(clearTimeout(w.value),w.value=null)},I=(C=!1)=>{if(C){Le(),m.value.visible=!1,m.value.loading=!1,m.value.error=null,m.value.text="",m.value.fullText="",m.value.truncated=!1,m.value.routeReference="",u.value=null,v.value+=1;return}Le(),w.value=window.setTimeout(()=>{m.value.visible=!1,m.value.loading=!1,m.value.error=null,m.value.text="",m.value.fullText="",m.value.truncated=!1,m.value.routeReference="",u.value=null,v.value+=1},120)},V=async(C,J)=>{if(!C||!C.fetchRefs.length)return;Le();const te=J?.currentTarget||J?.target||null;u.value=te,m.value.visible=!0,m.value.display=C.display,m.value.reference=C.reference,m.value.routeReference=de(C),m.value.loading=!0,m.value.error=null,m.value.text="",m.value.fullText="",m.value.truncated=!1,await bn(),ve(te);const _e=C.cacheKey,be=f.get(_e);if(be){m.value.loading=!1,m.value.reference=be.reference,m.value.fullText=be.fullText??be.text??"",m.value.text=m.value.fullText,m.value.truncated=!1,await Ee(te);return}const Q=++v.value;try{const _=[];let se=null;for(const Oe of C.fetchRefs)try{const Be=await Kt.getVerse(Oe.reference);Be&&Be.text&&_.push(Be)}catch(Be){se=Be}if(Q!==v.value)return;if(!_.length){m.value.loading=!1,m.value.error=se?.message||"Verse not found.",await bn(),ve(te);return}let z=C.reference||_[0].reference;C.hasVerseSpec&&_.length===1&&_[0]?.reference&&(z=_[0].reference);let Y=_.map(Oe=>`${Oe.reference}: ${Oe.text}`).join(`
`);if(C.chapterReference){const Oe=C.fetchRefs.length,Be=Math.max(0,C.totalChapters-Oe),Ue=[];C.bookOnlyReference?(Ue.push(`Showing the opening verses from ${C.book}.`),Ue.push("Use the link below to explore the rest of the book.")):(Be>0?(Ue.push(`Showing opening verse for the first ${Oe} chapter${Oe>1?"s":""}.`),Ue.push(`${Be} more chapter${Be>1?"s":""} referenced.`)):C.totalChapters>1?Ue.push("Showing the opening verse for each referenced chapter."):Ue.push("Showing the opening verse for this chapter reference."),Ue.push("Use the link below to explore the full chapter.")),Y=`${Y}

(${Ue.join(" ")})`}C.rangeNote&&(Y=`${Y}

(${C.rangeNote} Use the link below to read the complete passage.)`);const ae={reference:z,fullText:Y};f.set(_e,ae),m.value.loading=!1,m.value.reference=ae.reference,m.value.fullText=ae.fullText,m.value.text=ae.fullText,m.value.truncated=!1,await Ee(te)}catch(_){Q===v.value&&(m.value.loading=!1,m.value.error=_.message||"Error fetching verse.",m.value.truncated=!1,await bn(),ve(te))}},R=()=>{I()},q=()=>{I()},O=C=>{const J=m.value.routeReference||m.value.reference||m.value.display,te=Z(J);if(!te)return;C?.preventDefault&&C.preventDefault();const _e=typeof n.navigationSource=="string"&&n.navigationSource.trim()?n.navigationSource.trim():null;r("reading-view",{reference:te,source:_e});const be=_e?{ref:te,source:_e}:{ref:te};if(Ti(te)&&(be.fullChapter="1"),h)h.push({name:"reading",query:be});else if(typeof window<"u"){const Q=new URL(window.location.origin+"/reading");Q.searchParams.set("ref",te),_e&&Q.searchParams.set("source",_e),window.location.href=Q.toString()}},S=C=>{const J=Z(C);if(!J)return"#";const te=new URLSearchParams({ref:J});return n.navigationSource&&te.set("source",n.navigationSource),Ti(J)&&te.set("fullChapter","1"),`/reading?${te.toString()}`},j=(C,J)=>{if(!n.enableReferenceClick||!C)return;J?.preventDefault&&J.preventDefault();const te=de(C);te&&r("reference-click",te)};return qt(()=>n.text,C=>{C||I(!0)}),Vr(()=>{o.value=!0}),Vh(()=>{I(!0),Le()}),(C,J)=>(X(),ne("div",{class:Ze(t.wrapperClass),ref_key:"wrapperEl",ref:a},[d("div",{class:Ze(t.textClass)},[(X(!0),ne(Pt,null,Ut(ke.value,(te,_e)=>(X(),ne(Pt,{key:_e},[te.type==="text"?(X(),ne("span",Mp,le(te.text),1)):(X(),ne("span",{key:1,class:Ze(["scripture-reference",{"scripture-reference--clickable":t.enableReferenceClick}]),tabindex:"0",role:t.enableReferenceClick?"button":void 0,"aria-label":t.enableReferenceClick?`Open ${te.reference||te.display}`:void 0,onMouseenter:be=>V(te,be),onMouseleave:R,onFocus:be=>V(te,be),onBlur:R,onKeydown:[J[0]||(J[0]=ds(Vn(be=>I(!0),["prevent"]),["escape"])),ds(Vn(be=>j(te,be),["prevent"]),["enter"]),ds(Vn(be=>j(te,be),["prevent"]),["space"])],onClick:be=>j(te,be)},le(te.display),43,Op))],64))),128))],2),o.value?(X(),ir(Wh,{key:0,to:"body"},[m.value.visible?(X(),ne("div",{key:0,ref_key:"popupEl",ref:s,class:"verse-popup",style:yu({top:m.value.y+"px",left:m.value.x+"px"}),onMouseenter:Le,onMouseleave:q},[d("strong",Bp,le(m.value.reference||m.value.display),1),m.value.loading?(X(),ne("p",jp,"Loading...")):m.value.error?(X(),ne("p",Dp,le(m.value.error),1)):(X(),ne("p",$p,le(m.value.text),1)),m.value.truncated?(X(),ne("p",Up,le(Wp))):Re("",!0),d("a",{class:"verse-popup__link",href:S(m.value.routeReference||m.value.reference||m.value.display),onClick:Vn(O,["prevent"])},le(t.readLinkText),9,zp)],36)):Re("",!0)])):Re("",!0),Kd(C.$slots,"default",{},void 0)],2))}},fs=tn(Jp,[["__scopeId","data-v-6d005bb1"]]),_o="http://localhost:8000",Si="bible_qa_user",gr={async register(t,e,n){try{return{success:!0,user:(await Gt.post(`${_o}/api/auth/register`,{email:t,username:e,password:n})).data}}catch(r){return{success:!1,message:r.response?.data?.detail||"Registration failed"}}},async login(t,e){try{const r=(await Gt.post(`${_o}/api/auth/login`,{email:t,password:e},{withCredentials:!0})).data||null;return r&&localStorage.setItem(Si,JSON.stringify(r)),{success:!0,user:r}}catch(n){return{success:!1,message:n.response?.data?.detail||"Login failed"}}},async logout(){try{await Gt.post(`${_o}/api/auth/logout`,null,{withCredentials:!0})}catch(t){console.error("Failed to log out:",t)}finally{localStorage.removeItem(Si)}},async getCurrentUser(){try{return(await Gt.get(`${_o}/api/auth/me`,{withCredentials:!0})).data}catch{return this.clearStoredUser(),null}},getStoredUser(){const t=localStorage.getItem(Si);return t?JSON.parse(t):null},isAuthenticated(){return!!this.getStoredUser()},async refreshUser(){const t=await this.getCurrentUser();return t&&localStorage.setItem(Si,JSON.stringify(t)),t},clearStoredUser(){localStorage.removeItem(Si)}};Gt.defaults.withCredentials=!0;function Kp(){const t="bible_qa_csrf=",e=document.cookie.split(";");for(let n of e)if(n=n.trim(),n.startsWith(t))return n.substring(t.length);return null}Gt.interceptors.request.use(t=>{const e=Kp();return e&&t.method&&!["get","head","options"].includes(t.method.toLowerCase())&&(t.headers["X-CSRF-Token"]=e),t},t=>Promise.reject(t));Gt.interceptors.response.use(t=>t,t=>{if(t.response?.status===401){const e=gr.isAuthenticated();gr.clearStoredUser(),e&&typeof window<"u"&&(window.location.href="/login")}return Promise.reject(t)});const ko="http://localhost:8000",Yp={async save(t,e=[]){try{return{success:!0,id:(await Gt.post(`${ko}/api/saved-answers`,{question_id:t,tags:e}))?.data?.id,message:"Answer saved successfully!"}}catch(n){return console.error("Failed to save answer:",n),{success:!1,message:n.response?.data?.detail||"Failed to save answer."}}},async getAll(t={}){try{const e={};return t.query&&(e.query=t.query),t.tag&&(e.tag=t.tag),t.limit&&(e.limit=t.limit),(await Gt.get(`${ko}/api/saved-answers`,{params:e}))?.data?.saved_answers||[]}catch(e){return console.error("Failed to load saved answers:",e),[]}},async getById(t){return(await this.getAll()).find(n=>n.id===t)||null},async delete(t){try{return await Gt.delete(`${ko}/api/saved-answers/${t}`),{success:!0,message:"Answer deleted successfully!"}}catch(e){return console.error("Failed to delete answer:",e),{success:!1,message:e.response?.data?.detail||"Failed to delete answer."}}},async search(t){return this.getAll({query:t})},async getByTag(t){return this.getAll({tag:t})},async getAllTags(){try{return(await Gt.get(`${ko}/api/saved-answers/tags`)).data||[]}catch(t){return console.error("Error getting tags:",t),[]}},async getStats(){try{const t=await this.getAll(),e=await this.getAllTags(),n=t.reduce((r,a)=>{const s=a.answer?a.answer.split(/\s+/).filter(u=>u.length>0).length:0;return r+s},0);return{totalSaved:t.length,totalWords:n,totalTags:e.length,oldestSave:t.length>0?t[t.length-1].saved_at:null,newestSave:t.length>0?t[0].saved_at:null}}catch(t){return console.error("Error getting stats:",t),{totalSaved:0,totalWords:0,totalTags:0}}},async exportData(){const t=await this.getAll();return JSON.stringify({version:"1.0",source:"Bible Q&A App",exportDate:new Date().toISOString(),answers:t},null,2)},updateTags(){console.warn("updateTags not yet implemented for API")},importData(){console.warn("importData not yet implemented for API")},async getStorageInfo(){const e=(await this.getAll()).length,n=100,r=n-e,a=e/n*100;return{used:e,total:n,remaining:r,percentage:a}},clearAll(){console.warn("clearAll not available for API - delete individually")}},ma=Yp,ja=Ae(gr.getStoredUser()),Qp=je(()=>!!ja.value);function Gr(){const t=Wr(),e=Ae(!1),n=Ae(null),r=async(c,h,f)=>{e.value=!0,n.value=null;try{const m=await gr.register(c,h,f);if(m.success){const w=await gr.login(c,f);if(w.success)return ja.value=w.user,{success:!0}}return n.value=m.message,m}catch{return n.value="Registration failed. Please try again.",{success:!1,message:n.value}}finally{e.value=!1}},a=async(c,h)=>{e.value=!0,n.value=null;try{const f=await gr.login(c,h);return f.success?(ja.value=f.user,{success:!0}):(n.value=f.message,f)}catch{return n.value="Login failed. Please try again.",{success:!1,message:n.value}}finally{e.value=!1}},s=async()=>{await gr.logout(),ja.value=null,t.push("/login")},u=async()=>{try{const c=await gr.refreshUser();return ja.value=c,c}catch(c){return console.error("Failed to refresh user:",c),null}},o=async()=>{if(ja.value)return!0;const c=gr.getStoredUser();return c?(ja.value=c,!0):!!await u()};return{currentUser:je(()=>ja.value),isAuthenticated:Qp,isLoading:je(()=>e.value),error:je(()=>n.value),register:r,login:a,logout:s,refreshUser:u,checkAuth:o}}const Xp={key:0,class:"answer-display animate-fade-in"},Zp={class:"answer-content"},e2={key:0,class:"stream-status"},t2={class:"answer-text-wrapper"},n2={key:0,class:"question-prompt"},r2={class:"question-prompt__text"},a2={class:"answer-footer"},s2={class:"answer-actions"},i2={key:0,viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},o2={key:1,viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},l2={key:0,viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},u2={key:1,viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},c2={class:"answer-meta"},d2={class:"timestamp"},h2={class:"word-count"},f2={class:"followup-section"},p2={class:"followup-input-group"},v2=["disabled"],g2={key:0,viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},m2={key:1},b2={key:2},y2={__name:"AnswerDisplay",props:{answer:{type:String,default:""},question:{type:String,default:""},questionId:{type:Number,default:null},loading:{type:Boolean,default:!1},streamStatus:{type:String,default:""},isStreaming:{type:Boolean,default:!1}},emits:["answerSaved","followUpQuestion","loginRequired","readingView"],setup(t,{emit:e}){const n=e,{currentUser:r}=Gr(),a=t,s=Ae(!1),u=Ae(null),o=Ae(!1),c=Ae(""),h=Ae(""),f=je(()=>new Date().toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})),m=je(()=>typeof a.answer=="string"?a.answer:a.answer==null?"":String(a.answer)),w=je(()=>{const H=m.value.trim();return H?H.split(/\s+/).length:0});je(()=>Math.max(1,Math.ceil(w.value/200)));const v=async()=>{try{await navigator.clipboard.writeText(a.answer),s.value=!0,setTimeout(()=>{s.value=!1},2e3)}catch(H){console.error("Failed to copy text:",H)}},y=async()=>{if(navigator.share){try{await navigator.share({title:"Bible Q&A Answer",text:a.answer})}catch(H){console.error("Error sharing:",H)}return}v()},k=async()=>{if(!o.value){if(!r.value){confirm("You need to be logged in to save answers. Would you like to create an account or log in?")&&n("loginRequired",{question:a.question,answer:a.answer,questionId:a.questionId});return}if(!a.questionId){console.error("Cannot save answer without a questionId."),u.value=!1,setTimeout(()=>{u.value=null},3e3);return}try{o.value=!0,await new Promise(M=>setTimeout(M,0));const H=await ma.save(a.questionId);H.success?(u.value=!0,n("answerSaved",H.id)):(u.value=!1,console.warn("Failed to save answer:",H.message)),setTimeout(()=>{u.value=null},3e3)}catch(H){console.error("Failed to save answer:",H),u.value=!1,setTimeout(()=>{u.value=null},3e3)}finally{o.value=!1}}},L=H=>{n("readingView",H)},x=()=>{!c.value.trim()||a.loading||(n("followUpQuestion",c.value),h.value=c.value,c.value="")},P=Ae(!1);return qt(()=>a.answer,async(H,M)=>{if(!H){P.value=!1;return}!M&&H&&!P.value&&(P.value=!0,await bn(),setTimeout(()=>{const oe=document.querySelector(".answer-display");oe&&oe.scrollIntoView({behavior:"smooth",block:"start"})},100))}),qt(()=>a.question,H=>{h.value=H||""},{immediate:!0}),(H,M)=>(X(),ir(ba,{name:"answer-appear",appear:""},{default:St(()=>[t.answer?(X(),ne("section",Xp,[M[13]||(M[13]=d("header",{class:"answer-header"},[d("div",{class:"answer-icon","aria-hidden":"true"},[d("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[d("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})])]),d("div",{class:"header-content"},[d("h3",{class:"answer-title"},"Biblical Answer"),d("p",{class:"answer-subtitle"},"Rooted in Scripture")]),d("div",{class:"answer-badge"},[d("svg",{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[d("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),d("span",null,"Verified")])],-1)),d("div",Zp,[st(ba,{name:"status-fade"},{default:St(()=>[t.streamStatus?(X(),ne("div",e2,[M[1]||(M[1]=d("svg",{class:"stream-status-icon",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[d("path",{"fill-rule":"evenodd",d:"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z","clip-rule":"evenodd"})],-1)),d("span",null,le(t.streamStatus),1)])):Re("",!0)]),_:1}),d("div",t2,[h.value?(X(),ne("div",n2,[M[2]||(M[2]=d("span",{class:"question-prompt__label"},"You asked:",-1)),d("p",r2,le(h.value),1)])):Re("",!0),st(fs,{text:t.answer,"text-class":"answer-text","navigation-source":"answer",onReadingView:L},null,8,["text"]),M[3]||(M[3]=d("div",{class:"reading-info"},null,-1))]),d("footer",a2,[d("div",s2,[st(nr,{class:Ze(["action-button",{"action-button--success":s.value}]),size:"sm",variant:"secondary",onClick:v},{default:St(()=>[s.value?(X(),ne("svg",o2,M[5]||(M[5]=[d("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)]))):(X(),ne("svg",i2,M[4]||(M[4]=[d("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"},null,-1),d("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"},null,-1)]))),Me(" "+le(s.value?"Copied!":"Copy"),1)]),_:1},8,["class"]),st(nr,{class:"action-button",size:"sm",variant:"secondary",onClick:y},{default:St(()=>M[6]||(M[6]=[d("svg",{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[d("path",{d:"M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z"})],-1),Me(" Share ",-1)])),_:1,__:[6]}),st(nr,{class:Ze(["action-button",{"action-button--success":u.value}]),size:"sm",variant:"ghost",disabled:o.value,onClick:k},{default:St(()=>[u.value?(X(),ne("svg",u2,M[8]||(M[8]=[d("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)]))):(X(),ne("svg",l2,M[7]||(M[7]=[d("path",{d:"M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"},null,-1)]))),Me(" "+le(u.value?"Saved!":"Save"),1)]),_:1},8,["disabled","class"])]),d("div",c2,[d("div",d2,[M[9]||(M[9]=d("svg",{class:"timestamp-icon",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[d("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})],-1)),d("span",null,le(f.value),1)]),d("div",h2,le(w.value)+" words",1)])])]),d("section",f2,[M[11]||(M[11]=d("div",{class:"followup-header"},[d("svg",{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[d("path",{"fill-rule":"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.84 8.84 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z","clip-rule":"evenodd"})]),d("span",{class:"followup-title"},"Want to know more?")],-1)),M[12]||(M[12]=d("p",{class:"followup-description"},"Ask a follow-up question to explore this topic further.",-1)),d("div",p2,[en(d("input",{"onUpdate:modelValue":M[0]||(M[0]=oe=>c.value=oe),class:"followup-input",type:"text",disabled:t.loading,placeholder:"e.g., Tell me more about ...",onKeyup:ds(x,["enter"])},null,40,v2),[[sr,c.value]]),st(nr,{class:"followup-button",variant:"primary",loading:t.loading,disabled:t.loading||!c.value.trim(),onClick:x},{default:St(()=>[t.loading?Re("",!0):(X(),ne("svg",g2,M[10]||(M[10]=[d("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707l-3-3a1 1 0 00-1.414 1.414L10.586 9H7a1 1 0 100 2h3.586l-1.293 1.293a1 1 0 101.414 1.414l3-3a1 1 0 000-1.414z","clip-rule":"evenodd"},null,-1)]))),t.loading?(X(),ne("span",m2,"Asking...")):(X(),ne("span",b2,"Ask Follow-up"))]),_:1},8,["loading","disabled"])])])])):Re("",!0)]),_:1}))}},w2=tn(y2,[["__scopeId","data-v-95efc66b"]]),_2={key:0,class:"error-message",role:"alert","aria-live":"polite"},k2={class:"error-content"},x2={class:"error-text-content"},S2={class:"error-text"},A2={class:"error-actions"},L2={__name:"ErrorMessage",props:{error:{type:String,default:""}},emits:["dismiss","retry"],setup(t,{emit:e}){const n=e,r=()=>{n("retry"),n("dismiss")};return(a,s)=>(X(),ir(ba,{name:"error-appear"},{default:St(()=>[t.error?(X(),ne("div",_2,[d("div",k2,[s[5]||(s[5]=d("div",{class:"error-icon-wrapper"},[d("div",{class:"error-icon"},[d("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[d("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})])])],-1)),d("div",x2,[s[1]||(s[1]=d("h4",{class:"error-title"},"Something went wrong",-1)),d("p",S2,le(t.error),1),s[2]||(s[2]=d("div",{class:"error-suggestions"},[d("p",{class:"suggestions-title"},"Try these solutions:"),d("ul",{class:"suggestions-list"},[d("li",null,"Check your internet connection"),d("li",null,"Refresh the page and try again"),d("li",null,"Make sure your question is clear and specific")])],-1))]),d("div",A2,[st(nr,{onClick:s[0]||(s[0]=u=>a.$emit("dismiss")),variant:"ghost",size:"sm",class:"dismiss-button"},{default:St(()=>s[3]||(s[3]=[d("svg",{viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),Me(" Dismiss ",-1)])),_:1,__:[3]}),st(nr,{onClick:r,variant:"secondary",size:"sm",class:"retry-button"},{default:St(()=>s[4]||(s[4]=[d("svg",{viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z","clip-rule":"evenodd"})],-1),Me(" Try Again ",-1)])),_:1,__:[4]})])])])):Re("",!0)]),_:1}))}},N2=tn(L2,[["__scopeId","data-v-285e68a3"]]),C2="modulepreload",P2=function(t){return"/"+t},Ec={},Fl=function(e,n,r){let a=Promise.resolve();if(n&&n.length>0){let c=function(h){return Promise.all(h.map(f=>Promise.resolve(f).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),o=u?.nonce||u?.getAttribute("nonce");a=c(n.map(h=>{if(h=P2(h),h in Ec)return;Ec[h]=!0;const f=h.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${m}`))return;const w=document.createElement("link");if(w.rel=f?"stylesheet":C2,f||(w.as="script"),w.crossOrigin="",w.href=h,o&&w.setAttribute("nonce",o),document.head.appendChild(w),f)return new Promise((v,y)=>{w.addEventListener("load",v),w.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(u){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=u,window.dispatchEvent(o),!o.defaultPrevented)throw u}return a.then(u=>{for(const o of u||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};function Bt(t){"@babel/helpers - typeof";return Bt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bt(t)}var Pr=Uint8Array,rr=Uint16Array,ku=Int32Array,xu=new Pr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Su=new Pr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Rc=new Pr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),h1=function(t,e){for(var n=new rr(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var a=new ku(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)a[s]=s-n[r]<<5|r;return{b:n,r:a}},f1=h1(xu,2),I2=f1.b,lu=f1.r;I2[28]=258,lu[258]=28;var E2=h1(Su,0),Fc=E2.r,uu=new rr(32768);for(var Yt=0;Yt<32768;++Yt){var Oa=(Yt&43690)>>1|(Yt&21845)<<1;Oa=(Oa&52428)>>2|(Oa&13107)<<2,Oa=(Oa&61680)>>4|(Oa&3855)<<4,uu[Yt]=((Oa&65280)>>8|(Oa&255)<<8)>>1}var Ii=function(t,e,n){for(var r=t.length,a=0,s=new rr(e);a<r;++a)t[a]&&++s[t[a]-1];var u=new rr(e);for(a=1;a<e;++a)u[a]=u[a-1]+s[a-1]<<1;var o;if(n){o=new rr(1<<e);var c=15-e;for(a=0;a<r;++a)if(t[a])for(var h=a<<4|t[a],f=e-t[a],m=u[t[a]-1]++<<f,w=m|(1<<f)-1;m<=w;++m)o[uu[m]>>c]=h}else for(o=new rr(r),a=0;a<r;++a)t[a]&&(o[a]=uu[u[t[a]-1]++]>>15-t[a]);return o},ps=new Pr(288);for(var Yt=0;Yt<144;++Yt)ps[Yt]=8;for(var Yt=144;Yt<256;++Yt)ps[Yt]=9;for(var Yt=256;Yt<280;++Yt)ps[Yt]=7;for(var Yt=280;Yt<288;++Yt)ps[Yt]=8;var Uo=new Pr(32);for(var Yt=0;Yt<32;++Yt)Uo[Yt]=5;var R2=Ii(ps,9,0),F2=Ii(Uo,5,0),p1=function(t){return(t+7)/8|0},T2=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new Pr(t.subarray(e,n))},pa=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Ai=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},Tl=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var a=n.length,s=n.slice();if(!a)return{t:g1,l:0};if(a==1){var u=new Pr(n[0].s+1);return u[n[0].s]=1,{t:u,l:1}}n.sort(function(oe,fe){return oe.f-fe.f}),n.push({s:-1,f:25001});var o=n[0],c=n[1],h=0,f=1,m=2;for(n[0]={s:-1,f:o.f+c.f,l:o,r:c};f!=a-1;)o=n[n[h].f<n[m].f?h++:m++],c=n[h!=f&&n[h].f<n[m].f?h++:m++],n[f++]={s:-1,f:o.f+c.f,l:o,r:c};for(var w=s[0].s,r=1;r<a;++r)s[r].s>w&&(w=s[r].s);var v=new rr(w+1),y=cu(n[f-1],v,0);if(y>e){var r=0,k=0,L=y-e,x=1<<L;for(s.sort(function(fe,pe){return v[pe.s]-v[fe.s]||fe.f-pe.f});r<a;++r){var P=s[r].s;if(v[P]>e)k+=x-(1<<y-v[P]),v[P]=e;else break}for(k>>=L;k>0;){var H=s[r].s;v[H]<e?k-=1<<e-v[H]++-1:++r}for(;r>=0&&k;--r){var M=s[r].s;v[M]==e&&(--v[M],++k)}y=e}return{t:new Pr(v),l:y}},cu=function(t,e,n){return t.s==-1?Math.max(cu(t.l,e,n+1),cu(t.r,e,n+1)):e[t.s]=n},Tc=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new rr(++e),r=0,a=t[0],s=1,u=function(c){n[r++]=c},o=1;o<=e;++o)if(t[o]==a&&o!=e)++s;else{if(!a&&s>2){for(;s>138;s-=138)u(32754);s>2&&(u(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(u(a),--s;s>6;s-=6)u(8304);s>2&&(u(s-3<<5|8208),s=0)}for(;s--;)u(a);s=1,a=t[o]}return{c:n.subarray(0,r),n:e}},Li=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},v1=function(t,e,n){var r=n.length,a=p1(e+2);t[a]=r&255,t[a+1]=r>>8,t[a+2]=t[a]^255,t[a+3]=t[a+1]^255;for(var s=0;s<r;++s)t[a+s+4]=n[s];return(a+4+r)*8},qc=function(t,e,n,r,a,s,u,o,c,h,f){pa(e,f++,n),++a[256];for(var m=Tl(a,15),w=m.t,v=m.l,y=Tl(s,15),k=y.t,L=y.l,x=Tc(w),P=x.c,H=x.n,M=Tc(k),oe=M.c,fe=M.n,pe=new rr(19),re=0;re<P.length;++re)++pe[P[re]&31];for(var re=0;re<oe.length;++re)++pe[oe[re]&31];for(var $=Tl(pe,7),ce=$.t,F=$.l,B=19;B>4&&!ce[Rc[B-1]];--B);var ee=h+5<<3,Z=Li(a,ps)+Li(s,Uo)+u,de=Li(a,w)+Li(s,k)+u+14+3*B+Li(pe,ce)+2*pe[16]+3*pe[17]+7*pe[18];if(c>=0&&ee<=Z&&ee<=de)return v1(e,f,t.subarray(c,c+h));var ge,ke,ve,Se;if(pa(e,f,1+(de<Z)),f+=2,de<Z){ge=Ii(w,v,0),ke=w,ve=Ii(k,L,0),Se=k;var Ee=Ii(ce,F,0);pa(e,f,H-257),pa(e,f+5,fe-1),pa(e,f+10,B-4),f+=14;for(var re=0;re<B;++re)pa(e,f+3*re,ce[Rc[re]]);f+=3*B;for(var Le=[P,oe],I=0;I<2;++I)for(var V=Le[I],re=0;re<V.length;++re){var R=V[re]&31;pa(e,f,Ee[R]),f+=ce[R],R>15&&(pa(e,f,V[re]>>5&127),f+=V[re]>>12)}}else ge=R2,ke=ps,ve=F2,Se=Uo;for(var re=0;re<o;++re){var q=r[re];if(q>255){var R=q>>18&31;Ai(e,f,ge[R+257]),f+=ke[R+257],R>7&&(pa(e,f,q>>23&31),f+=xu[R]);var O=q&31;Ai(e,f,ve[O]),f+=Se[O],O>3&&(Ai(e,f,q>>5&8191),f+=Su[O])}else Ai(e,f,ge[q]),f+=ke[q]}return Ai(e,f,ge[256]),f+ke[256]},q2=new ku([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),g1=new Pr(0),M2=function(t,e,n,r,a,s){var u=s.z||t.length,o=new Pr(r+u+5*(1+Math.ceil(u/7e3))+a),c=o.subarray(r,o.length-a),h=s.l,f=(s.r||0)&7;if(e){f&&(c[0]=s.r>>3);for(var m=q2[e-1],w=m>>13,v=m&8191,y=(1<<n)-1,k=s.p||new rr(32768),L=s.h||new rr(y+1),x=Math.ceil(n/3),P=2*x,H=function(Q){return(t[Q]^t[Q+1]<<x^t[Q+2]<<P)&y},M=new ku(25e3),oe=new rr(288),fe=new rr(32),pe=0,re=0,$=s.i||0,ce=0,F=s.w||0,B=0;$+2<u;++$){var ee=H($),Z=$&32767,de=L[ee];if(k[Z]=de,L[ee]=Z,F<=$){var ge=u-$;if((pe>7e3||ce>24576)&&(ge>423||!h)){f=qc(t,c,0,M,oe,fe,re,ce,B,$-B,f),ce=pe=re=0,B=$;for(var ke=0;ke<286;++ke)oe[ke]=0;for(var ke=0;ke<30;++ke)fe[ke]=0}var ve=2,Se=0,Ee=v,Le=Z-de&32767;if(ge>2&&ee==H($-Le))for(var I=Math.min(w,ge)-1,V=Math.min(32767,$),R=Math.min(258,ge);Le<=V&&--Ee&&Z!=de;){if(t[$+ve]==t[$+ve-Le]){for(var q=0;q<R&&t[$+q]==t[$+q-Le];++q);if(q>ve){if(ve=q,Se=Le,q>I)break;for(var O=Math.min(Le,q-2),S=0,ke=0;ke<O;++ke){var j=$-Le+ke&32767,C=k[j],J=j-C&32767;J>S&&(S=J,de=j)}}}Z=de,de=k[Z],Le+=Z-de&32767}if(Se){M[ce++]=268435456|lu[ve]<<18|Fc[Se];var te=lu[ve]&31,_e=Fc[Se]&31;re+=xu[te]+Su[_e],++oe[257+te],++fe[_e],F=$+ve,++pe}else M[ce++]=t[$],++oe[t[$]]}}for($=Math.max($,F);$<u;++$)M[ce++]=t[$],++oe[t[$]];f=qc(t,c,h,M,oe,fe,re,ce,B,$-B,f),h||(s.r=f&7|c[f/8|0]<<3,f-=7,s.h=L,s.p=k,s.i=$,s.w=F)}else{for(var $=s.w||0;$<u+h;$+=65535){var be=$+65535;be>=u&&(c[f/8|0]=h,be=u),f=v1(c,f+1,t.subarray($,be))}s.i=u}return T2(o,0,r+p1(f)+a)},m1=function(){var t=1,e=0;return{p:function(n){for(var r=t,a=e,s=n.length|0,u=0;u!=s;){for(var o=Math.min(u+2655,s);u<o;++u)a+=r+=n[u];r=(r&65535)+15*(r>>16),a=(a&65535)+15*(a>>16)}t=r,e=a},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},O2=function(t,e,n,r,a){if(!a&&(a={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),u=new Pr(s.length+t.length);u.set(s),u.set(t,s.length),t=u,a.w=s.length}return M2(t,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,a)},b1=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},B2=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var a=m1();a.p(e.dictionary),b1(t,2,a.d())}};function du(t,e){e||(e={});var n=m1();n.p(t);var r=O2(t,e,e.dictionary?6:2,4);return B2(r,e),b1(r,r.length-4,n.d()),r}var j2=typeof TextDecoder<"u"&&new TextDecoder,D2=0;try{j2.decode(g1,{stream:!0}),D2=1}catch{}function $2(t){if(Array.isArray(t))return t}function U2(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,s,u,o=[],c=!0,h=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(f){h=!0,a=f}finally{try{if(!c&&n.return!=null&&(u=n.return(),Object(u)!==u))return}finally{if(h)throw a}}return o}}function Mc(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function z2(t,e){if(t){if(typeof t=="string")return Mc(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mc(t,e):void 0}}function H2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oc(t,e){return $2(t)||U2(t,e)||z2(t,e)||H2()}function Bc(t,e="utf8"){return new TextDecoder(e).decode(t)}const V2=new TextEncoder;function W2(t){return V2.encode(t)}const G2=1024*8,J2=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),ql={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Au{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=G2,n={}){let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const a=n.offset?n.offset>>>0:0,s=e.byteLength-a;let u=a;(ArrayBuffer.isView(e)||e instanceof Au)&&(e.byteLength!==e.buffer.byteLength&&(u=e.byteOffset+a),e=e.buffer),r?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=u,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,u,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const r=(this.offset+e)*2,a=new Uint8Array(r);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,n){const r=ql[n].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,s=this.buffer.slice(a,a+r);if(this.littleEndian===J2&&n!=="uint8"&&n!=="int8"){const o=new Uint8Array(this.buffer.slice(a,a+r));o.reverse();const c=new ql[n](o.buffer);return this.offset+=r,c.reverse(),c}const u=new ql[n](s);return this.offset+=r,u}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let n="";for(let r=0;r<e;r++)n+=this.readChar();return n}readUtf8(e=1){return Bc(this.readBytes(e))}decodeText(e=1,n="utf8"){return Bc(this.readBytes(e),n)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let n=0;n<e.length;n++)this._data.setUint8(this.offset++,e[n]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let n=0;n<e.length;n++)this.writeUint8(e.charCodeAt(n));return this}writeUtf8(e){return this.writeBytes(W2(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Js(t){let e=t.length;for(;--e>=0;)t[e]=0}const K2=3,Y2=258,y1=29,Q2=256,X2=Q2+1+y1,w1=30,Z2=512,e0=new Array((X2+2)*2);Js(e0);const t0=new Array(w1*2);Js(t0);const n0=new Array(Z2);Js(n0);const r0=new Array(Y2-K2+1);Js(r0);const a0=new Array(y1);Js(a0);const s0=new Array(w1);Js(s0);const i0=(t,e,n,r)=>{let a=t&65535|0,s=t>>>16&65535|0,u=0;for(;n!==0;){u=n>2e3?2e3:n,n-=u;do a=a+e[r++]|0,s=s+a|0;while(--u);a%=65521,s%=65521}return a|s<<16|0};var hu=i0;const o0=()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;e[n]=t}return e},l0=new Uint32Array(o0()),u0=(t,e,n,r)=>{const a=l0,s=r+n;t^=-1;for(let u=r;u<s;u++)t=t>>>8^a[(t^e[u])&255];return t^-1};var Ur=u0,fu={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},_1={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const c0=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var d0=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)c0(n,r)&&(t[r]=n[r])}}return t},h0=t=>{let e=0;for(let r=0,a=t.length;r<a;r++)e+=t[r].length;const n=new Uint8Array(e);for(let r=0,a=0,s=t.length;r<s;r++){let u=t[r];n.set(u,a),a+=u.length}return n},k1={assign:d0,flattenChunks:h0};let x1=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{x1=!1}const qi=new Uint8Array(256);for(let t=0;t<256;t++)qi[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;qi[254]=qi[254]=1;var f0=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,n,r,a,s,u=t.length,o=0;for(a=0;a<u;a++)n=t.charCodeAt(a),(n&64512)===55296&&a+1<u&&(r=t.charCodeAt(a+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),a++)),o+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(o),s=0,a=0;s<o;a++)n=t.charCodeAt(a),(n&64512)===55296&&a+1<u&&(r=t.charCodeAt(a+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),a++)),n<128?e[s++]=n:n<2048?(e[s++]=192|n>>>6,e[s++]=128|n&63):n<65536?(e[s++]=224|n>>>12,e[s++]=128|n>>>6&63,e[s++]=128|n&63):(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63,e[s++]=128|n>>>6&63,e[s++]=128|n&63);return e};const p0=(t,e)=>{if(e<65534&&t.subarray&&x1)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n};var v0=(t,e)=>{const n=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let r,a;const s=new Array(n*2);for(a=0,r=0;r<n;){let u=t[r++];if(u<128){s[a++]=u;continue}let o=qi[u];if(o>4){s[a++]=65533,r+=o-1;continue}for(u&=o===2?31:o===3?15:7;o>1&&r<n;)u=u<<6|t[r++]&63,o--;if(o>1){s[a++]=65533;continue}u<65536?s[a++]=u:(u-=65536,s[a++]=55296|u>>10&1023,s[a++]=56320|u&1023)}return p0(s,a)},g0=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let n=e-1;for(;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?e:n+qi[t[n]]>e?n:e},pu={string2buf:f0,buf2string:v0,utf8border:g0};function m0(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var b0=m0;const xo=16209,y0=16191;var w0=function(e,n){let r,a,s,u,o,c,h,f,m,w,v,y,k,L,x,P,H,M,oe,fe,pe,re,$,ce;const F=e.state;r=e.next_in,$=e.input,a=r+(e.avail_in-5),s=e.next_out,ce=e.output,u=s-(n-e.avail_out),o=s+(e.avail_out-257),c=F.dmax,h=F.wsize,f=F.whave,m=F.wnext,w=F.window,v=F.hold,y=F.bits,k=F.lencode,L=F.distcode,x=(1<<F.lenbits)-1,P=(1<<F.distbits)-1;e:do{y<15&&(v+=$[r++]<<y,y+=8,v+=$[r++]<<y,y+=8),H=k[v&x];t:for(;;){if(M=H>>>24,v>>>=M,y-=M,M=H>>>16&255,M===0)ce[s++]=H&65535;else if(M&16){oe=H&65535,M&=15,M&&(y<M&&(v+=$[r++]<<y,y+=8),oe+=v&(1<<M)-1,v>>>=M,y-=M),y<15&&(v+=$[r++]<<y,y+=8,v+=$[r++]<<y,y+=8),H=L[v&P];n:for(;;){if(M=H>>>24,v>>>=M,y-=M,M=H>>>16&255,M&16){if(fe=H&65535,M&=15,y<M&&(v+=$[r++]<<y,y+=8,y<M&&(v+=$[r++]<<y,y+=8)),fe+=v&(1<<M)-1,fe>c){e.msg="invalid distance too far back",F.mode=xo;break e}if(v>>>=M,y-=M,M=s-u,fe>M){if(M=fe-M,M>f&&F.sane){e.msg="invalid distance too far back",F.mode=xo;break e}if(pe=0,re=w,m===0){if(pe+=h-M,M<oe){oe-=M;do ce[s++]=w[pe++];while(--M);pe=s-fe,re=ce}}else if(m<M){if(pe+=h+m-M,M-=m,M<oe){oe-=M;do ce[s++]=w[pe++];while(--M);if(pe=0,m<oe){M=m,oe-=M;do ce[s++]=w[pe++];while(--M);pe=s-fe,re=ce}}}else if(pe+=m-M,M<oe){oe-=M;do ce[s++]=w[pe++];while(--M);pe=s-fe,re=ce}for(;oe>2;)ce[s++]=re[pe++],ce[s++]=re[pe++],ce[s++]=re[pe++],oe-=3;oe&&(ce[s++]=re[pe++],oe>1&&(ce[s++]=re[pe++]))}else{pe=s-fe;do ce[s++]=ce[pe++],ce[s++]=ce[pe++],ce[s++]=ce[pe++],oe-=3;while(oe>2);oe&&(ce[s++]=ce[pe++],oe>1&&(ce[s++]=ce[pe++]))}}else if((M&64)===0){H=L[(H&65535)+(v&(1<<M)-1)];continue n}else{e.msg="invalid distance code",F.mode=xo;break e}break}}else if((M&64)===0){H=k[(H&65535)+(v&(1<<M)-1)];continue t}else if(M&32){F.mode=y0;break e}else{e.msg="invalid literal/length code",F.mode=xo;break e}break}}while(r<a&&s<o);oe=y>>3,r-=oe,y-=oe<<3,v&=(1<<y)-1,e.next_in=r,e.next_out=s,e.avail_in=r<a?5+(a-r):5-(r-a),e.avail_out=s<o?257+(o-s):257-(s-o),F.hold=v,F.bits=y};const Es=15,jc=852,Dc=592,$c=0,Ml=1,Uc=2,_0=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),k0=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),x0=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),S0=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),A0=(t,e,n,r,a,s,u,o)=>{const c=o.bits;let h=0,f=0,m=0,w=0,v=0,y=0,k=0,L=0,x=0,P=0,H,M,oe,fe,pe,re=null,$;const ce=new Uint16Array(Es+1),F=new Uint16Array(Es+1);let B=null,ee,Z,de;for(h=0;h<=Es;h++)ce[h]=0;for(f=0;f<r;f++)ce[e[n+f]]++;for(v=c,w=Es;w>=1&&ce[w]===0;w--);if(v>w&&(v=w),w===0)return a[s++]=1<<24|64<<16|0,a[s++]=1<<24|64<<16|0,o.bits=1,0;for(m=1;m<w&&ce[m]===0;m++);for(v<m&&(v=m),L=1,h=1;h<=Es;h++)if(L<<=1,L-=ce[h],L<0)return-1;if(L>0&&(t===$c||w!==1))return-1;for(F[1]=0,h=1;h<Es;h++)F[h+1]=F[h]+ce[h];for(f=0;f<r;f++)e[n+f]!==0&&(u[F[e[n+f]]++]=f);if(t===$c?(re=B=u,$=20):t===Ml?(re=_0,B=k0,$=257):(re=x0,B=S0,$=0),P=0,f=0,h=m,pe=s,y=v,k=0,oe=-1,x=1<<v,fe=x-1,t===Ml&&x>jc||t===Uc&&x>Dc)return 1;for(;;){ee=h-k,u[f]+1<$?(Z=0,de=u[f]):u[f]>=$?(Z=B[u[f]-$],de=re[u[f]-$]):(Z=96,de=0),H=1<<h-k,M=1<<y,m=M;do M-=H,a[pe+(P>>k)+M]=ee<<24|Z<<16|de|0;while(M!==0);for(H=1<<h-1;P&H;)H>>=1;if(H!==0?(P&=H-1,P+=H):P=0,f++,--ce[h]===0){if(h===w)break;h=e[n+u[f]]}if(h>v&&(P&fe)!==oe){for(k===0&&(k=v),pe+=m,y=h-k,L=1<<y;y+k<w&&(L-=ce[y+k],!(L<=0));)y++,L<<=1;if(x+=1<<y,t===Ml&&x>jc||t===Uc&&x>Dc)return 1;oe=P&fe,a[oe]=v<<24|y<<16|pe-s|0}}return P!==0&&(a[pe+P]=h-k<<24|64<<16|0),o.bits=v,0};var Ei=A0;const L0=0,S1=1,A1=2,{Z_FINISH:zc,Z_BLOCK:N0,Z_TREES:So,Z_OK:vs,Z_STREAM_END:C0,Z_NEED_DICT:P0,Z_STREAM_ERROR:mr,Z_DATA_ERROR:L1,Z_MEM_ERROR:N1,Z_BUF_ERROR:I0,Z_DEFLATED:Hc}=_1,Ko=16180,Vc=16181,Wc=16182,Gc=16183,Jc=16184,Kc=16185,Yc=16186,Qc=16187,Xc=16188,Zc=16189,zo=16190,va=16191,Ol=16192,ed=16193,Bl=16194,td=16195,nd=16196,rd=16197,ad=16198,Ao=16199,Lo=16200,sd=16201,id=16202,od=16203,ld=16204,ud=16205,jl=16206,cd=16207,dd=16208,Xt=16209,C1=16210,P1=16211,E0=852,R0=592,F0=15,T0=F0,hd=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function q0(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const gs=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<Ko||e.mode>P1?1:0},I1=t=>{if(gs(t))return mr;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=Ko,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(E0),e.distcode=e.distdyn=new Int32Array(R0),e.sane=1,e.back=-1,vs},E1=t=>{if(gs(t))return mr;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,I1(t)},R1=(t,e)=>{let n;if(gs(t))return mr;const r=t.state;return e<0?(n=0,e=-e):(n=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?mr:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,E1(t))},F1=(t,e)=>{if(!t)return mr;const n=new q0;t.state=n,n.strm=t,n.window=null,n.mode=Ko;const r=R1(t,e);return r!==vs&&(t.state=null),r},M0=t=>F1(t,T0);let fd=!0,Dl,$l;const O0=t=>{if(fd){Dl=new Int32Array(512),$l=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Ei(S1,t.lens,0,288,Dl,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Ei(A1,t.lens,0,32,$l,0,t.work,{bits:5}),fd=!1}t.lencode=Dl,t.lenbits=9,t.distcode=$l,t.distbits=5},T1=(t,e,n,r)=>{let a;const s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(e.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(a=s.wsize-s.wnext,a>r&&(a=r),s.window.set(e.subarray(n-r,n-r+a),s.wnext),r-=a,r?(s.window.set(e.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0},B0=(t,e)=>{let n,r,a,s,u,o,c,h,f,m,w,v,y,k,L=0,x,P,H,M,oe,fe,pe,re;const $=new Uint8Array(4);let ce,F;const B=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(gs(t)||!t.output||!t.input&&t.avail_in!==0)return mr;n=t.state,n.mode===va&&(n.mode=Ol),u=t.next_out,a=t.output,c=t.avail_out,s=t.next_in,r=t.input,o=t.avail_in,h=n.hold,f=n.bits,m=o,w=c,re=vs;e:for(;;)switch(n.mode){case Ko:if(n.wrap===0){n.mode=Ol;break}for(;f<16;){if(o===0)break e;o--,h+=r[s++]<<f,f+=8}if(n.wrap&2&&h===35615){n.wbits===0&&(n.wbits=15),n.check=0,$[0]=h&255,$[1]=h>>>8&255,n.check=Ur(n.check,$,2,0),h=0,f=0,n.mode=Vc;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((h&255)<<8)+(h>>8))%31){t.msg="incorrect header check",n.mode=Xt;break}if((h&15)!==Hc){t.msg="unknown compression method",n.mode=Xt;break}if(h>>>=4,f-=4,pe=(h&15)+8,n.wbits===0&&(n.wbits=pe),pe>15||pe>n.wbits){t.msg="invalid window size",n.mode=Xt;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=h&512?Zc:va,h=0,f=0;break;case Vc:for(;f<16;){if(o===0)break e;o--,h+=r[s++]<<f,f+=8}if(n.flags=h,(n.flags&255)!==Hc){t.msg="unknown compression method",n.mode=Xt;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=Xt;break}n.head&&(n.head.text=h>>8&1),n.flags&512&&n.wrap&4&&($[0]=h&255,$[1]=h>>>8&255,n.check=Ur(n.check,$,2,0)),h=0,f=0,n.mode=Wc;case Wc:for(;f<32;){if(o===0)break e;o--,h+=r[s++]<<f,f+=8}n.head&&(n.head.time=h),n.flags&512&&n.wrap&4&&($[0]=h&255,$[1]=h>>>8&255,$[2]=h>>>16&255,$[3]=h>>>24&255,n.check=Ur(n.check,$,4,0)),h=0,f=0,n.mode=Gc;case Gc:for(;f<16;){if(o===0)break e;o--,h+=r[s++]<<f,f+=8}n.head&&(n.head.xflags=h&255,n.head.os=h>>8),n.flags&512&&n.wrap&4&&($[0]=h&255,$[1]=h>>>8&255,n.check=Ur(n.check,$,2,0)),h=0,f=0,n.mode=Jc;case Jc:if(n.flags&1024){for(;f<16;){if(o===0)break e;o--,h+=r[s++]<<f,f+=8}n.length=h,n.head&&(n.head.extra_len=h),n.flags&512&&n.wrap&4&&($[0]=h&255,$[1]=h>>>8&255,n.check=Ur(n.check,$,2,0)),h=0,f=0}else n.head&&(n.head.extra=null);n.mode=Kc;case Kc:if(n.flags&1024&&(v=n.length,v>o&&(v=o),v&&(n.head&&(pe=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(s,s+v),pe)),n.flags&512&&n.wrap&4&&(n.check=Ur(n.check,r,v,s)),o-=v,s+=v,n.length-=v),n.length))break e;n.length=0,n.mode=Yc;case Yc:if(n.flags&2048){if(o===0)break e;v=0;do pe=r[s+v++],n.head&&pe&&n.length<65536&&(n.head.name+=String.fromCharCode(pe));while(pe&&v<o);if(n.flags&512&&n.wrap&4&&(n.check=Ur(n.check,r,v,s)),o-=v,s+=v,pe)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=Qc;case Qc:if(n.flags&4096){if(o===0)break e;v=0;do pe=r[s+v++],n.head&&pe&&n.length<65536&&(n.head.comment+=String.fromCharCode(pe));while(pe&&v<o);if(n.flags&512&&n.wrap&4&&(n.check=Ur(n.check,r,v,s)),o-=v,s+=v,pe)break e}else n.head&&(n.head.comment=null);n.mode=Xc;case Xc:if(n.flags&512){for(;f<16;){if(o===0)break e;o--,h+=r[s++]<<f,f+=8}if(n.wrap&4&&h!==(n.check&65535)){t.msg="header crc mismatch",n.mode=Xt;break}h=0,f=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=va;break;case Zc:for(;f<32;){if(o===0)break e;o--,h+=r[s++]<<f,f+=8}t.adler=n.check=hd(h),h=0,f=0,n.mode=zo;case zo:if(n.havedict===0)return t.next_out=u,t.avail_out=c,t.next_in=s,t.avail_in=o,n.hold=h,n.bits=f,P0;t.adler=n.check=1,n.mode=va;case va:if(e===N0||e===So)break e;case Ol:if(n.last){h>>>=f&7,f-=f&7,n.mode=jl;break}for(;f<3;){if(o===0)break e;o--,h+=r[s++]<<f,f+=8}switch(n.last=h&1,h>>>=1,f-=1,h&3){case 0:n.mode=ed;break;case 1:if(O0(n),n.mode=Ao,e===So){h>>>=2,f-=2;break e}break;case 2:n.mode=nd;break;case 3:t.msg="invalid block type",n.mode=Xt}h>>>=2,f-=2;break;case ed:for(h>>>=f&7,f-=f&7;f<32;){if(o===0)break e;o--,h+=r[s++]<<f,f+=8}if((h&65535)!==(h>>>16^65535)){t.msg="invalid stored block lengths",n.mode=Xt;break}if(n.length=h&65535,h=0,f=0,n.mode=Bl,e===So)break e;case Bl:n.mode=td;case td:if(v=n.length,v){if(v>o&&(v=o),v>c&&(v=c),v===0)break e;a.set(r.subarray(s,s+v),u),o-=v,s+=v,c-=v,u+=v,n.length-=v;break}n.mode=va;break;case nd:for(;f<14;){if(o===0)break e;o--,h+=r[s++]<<f,f+=8}if(n.nlen=(h&31)+257,h>>>=5,f-=5,n.ndist=(h&31)+1,h>>>=5,f-=5,n.ncode=(h&15)+4,h>>>=4,f-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=Xt;break}n.have=0,n.mode=rd;case rd:for(;n.have<n.ncode;){for(;f<3;){if(o===0)break e;o--,h+=r[s++]<<f,f+=8}n.lens[B[n.have++]]=h&7,h>>>=3,f-=3}for(;n.have<19;)n.lens[B[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,ce={bits:n.lenbits},re=Ei(L0,n.lens,0,19,n.lencode,0,n.work,ce),n.lenbits=ce.bits,re){t.msg="invalid code lengths set",n.mode=Xt;break}n.have=0,n.mode=ad;case ad:for(;n.have<n.nlen+n.ndist;){for(;L=n.lencode[h&(1<<n.lenbits)-1],x=L>>>24,P=L>>>16&255,H=L&65535,!(x<=f);){if(o===0)break e;o--,h+=r[s++]<<f,f+=8}if(H<16)h>>>=x,f-=x,n.lens[n.have++]=H;else{if(H===16){for(F=x+2;f<F;){if(o===0)break e;o--,h+=r[s++]<<f,f+=8}if(h>>>=x,f-=x,n.have===0){t.msg="invalid bit length repeat",n.mode=Xt;break}pe=n.lens[n.have-1],v=3+(h&3),h>>>=2,f-=2}else if(H===17){for(F=x+3;f<F;){if(o===0)break e;o--,h+=r[s++]<<f,f+=8}h>>>=x,f-=x,pe=0,v=3+(h&7),h>>>=3,f-=3}else{for(F=x+7;f<F;){if(o===0)break e;o--,h+=r[s++]<<f,f+=8}h>>>=x,f-=x,pe=0,v=11+(h&127),h>>>=7,f-=7}if(n.have+v>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=Xt;break}for(;v--;)n.lens[n.have++]=pe}}if(n.mode===Xt)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=Xt;break}if(n.lenbits=9,ce={bits:n.lenbits},re=Ei(S1,n.lens,0,n.nlen,n.lencode,0,n.work,ce),n.lenbits=ce.bits,re){t.msg="invalid literal/lengths set",n.mode=Xt;break}if(n.distbits=6,n.distcode=n.distdyn,ce={bits:n.distbits},re=Ei(A1,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,ce),n.distbits=ce.bits,re){t.msg="invalid distances set",n.mode=Xt;break}if(n.mode=Ao,e===So)break e;case Ao:n.mode=Lo;case Lo:if(o>=6&&c>=258){t.next_out=u,t.avail_out=c,t.next_in=s,t.avail_in=o,n.hold=h,n.bits=f,w0(t,w),u=t.next_out,a=t.output,c=t.avail_out,s=t.next_in,r=t.input,o=t.avail_in,h=n.hold,f=n.bits,n.mode===va&&(n.back=-1);break}for(n.back=0;L=n.lencode[h&(1<<n.lenbits)-1],x=L>>>24,P=L>>>16&255,H=L&65535,!(x<=f);){if(o===0)break e;o--,h+=r[s++]<<f,f+=8}if(P&&(P&240)===0){for(M=x,oe=P,fe=H;L=n.lencode[fe+((h&(1<<M+oe)-1)>>M)],x=L>>>24,P=L>>>16&255,H=L&65535,!(M+x<=f);){if(o===0)break e;o--,h+=r[s++]<<f,f+=8}h>>>=M,f-=M,n.back+=M}if(h>>>=x,f-=x,n.back+=x,n.length=H,P===0){n.mode=ud;break}if(P&32){n.back=-1,n.mode=va;break}if(P&64){t.msg="invalid literal/length code",n.mode=Xt;break}n.extra=P&15,n.mode=sd;case sd:if(n.extra){for(F=n.extra;f<F;){if(o===0)break e;o--,h+=r[s++]<<f,f+=8}n.length+=h&(1<<n.extra)-1,h>>>=n.extra,f-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=id;case id:for(;L=n.distcode[h&(1<<n.distbits)-1],x=L>>>24,P=L>>>16&255,H=L&65535,!(x<=f);){if(o===0)break e;o--,h+=r[s++]<<f,f+=8}if((P&240)===0){for(M=x,oe=P,fe=H;L=n.distcode[fe+((h&(1<<M+oe)-1)>>M)],x=L>>>24,P=L>>>16&255,H=L&65535,!(M+x<=f);){if(o===0)break e;o--,h+=r[s++]<<f,f+=8}h>>>=M,f-=M,n.back+=M}if(h>>>=x,f-=x,n.back+=x,P&64){t.msg="invalid distance code",n.mode=Xt;break}n.offset=H,n.extra=P&15,n.mode=od;case od:if(n.extra){for(F=n.extra;f<F;){if(o===0)break e;o--,h+=r[s++]<<f,f+=8}n.offset+=h&(1<<n.extra)-1,h>>>=n.extra,f-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=Xt;break}n.mode=ld;case ld:if(c===0)break e;if(v=w-c,n.offset>v){if(v=n.offset-v,v>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=Xt;break}v>n.wnext?(v-=n.wnext,y=n.wsize-v):y=n.wnext-v,v>n.length&&(v=n.length),k=n.window}else k=a,y=u-n.offset,v=n.length;v>c&&(v=c),c-=v,n.length-=v;do a[u++]=k[y++];while(--v);n.length===0&&(n.mode=Lo);break;case ud:if(c===0)break e;a[u++]=n.length,c--,n.mode=Lo;break;case jl:if(n.wrap){for(;f<32;){if(o===0)break e;o--,h|=r[s++]<<f,f+=8}if(w-=c,t.total_out+=w,n.total+=w,n.wrap&4&&w&&(t.adler=n.check=n.flags?Ur(n.check,a,w,u-w):hu(n.check,a,w,u-w)),w=c,n.wrap&4&&(n.flags?h:hd(h))!==n.check){t.msg="incorrect data check",n.mode=Xt;break}h=0,f=0}n.mode=cd;case cd:if(n.wrap&&n.flags){for(;f<32;){if(o===0)break e;o--,h+=r[s++]<<f,f+=8}if(n.wrap&4&&h!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=Xt;break}h=0,f=0}n.mode=dd;case dd:re=C0;break e;case Xt:re=L1;break e;case C1:return N1;case P1:default:return mr}return t.next_out=u,t.avail_out=c,t.next_in=s,t.avail_in=o,n.hold=h,n.bits=f,(n.wsize||w!==t.avail_out&&n.mode<Xt&&(n.mode<jl||e!==zc))&&T1(t,t.output,t.next_out,w-t.avail_out),m-=t.avail_in,w-=t.avail_out,t.total_in+=m,t.total_out+=w,n.total+=w,n.wrap&4&&w&&(t.adler=n.check=n.flags?Ur(n.check,a,w,t.next_out-w):hu(n.check,a,w,t.next_out-w)),t.data_type=n.bits+(n.last?64:0)+(n.mode===va?128:0)+(n.mode===Ao||n.mode===Bl?256:0),(m===0&&w===0||e===zc)&&re===vs&&(re=I0),re},j0=t=>{if(gs(t))return mr;let e=t.state;return e.window&&(e.window=null),t.state=null,vs},D0=(t,e)=>{if(gs(t))return mr;const n=t.state;return(n.wrap&2)===0?mr:(n.head=e,e.done=!1,vs)},$0=(t,e)=>{const n=e.length;let r,a,s;return gs(t)||(r=t.state,r.wrap!==0&&r.mode!==zo)?mr:r.mode===zo&&(a=1,a=hu(a,e,n,0),a!==r.check)?L1:(s=T1(t,e,n,n),s?(r.mode=C1,N1):(r.havedict=1,vs))};var U0=E1,z0=R1,H0=I1,V0=M0,W0=F1,G0=B0,J0=j0,K0=D0,Y0=$0,Q0="pako inflate (from Nodeca project)",ga={inflateReset:U0,inflateReset2:z0,inflateResetKeep:H0,inflateInit:V0,inflateInit2:W0,inflate:G0,inflateEnd:J0,inflateGetHeader:K0,inflateSetDictionary:Y0,inflateInfo:Q0};function X0(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Z0=X0;const q1=Object.prototype.toString,{Z_NO_FLUSH:e5,Z_FINISH:t5,Z_OK:Mi,Z_STREAM_END:Ul,Z_NEED_DICT:zl,Z_STREAM_ERROR:n5,Z_DATA_ERROR:pd,Z_MEM_ERROR:r5}=_1;function Oi(t){this.options=k1.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new b0,this.strm.avail_out=0;let n=ga.inflateInit2(this.strm,e.windowBits);if(n!==Mi)throw new Error(fu[n]);if(this.header=new Z0,ga.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=pu.string2buf(e.dictionary):q1.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=ga.inflateSetDictionary(this.strm,e.dictionary),n!==Mi)))throw new Error(fu[n])}Oi.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize,a=this.options.dictionary;let s,u,o;if(this.ended)return!1;for(e===~~e?u=e:u=e===!0?t5:e5,q1.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),s=ga.inflate(n,u),s===zl&&a&&(s=ga.inflateSetDictionary(n,a),s===Mi?s=ga.inflate(n,u):s===pd&&(s=zl));n.avail_in>0&&s===Ul&&n.state.wrap>0&&t[n.next_in]!==0;)ga.inflateReset(n),s=ga.inflate(n,u);switch(s){case n5:case pd:case zl:case r5:return this.onEnd(s),this.ended=!0,!1}if(o=n.avail_out,n.next_out&&(n.avail_out===0||s===Ul))if(this.options.to==="string"){let c=pu.utf8border(n.output,n.next_out),h=n.next_out-c,f=pu.buf2string(n.output,c);n.next_out=h,n.avail_out=r-h,h&&n.output.set(n.output.subarray(c,c+h),0),this.onData(f)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(s===Mi&&o===0)){if(s===Ul)return s=ga.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};Oi.prototype.onData=function(t){this.chunks.push(t)};Oi.prototype.onEnd=function(t){t===Mi&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=k1.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function a5(t,e){const n=new Oi(e);if(n.push(t),n.err)throw n.msg||fu[n.err];return n.result}var s5=Oi,i5=a5,o5={Inflate:s5,inflate:i5};const{Inflate:l5,inflate:u5}=o5;var vd=l5,c5=u5;const M1=[];for(let t=0;t<256;t++){let e=t;for(let n=0;n<8;n++)e&1?e=3988292384^e>>>1:e=e>>>1;M1[t]=e}const gd=4294967295;function d5(t,e,n){let r=t;for(let a=0;a<n;a++)r=M1[(r^e[a])&255]^r>>>8;return r}function h5(t,e){return(d5(gd,t,e)^gd)>>>0}function md(t,e,n){const r=t.readUint32(),a=h5(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(a!==r)throw new Error(`CRC mismatch for chunk ${n}. Expected ${r}, found ${a}`)}function O1(t,e,n){for(let r=0;r<n;r++)e[r]=t[r]}function B1(t,e,n,r){let a=0;for(;a<r;a++)e[a]=t[a];for(;a<n;a++)e[a]=t[a]+e[a-r]&255}function j1(t,e,n,r){let a=0;if(n.length===0)for(;a<r;a++)e[a]=t[a];else for(;a<r;a++)e[a]=t[a]+n[a]&255}function D1(t,e,n,r,a){let s=0;if(n.length===0){for(;s<a;s++)e[s]=t[s];for(;s<r;s++)e[s]=t[s]+(e[s-a]>>1)&255}else{for(;s<a;s++)e[s]=t[s]+(n[s]>>1)&255;for(;s<r;s++)e[s]=t[s]+(e[s-a]+n[s]>>1)&255}}function $1(t,e,n,r,a){let s=0;if(n.length===0){for(;s<a;s++)e[s]=t[s];for(;s<r;s++)e[s]=t[s]+e[s-a]&255}else{for(;s<a;s++)e[s]=t[s]+n[s]&255;for(;s<r;s++)e[s]=t[s]+f5(e[s-a],n[s],n[s-a])&255}}function f5(t,e,n){const r=t+e-n,a=Math.abs(r-t),s=Math.abs(r-e),u=Math.abs(r-n);return a<=s&&a<=u?t:s<=u?e:n}function p5(t,e,n,r,a,s){switch(t){case 0:O1(e,n,a);break;case 1:B1(e,n,a,s);break;case 2:j1(e,n,r,a);break;case 3:D1(e,n,r,a,s);break;case 4:$1(e,n,r,a,s);break;default:throw new Error(`Unsupported filter: ${t}`)}}const v5=new Uint16Array([255]),g5=new Uint8Array(v5.buffer),m5=g5[0]===255;function b5(t){const{data:e,width:n,height:r,channels:a,depth:s}=t,u=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(s/8)*a,c=new Uint8Array(r*n*o);let h=0;for(let f=0;f<7;f++){const m=u[f],w=Math.ceil((n-m.x)/m.xStep),v=Math.ceil((r-m.y)/m.yStep);if(w<=0||v<=0)continue;const y=w*o,k=new Uint8Array(y);for(let L=0;L<v;L++){const x=e[h++],P=e.subarray(h,h+y);h+=y;const H=new Uint8Array(y);p5(x,P,H,k,y,o),k.set(H);for(let M=0;M<w;M++){const oe=m.x+M*m.xStep,fe=m.y+L*m.yStep;if(!(oe>=n||fe>=r))for(let pe=0;pe<o;pe++)c[(fe*n+oe)*o+pe]=H[M*o+pe]}}}if(s===16){const f=new Uint16Array(c.buffer);if(m5)for(let m=0;m<f.length;m++)f[m]=y5(f[m]);return f}else return c}function y5(t){return(t&255)<<8|t>>8&255}const w5=new Uint16Array([255]),_5=new Uint8Array(w5.buffer),k5=_5[0]===255,x5=new Uint8Array(0);function bd(t){const{data:e,width:n,height:r,channels:a,depth:s}=t,u=Math.ceil(s/8)*a,o=Math.ceil(s/8*a*n),c=new Uint8Array(r*o);let h=x5,f=0,m,w;for(let v=0;v<r;v++){switch(m=e.subarray(f+1,f+1+o),w=c.subarray(v*o,(v+1)*o),e[f]){case 0:O1(m,w,o);break;case 1:B1(m,w,o,u);break;case 2:j1(m,w,h,o);break;case 3:D1(m,w,h,o,u);break;case 4:$1(m,w,h,o,u);break;default:throw new Error(`Unsupported filter: ${e[f]}`)}h=w,f+=o+1}if(s===16){const v=new Uint16Array(c.buffer);if(k5)for(let y=0;y<v.length;y++)v[y]=S5(v[y]);return v}else return c}function S5(t){return(t&255)<<8|t>>8&255}const To=Uint8Array.of(137,80,78,71,13,10,26,10);function yd(t){if(!A5(t.readBytes(To.length)))throw new Error("wrong PNG signature")}function A5(t){if(t.length<To.length)return!1;for(let e=0;e<To.length;e++)if(t[e]!==To[e])return!1;return!0}const L5="tEXt",N5=0,U1=new TextDecoder("latin1");function C5(t){if(I5(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const P5=/^[\u0000-\u00FF]*$/;function I5(t){if(!P5.test(t))throw new Error("invalid latin1 text")}function E5(t,e,n){const r=z1(e);t[r]=R5(e,n-r.length-1)}function z1(t){for(t.mark();t.readByte()!==N5;);const e=t.offset;t.reset();const n=U1.decode(t.readBytes(e-t.offset-1));return t.skip(1),C5(n),n}function R5(t,e){return U1.decode(t.readBytes(e))}const tr={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Hl={UNKNOWN:-1,DEFLATE:0},wd={UNKNOWN:-1,ADAPTIVE:0},Vl={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},No={NONE:0,BACKGROUND:1,PREVIOUS:2},Wl={SOURCE:0,OVER:1};class F5 extends Au{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,n={}){super(e);const{checkCrc:r=!1}=n;this._checkCrc=r,this._inflator=new vd,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Hl.UNKNOWN,this._filterMethod=wd.UNKNOWN,this._interlaceMethod=Vl.UNKNOWN,this._colorType=tr.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(yd(this);!this._end;){const e=this.readUint32(),n=this.readChars(4);this.decodeChunk(e,n)}return this.decodeImage(),this._png}decodeApng(){for(yd(this);!this._end;){const e=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(e,n)}return this.decodeApngImage(),this._apng}decodeChunk(e,n){const r=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case L5:E5(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?md(this,e+4,n):this.skip(4)}decodeApngChunk(e,n){const r=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,n),this.offset=r+e;break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?md(this,e+4,n):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=T5(this.readUint8());const n=this.readUint8();this._colorType=n;let r;switch(n){case tr.GREYSCALE:r=1;break;case tr.TRUECOLOUR:r=3;break;case tr.INDEXED_COLOUR:r=1;break;case tr.GREYSCALE_ALPHA:r=2;break;case tr.TRUECOLOUR_ALPHA:r=4;break;case tr.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==Hl.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const n=e/3;this._hasPalette=!0;const r=[];this._palette=r;for(let a=0;a<n;a++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const n=e,r=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,r,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let n=e,r=this.offset+this.byteOffset;if(r+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,r,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case tr.GREYSCALE:case tr.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let n=0;n<e/2;n++)this._transparency[n]=this.readUint16();break}case tr.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let n=0;for(;n<e;n++){const r=this.readByte();this._palette[n].push(r)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case tr.UNKNOWN:case tr.GREYSCALE_ALPHA:case tr.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const n=z1(this),r=this.readUint8();if(r!==Hl.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${r}`);const a=this.readBytes(e-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:c5(a)}}decodepHYs(){const e=this.readUint32(),n=this.readUint32(),r=this.readByte();this._png.resolution={x:e,y:n,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const n={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(e);if(r){if(r.data=bd({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||r.xOffset===0&&r.yOffset===0&&r.width===this._png.width&&r.height===this._png.height)n.data=r.data;else{const a=this._apng.frames.at(e-1);this.disposeFrame(r,a,n),this.addFrameDataToCanvas(n,r)}this._apng.frames.push(n)}}return this._apng}disposeFrame(e,n,r){switch(e.disposeOp){case No.NONE:break;case No.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let s=0;s<this._png.width;s++){const u=(a*e.width+s)*this._png.channels;for(let o=0;o<this._png.channels;o++)r.data[u+o]=0}break;case No.PREVIOUS:r.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,n){const r=1<<this._png.depth,a=(s,u)=>{const o=((s+n.yOffset)*this._png.width+n.xOffset+u)*this._png.channels,c=(s*n.width+u)*this._png.channels;return{index:o,frameIndex:c}};switch(n.blendOp){case Wl.SOURCE:for(let s=0;s<n.height;s++)for(let u=0;u<n.width;u++){const{index:o,frameIndex:c}=a(s,u);for(let h=0;h<this._png.channels;h++)e.data[o+h]=n.data[c+h]}break;case Wl.OVER:for(let s=0;s<n.height;s++)for(let u=0;u<n.width;u++){const{index:o,frameIndex:c}=a(s,u);for(let h=0;h<this._png.channels;h++){const f=n.data[c+this._png.channels-1]/r,m=h%(this._png.channels-1)===0?1:n.data[c+h],w=Math.floor(f*m+(1-f)*e.data[o+h]);e.data[o+h]+=w}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==wd.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Vl.NO_INTERLACE)this._png.data=bd({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Vl.ADAM7)this._png.data=b5({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,n=this._frames.at(-1);n?n.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:No.NONE,blendOp:Wl.SOURCE,data:e}),this._inflator=new vd,this._writingDataChunks=!1}}function T5(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var _d;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(_d||(_d={}));function q5(t,e){return new F5(t,e).decode()}var ot=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Gl(){ot.console&&typeof ot.console.log=="function"&&ot.console.log.apply(ot.console,arguments)}var $t={log:Gl,warn:function(t){ot.console&&(typeof ot.console.warn=="function"?ot.console.warn.apply(ot.console,arguments):Gl.call(null,arguments))},error:function(t){ot.console&&(typeof ot.console.error=="function"?ot.console.error.apply(ot.console,arguments):Gl(t))}};function Jl(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){ls(r.response,e,n)},r.onerror=function(){$t.error("could not download file")},r.send()}function kd(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Co(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var ls=ot.saveAs||((typeof window>"u"?"undefined":Bt(window))!=="object"||window!==ot?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=ot.URL||ot.webkitURL,a=document.createElement("a");e=e||t.name||"download",a.download=e,a.rel="noopener",typeof t=="string"?(a.href=t,a.origin!==location.origin?kd(a.href)?Jl(t,e,n):Co(a,a.target="_blank"):Co(a)):(a.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(a.href)},4e4),setTimeout(function(){Co(a)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(kd(t))Jl(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){Co(r)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:Bt(s)!=="object"&&($t.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return Jl(t,e,n);var a=t.type==="application/octet-stream",s=/constructor/i.test(ot.HTMLElement)||ot.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||a&&s)&&(typeof FileReader>"u"?"undefined":Bt(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var f=o.result;f=u?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=f:location=f,r=null},o.readAsDataURL(t)}else{var c=ot.URL||ot.webkitURL,h=c.createObjectURL(t);r?r.location=h:location.href=h,r=null,setTimeout(function(){c.revokeObjectURL(h)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function H1(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],r=0;r<n.length;r++){var a=n[r].re,s=n[r].process,u=a.exec(t);u&&(e=s(u),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),c=this.g.toString(16),h=this.b.toString(16);return o.length==1&&(o="0"+o),c.length==1&&(c="0"+c),h.length==1&&(h="0"+h),"#"+o+c+h}}var qo=ot.atob.bind(ot),xd=ot.btoa.bind(ot);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Kl(t,e){var n=t[0],r=t[1],a=t[2],s=t[3];n=qn(n,r,a,s,e[0],7,-680876936),s=qn(s,n,r,a,e[1],12,-389564586),a=qn(a,s,n,r,e[2],17,606105819),r=qn(r,a,s,n,e[3],22,-1044525330),n=qn(n,r,a,s,e[4],7,-176418897),s=qn(s,n,r,a,e[5],12,1200080426),a=qn(a,s,n,r,e[6],17,-1473231341),r=qn(r,a,s,n,e[7],22,-45705983),n=qn(n,r,a,s,e[8],7,1770035416),s=qn(s,n,r,a,e[9],12,-1958414417),a=qn(a,s,n,r,e[10],17,-42063),r=qn(r,a,s,n,e[11],22,-1990404162),n=qn(n,r,a,s,e[12],7,1804603682),s=qn(s,n,r,a,e[13],12,-40341101),a=qn(a,s,n,r,e[14],17,-1502002290),n=Mn(n,r=qn(r,a,s,n,e[15],22,1236535329),a,s,e[1],5,-165796510),s=Mn(s,n,r,a,e[6],9,-1069501632),a=Mn(a,s,n,r,e[11],14,643717713),r=Mn(r,a,s,n,e[0],20,-373897302),n=Mn(n,r,a,s,e[5],5,-701558691),s=Mn(s,n,r,a,e[10],9,38016083),a=Mn(a,s,n,r,e[15],14,-660478335),r=Mn(r,a,s,n,e[4],20,-405537848),n=Mn(n,r,a,s,e[9],5,568446438),s=Mn(s,n,r,a,e[14],9,-1019803690),a=Mn(a,s,n,r,e[3],14,-187363961),r=Mn(r,a,s,n,e[8],20,1163531501),n=Mn(n,r,a,s,e[13],5,-1444681467),s=Mn(s,n,r,a,e[2],9,-51403784),a=Mn(a,s,n,r,e[7],14,1735328473),n=On(n,r=Mn(r,a,s,n,e[12],20,-1926607734),a,s,e[5],4,-378558),s=On(s,n,r,a,e[8],11,-2022574463),a=On(a,s,n,r,e[11],16,1839030562),r=On(r,a,s,n,e[14],23,-35309556),n=On(n,r,a,s,e[1],4,-1530992060),s=On(s,n,r,a,e[4],11,1272893353),a=On(a,s,n,r,e[7],16,-155497632),r=On(r,a,s,n,e[10],23,-1094730640),n=On(n,r,a,s,e[13],4,681279174),s=On(s,n,r,a,e[0],11,-358537222),a=On(a,s,n,r,e[3],16,-722521979),r=On(r,a,s,n,e[6],23,76029189),n=On(n,r,a,s,e[9],4,-640364487),s=On(s,n,r,a,e[12],11,-421815835),a=On(a,s,n,r,e[15],16,530742520),n=Bn(n,r=On(r,a,s,n,e[2],23,-995338651),a,s,e[0],6,-198630844),s=Bn(s,n,r,a,e[7],10,1126891415),a=Bn(a,s,n,r,e[14],15,-1416354905),r=Bn(r,a,s,n,e[5],21,-57434055),n=Bn(n,r,a,s,e[12],6,1700485571),s=Bn(s,n,r,a,e[3],10,-1894986606),a=Bn(a,s,n,r,e[10],15,-1051523),r=Bn(r,a,s,n,e[1],21,-2054922799),n=Bn(n,r,a,s,e[8],6,1873313359),s=Bn(s,n,r,a,e[15],10,-30611744),a=Bn(a,s,n,r,e[6],15,-1560198380),r=Bn(r,a,s,n,e[13],21,1309151649),n=Bn(n,r,a,s,e[4],6,-145523070),s=Bn(s,n,r,a,e[11],10,-1120210379),a=Bn(a,s,n,r,e[2],15,718787259),r=Bn(r,a,s,n,e[9],21,-343485551),t[0]=$a(n,t[0]),t[1]=$a(r,t[1]),t[2]=$a(a,t[2]),t[3]=$a(s,t[3])}function Yo(t,e,n,r,a,s){return e=$a($a(e,t),$a(r,s)),$a(e<<a|e>>>32-a,n)}function qn(t,e,n,r,a,s,u){return Yo(e&n|~e&r,t,e,a,s,u)}function Mn(t,e,n,r,a,s,u){return Yo(e&r|n&~r,t,e,a,s,u)}function On(t,e,n,r,a,s,u){return Yo(e^n^r,t,e,a,s,u)}function Bn(t,e,n,r,a,s,u){return Yo(n^(e|~r),t,e,a,s,u)}function V1(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)Kl(r,M5(t.substring(e-64,e)));t=t.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)a[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(Kl(r,a),e=0;e<16;e++)a[e]=0;return a[14]=8*n,Kl(r,a),r}function M5(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}var Sd="0123456789abcdef".split("");function O5(t){for(var e="",n=0;n<4;n++)e+=Sd[t>>8*n+4&15]+Sd[t>>8*n&15];return e}function B5(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function vu(t){return V1(t).map(B5).join("")}var j5=function(t){for(var e=0;e<t.length;e++)t[e]=O5(t[e]);return t.join("")}(V1("hello"))!="5d41402abc4b2a76b9719d911017c592";function $a(t,e){if(j5){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function gu(t,e){var n,r,a,s;if(t!==n){for(var u=(a=t,s=1+(256/t.length|0),new Array(s+1).join(a)),o=[],c=0;c<256;c++)o[c]=c;var h=0;for(c=0;c<256;c++){var f=o[c];h=(h+f+u.charCodeAt(c))%256,o[c]=o[h],o[h]=f}n=t,r=o}else o=r;var m=e.length,w=0,v=0,y="";for(c=0;c<m;c++)v=(v+(f=o[w=(w+1)%256]))%256,o[w]=o[v],o[v]=f,u=o[(o[w]+o[v])%256],y+=String.fromCharCode(e.charCodeAt(c)^u);return y}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Ad={print:4,modify:8,copy:16,"annot-forms":32};function Os(t,e,n,r){this.v=1,this.r=2;var a=192;t.forEach(function(o){if(Ad.perm!==void 0)throw new Error("Invalid permission: "+o);a+=Ad[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(e+this.padding).substr(0,32),u=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,u),this.P=-(1+(255^a)),this.encryptionKey=vu(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=gu(this.encryptionKey,this.padding)}function Bs(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var a=t.charCodeAt(r);e+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):t[r]}return e}function Ld(t){if(Bt(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,a){if(a=a||!1,typeof n!="string"||typeof r!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!a],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),a=[];for(var s in e[n]){var u=e[n][s];try{u[0].apply(t,r)}catch(o){ot.console&&$t.error("jsPDF PubSub Error",o.message,o)}u[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Ho(t){if(!(this instanceof Ho))return new Ho(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function W1(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function us(t,e,n,r,a){if(!(this instanceof us))return new us(t,e,n,r,a);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,W1.call(this,r,a)}function js(t,e,n,r,a){if(!(this instanceof js))return new js(t,e,n,r,a);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,W1.call(this,r,a)}function Xe(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],a=arguments[2],s=arguments[3],u=[],o=1,c=16,h="S",f=null;Bt(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,a=t.format||a,s=t.compress||t.compressPdf||s,(f=t.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(c=t.floatPrecision),h=t.defaultPathOperation||"S"),u=t.filters||(s===!0?["FlateEncode"]:u),r=r||"mm",n=(""+(n||"P")).toLowerCase();var m=t.putOnlyUsedFonts||!1,w={},v={internal:{},__private__:{}};v.__private__.PubSub=Ld;var y="1.3",k=v.__private__.getPdfVersion=function(){return y};v.__private__.setPdfVersion=function(p){y=p};var L={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};v.__private__.getPageFormats=function(){return L};var x=v.__private__.getPageFormat=function(p){return L[p]};a=a||"a4";var P="compat",H="advanced",M=P;function oe(){this.saveGraphicsState(),_(new at(dt,0,0,-dt,0,Xa()*dt).toString()+" cm"),this.setFontSize(this.getFontSize()/dt),h="n",M=H}function fe(){this.restoreGraphicsState(),h="S",M=P}var pe=v.__private__.combineFontStyleAndFontWeight=function(p,A){if(p=="bold"&&A=="normal"||p=="bold"&&A==400||p=="normal"&&A=="italic"||p=="bold"&&A=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return A&&(p=A==400||A==="normal"?p==="italic"?"italic":"normal":A!=700&&A!=="bold"||p!=="normal"?(A==700?"bold":A)+""+p:"bold"),p};v.advancedAPI=function(p){var A=M===P;return A&&oe.call(this),typeof p!="function"||(p(this),A&&fe.call(this)),this},v.compatAPI=function(p){var A=M===H;return A&&fe.call(this),typeof p!="function"||(p(this),A&&oe.call(this)),this},v.isAdvancedAPI=function(){return M===H};var re,$=function(p){if(M!==H)throw new Error(p+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},ce=v.roundToPrecision=v.__private__.roundToPrecision=function(p,A){var K=e||A;if(isNaN(p)||isNaN(K))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return p.toFixed(K).replace(/0+$/,"")};re=v.hpf=v.__private__.hpf=typeof c=="number"?function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.hpf");return ce(p,c)}:c==="smart"?function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.hpf");return ce(p,p>-1&&p<1?16:5)}:function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.hpf");return ce(p,16)};var F=v.f2=v.__private__.f2=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.f2");return ce(p,2)},B=v.__private__.f3=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.f3");return ce(p,3)},ee=v.scale=v.__private__.scale=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.scale");return M===P?p*dt:M===H?p:void 0},Z=function(p){return ee(function(A){return M===P?Xa()-A:M===H?A:void 0}(p))};v.__private__.setPrecision=v.setPrecision=function(p){typeof parseInt(p,10)=="number"&&(e=parseInt(p,10))};var de,ge="00000000000000000000000000000000",ke=v.__private__.getFileId=function(){return ge},ve=v.__private__.setFileId=function(p){return ge=p!==void 0&&/^[a-fA-F0-9]{32}$/.test(p)?p.toUpperCase():ge.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(yn=new Os(f.userPermissions,f.userPassword,f.ownerPassword,ge)),ge};v.setFileId=function(p){return ve(p),this},v.getFileId=function(){return ke()};var Se=v.__private__.convertDateToPDFDate=function(p){var A=p.getTimezoneOffset(),K=A<0?"+":"-",ie=Math.floor(Math.abs(A/60)),me=Math.abs(A%60),Pe=[K,R(ie),"'",R(me),"'"].join("");return["D:",p.getFullYear(),R(p.getMonth()+1),R(p.getDate()),R(p.getHours()),R(p.getMinutes()),R(p.getSeconds()),Pe].join("")},Ee=v.__private__.convertPDFDateToDate=function(p){var A=parseInt(p.substr(2,4),10),K=parseInt(p.substr(6,2),10)-1,ie=parseInt(p.substr(8,2),10),me=parseInt(p.substr(10,2),10),Pe=parseInt(p.substr(12,2),10),Fe=parseInt(p.substr(14,2),10);return new Date(A,K,ie,me,Pe,Fe,0)},Le=v.__private__.setCreationDate=function(p){var A;if(p===void 0&&(p=new Date),p instanceof Date)A=Se(p);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(p))throw new Error("Invalid argument passed to jsPDF.setCreationDate");A=p}return de=A},I=v.__private__.getCreationDate=function(p){var A=de;return p==="jsDate"&&(A=Ee(de)),A};v.setCreationDate=function(p){return Le(p),this},v.getCreationDate=function(p){return I(p)};var V,R=v.__private__.padd2=function(p){return("0"+parseInt(p)).slice(-2)},q=v.__private__.padd2Hex=function(p){return("00"+(p=p.toString())).substr(p.length)},O=0,S=[],j=[],C=0,J=[],te=[],_e=!1,be=j;v.__private__.setCustomOutputDestination=function(p){_e=!0,be=p};var Q=function(p){_e||(be=p)};v.__private__.resetCustomOutputDestination=function(){_e=!1,be=j};var _=v.__private__.out=function(p){return p=p.toString(),C+=p.length+1,be.push(p),be},se=v.__private__.write=function(p){return _(arguments.length===1?p.toString():Array.prototype.join.call(arguments," "))},z=v.__private__.getArrayBuffer=function(p){for(var A=p.length,K=new ArrayBuffer(A),ie=new Uint8Array(K);A--;)ie[A]=p.charCodeAt(A);return K},Y=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];v.__private__.getStandardFonts=function(){return Y};var ae=t.fontSize||16;v.__private__.setFontSize=v.setFontSize=function(p){return ae=M===H?p/dt:p,this};var Oe,Be=v.__private__.getFontSize=v.getFontSize=function(){return M===P?ae:ae*dt},Ue=t.R2L||!1;v.__private__.setR2L=v.setR2L=function(p){return Ue=p,this},v.__private__.getR2L=v.getR2L=function(){return Ue};var Ve,At=v.__private__.setZoomMode=function(p){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(p))Oe=p;else if(isNaN(p)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(p)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+p+'" is not recognized.');Oe=p}else Oe=parseInt(p,10)};v.__private__.getZoomMode=function(){return Oe};var lt,et=v.__private__.setPageMode=function(p){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(p)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+p+'" is not recognized.');Ve=p};v.__private__.getPageMode=function(){return Ve};var ut=v.__private__.setLayoutMode=function(p){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(p)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+p+'" is not recognized.');lt=p};v.__private__.getLayoutMode=function(){return lt},v.__private__.setDisplayMode=v.setDisplayMode=function(p,A,K){return At(p),ut(A),et(K),this};var ct={title:"",subject:"",author:"",keywords:"",creator:""};v.__private__.getDocumentProperty=function(p){if(Object.keys(ct).indexOf(p)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ct[p]},v.__private__.getDocumentProperties=function(){return ct},v.__private__.setDocumentProperties=v.setProperties=v.setDocumentProperties=function(p){for(var A in ct)ct.hasOwnProperty(A)&&p[A]&&(ct[A]=p[A]);return this},v.__private__.setDocumentProperty=function(p,A){if(Object.keys(ct).indexOf(p)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ct[p]=A};var ze,dt,De,kt,xt,ht={},yt={},zt=[],nt={},Ht={},it={},gt={},Qt=null,Lt=0,rt=[],Rt=new Ld(v),Ha=t.hotfixes||[],Fn={},Kr={},Rr=[],at=function p(A,K,ie,me,Pe,Fe){if(!(this instanceof p))return new p(A,K,ie,me,Pe,Fe);isNaN(A)&&(A=1),isNaN(K)&&(K=0),isNaN(ie)&&(ie=0),isNaN(me)&&(me=1),isNaN(Pe)&&(Pe=0),isNaN(Fe)&&(Fe=0),this._matrix=[A,K,ie,me,Pe,Fe]};Object.defineProperty(at.prototype,"sx",{get:function(){return this._matrix[0]},set:function(p){this._matrix[0]=p}}),Object.defineProperty(at.prototype,"shy",{get:function(){return this._matrix[1]},set:function(p){this._matrix[1]=p}}),Object.defineProperty(at.prototype,"shx",{get:function(){return this._matrix[2]},set:function(p){this._matrix[2]=p}}),Object.defineProperty(at.prototype,"sy",{get:function(){return this._matrix[3]},set:function(p){this._matrix[3]=p}}),Object.defineProperty(at.prototype,"tx",{get:function(){return this._matrix[4]},set:function(p){this._matrix[4]=p}}),Object.defineProperty(at.prototype,"ty",{get:function(){return this._matrix[5]},set:function(p){this._matrix[5]=p}}),Object.defineProperty(at.prototype,"a",{get:function(){return this._matrix[0]},set:function(p){this._matrix[0]=p}}),Object.defineProperty(at.prototype,"b",{get:function(){return this._matrix[1]},set:function(p){this._matrix[1]=p}}),Object.defineProperty(at.prototype,"c",{get:function(){return this._matrix[2]},set:function(p){this._matrix[2]=p}}),Object.defineProperty(at.prototype,"d",{get:function(){return this._matrix[3]},set:function(p){this._matrix[3]=p}}),Object.defineProperty(at.prototype,"e",{get:function(){return this._matrix[4]},set:function(p){this._matrix[4]=p}}),Object.defineProperty(at.prototype,"f",{get:function(){return this._matrix[5]},set:function(p){this._matrix[5]=p}}),Object.defineProperty(at.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(at.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(at.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(at.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),at.prototype.join=function(p){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(re).join(p)},at.prototype.multiply=function(p){var A=p.sx*this.sx+p.shy*this.shx,K=p.sx*this.shy+p.shy*this.sy,ie=p.shx*this.sx+p.sy*this.shx,me=p.shx*this.shy+p.sy*this.sy,Pe=p.tx*this.sx+p.ty*this.shx+this.tx,Fe=p.tx*this.shy+p.ty*this.sy+this.ty;return new at(A,K,ie,me,Pe,Fe)},at.prototype.decompose=function(){var p=this.sx,A=this.shy,K=this.shx,ie=this.sy,me=this.tx,Pe=this.ty,Fe=Math.sqrt(p*p+A*A),Ge=(p/=Fe)*K+(A/=Fe)*ie;K-=p*Ge,ie-=A*Ge;var Ye=Math.sqrt(K*K+ie*ie);return Ge/=Ye,p*(ie/=Ye)<A*(K/=Ye)&&(p=-p,A=-A,Ge=-Ge,Fe=-Fe),{scale:new at(Fe,0,0,Ye,0,0),translate:new at(1,0,0,1,me,Pe),rotate:new at(p,A,-A,p,0,0),skew:new at(1,0,Ge,1,0,0)}},at.prototype.toString=function(p){return this.join(" ")},at.prototype.inversed=function(){var p=this.sx,A=this.shy,K=this.shx,ie=this.sy,me=this.tx,Pe=this.ty,Fe=1/(p*ie-A*K),Ge=ie*Fe,Ye=-A*Fe,ft=-K*Fe,bt=p*Fe;return new at(Ge,Ye,ft,bt,-Ge*me-ft*Pe,-Ye*me-bt*Pe)},at.prototype.applyToPoint=function(p){var A=p.x*this.sx+p.y*this.shx+this.tx,K=p.x*this.shy+p.y*this.sy+this.ty;return new na(A,K)},at.prototype.applyToRectangle=function(p){var A=this.applyToPoint(p),K=this.applyToPoint(new na(p.x+p.w,p.y+p.h));return new ri(A.x,A.y,K.x-A.x,K.y-A.y)},at.prototype.clone=function(){var p=this.sx,A=this.shy,K=this.shx,ie=this.sy,me=this.tx,Pe=this.ty;return new at(p,A,K,ie,me,Pe)},v.Matrix=at;var Yr=v.matrixMult=function(p,A){return A.multiply(p)},Qr=new at(1,0,0,1,0,0);v.unitMatrix=v.identityMatrix=Qr;var or=function(p,A){if(!Ht[p]){var K=(A instanceof us?"Sh":"P")+(Object.keys(nt).length+1).toString(10);A.id=K,Ht[p]=K,nt[K]=A,Rt.publish("addPattern",A)}};v.ShadingPattern=us,v.TilingPattern=js,v.addShadingPattern=function(p,A){return $("addShadingPattern()"),or(p,A),this},v.beginTilingPattern=function(p){$("beginTilingPattern()"),ai(p.boundingBox[0],p.boundingBox[1],p.boundingBox[2]-p.boundingBox[0],p.boundingBox[3]-p.boundingBox[1],p.matrix)},v.endTilingPattern=function(p,A){$("endTilingPattern()"),A.stream=te[V].join(`
`),or(p,A),Rt.publish("endTilingPattern",A),Rr.pop().restore()};var lr,nn=v.__private__.newObject=function(){var p=An();return Nn(p,!0),p},An=v.__private__.newObjectDeferred=function(){return O++,S[O]=function(){return C},O},Nn=function(p,A){return A=typeof A=="boolean"&&A,S[p]=C,A&&_(p+" 0 obj"),p},Va=v.__private__.newAdditionalObject=function(){var p={objId:An(),content:""};return J.push(p),p},wa=An(),br=An(),Fr=v.__private__.decodeColorString=function(p){var A=p.split(" ");if(A.length!==2||A[1]!=="g"&&A[1]!=="G")A.length!==5||A[4]!=="k"&&A[4]!=="K"||(A=[(1-A[0])*(1-A[3]),(1-A[1])*(1-A[3]),(1-A[2])*(1-A[3]),"r"]);else{var K=parseFloat(A[0]);A=[K,K,K,"r"]}for(var ie="#",me=0;me<3;me++)ie+=("0"+Math.floor(255*parseFloat(A[me])).toString(16)).slice(-2);return ie},yr=v.__private__.encodeColorString=function(p){var A;typeof p=="string"&&(p={ch1:p});var K=p.ch1,ie=p.ch2,me=p.ch3,Pe=p.ch4,Fe=p.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof K=="string"&&K.charAt(0)!=="#"){var Ge=new H1(K);if(Ge.ok)K=Ge.toHex();else if(!/^\d*\.?\d*$/.test(K))throw new Error('Invalid color "'+K+'" passed to jsPDF.encodeColorString.')}if(typeof K=="string"&&/^#[0-9A-Fa-f]{3}$/.test(K)&&(K="#"+K[1]+K[1]+K[2]+K[2]+K[3]+K[3]),typeof K=="string"&&/^#[0-9A-Fa-f]{6}$/.test(K)){var Ye=parseInt(K.substr(1),16);K=Ye>>16&255,ie=Ye>>8&255,me=255&Ye}if(ie===void 0||Pe===void 0&&K===ie&&ie===me)A=typeof K=="string"?K+" "+Fe[0]:p.precision===2?F(K/255)+" "+Fe[0]:B(K/255)+" "+Fe[0];else if(Pe===void 0||Bt(Pe)==="object"){if(Pe&&!isNaN(Pe.a)&&Pe.a===0)return["1.","1.","1.",Fe[1]].join(" ");A=typeof K=="string"?[K,ie,me,Fe[1]].join(" "):p.precision===2?[F(K/255),F(ie/255),F(me/255),Fe[1]].join(" "):[B(K/255),B(ie/255),B(me/255),Fe[1]].join(" ")}else A=typeof K=="string"?[K,ie,me,Pe,Fe[2]].join(" "):p.precision===2?[F(K),F(ie),F(me),F(Pe),Fe[2]].join(" "):[B(K),B(ie),B(me),B(Pe),Fe[2]].join(" ");return A},wr=v.__private__.getFilters=function(){return u},ur=v.__private__.putStream=function(p){var A=(p=p||{}).data||"",K=p.filters||wr(),ie=p.alreadyAppliedFilters||[],me=p.addLength1||!1,Pe=A.length,Fe=p.objectId,Ge=function(wn){return wn};if(f!==null&&Fe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(Ge=yn.encryptor(Fe,0));var Ye={};K===!0&&(K=["FlateEncode"]);var ft=p.additionalKeyValues||[],bt=(Ye=Xe.API.processDataByFilters!==void 0?Xe.API.processDataByFilters(A,K):{data:A,reverseChain:[]}).reverseChain+(Array.isArray(ie)?ie.join(" "):ie.toString());if(Ye.data.length!==0&&(ft.push({key:"Length",value:Ye.data.length}),me===!0&&ft.push({key:"Length1",value:Pe})),bt.length!=0)if(bt.split("/").length-1==1)ft.push({key:"Filter",value:bt});else{ft.push({key:"Filter",value:"["+bt+"]"});for(var It=0;It<ft.length;It+=1)if(ft[It].key==="DecodeParms"){for(var Zt=[],vn=0;vn<Ye.reverseChain.split("/").length-1;vn+=1)Zt.push("null");Zt.push(ft[It].value),ft[It].value="["+Zt.join(" ")+"]"}}_("<<");for(var Vt=0;Vt<ft.length;Vt++)_("/"+ft[Vt].key+" "+ft[Vt].value);_(">>"),Ye.data.length!==0&&(_("stream"),_(Ge(Ye.data)),_("endstream"))},Wa=v.__private__.putPage=function(p){var A=p.number,K=p.data,ie=p.objId,me=p.contentsObjId;Nn(ie,!0),_("<</Type /Page"),_("/Parent "+p.rootDictionaryObjId+" 0 R"),_("/Resources "+p.resourceDictionaryObjId+" 0 R"),_("/MediaBox ["+parseFloat(re(p.mediaBox.bottomLeftX))+" "+parseFloat(re(p.mediaBox.bottomLeftY))+" "+re(p.mediaBox.topRightX)+" "+re(p.mediaBox.topRightY)+"]"),p.cropBox!==null&&_("/CropBox ["+re(p.cropBox.bottomLeftX)+" "+re(p.cropBox.bottomLeftY)+" "+re(p.cropBox.topRightX)+" "+re(p.cropBox.topRightY)+"]"),p.bleedBox!==null&&_("/BleedBox ["+re(p.bleedBox.bottomLeftX)+" "+re(p.bleedBox.bottomLeftY)+" "+re(p.bleedBox.topRightX)+" "+re(p.bleedBox.topRightY)+"]"),p.trimBox!==null&&_("/TrimBox ["+re(p.trimBox.bottomLeftX)+" "+re(p.trimBox.bottomLeftY)+" "+re(p.trimBox.topRightX)+" "+re(p.trimBox.topRightY)+"]"),p.artBox!==null&&_("/ArtBox ["+re(p.artBox.bottomLeftX)+" "+re(p.artBox.bottomLeftY)+" "+re(p.artBox.topRightX)+" "+re(p.artBox.topRightY)+"]"),typeof p.userUnit=="number"&&p.userUnit!==1&&_("/UserUnit "+p.userUnit),Rt.publish("putPage",{objId:ie,pageContext:rt[A],pageNumber:A,page:K}),_("/Contents "+me+" 0 R"),_(">>"),_("endobj");var Pe=K.join(`
`);return M===H&&(Pe+=`
Q`),Nn(me,!0),ur({data:Pe,filters:wr(),objectId:me}),_("endobj"),ie},Tr=v.__private__.putPages=function(){var p,A,K=[];for(p=1;p<=Lt;p++)rt[p].objId=An(),rt[p].contentsObjId=An();for(p=1;p<=Lt;p++)K.push(Wa({number:p,data:te[p],objId:rt[p].objId,contentsObjId:rt[p].contentsObjId,mediaBox:rt[p].mediaBox,cropBox:rt[p].cropBox,bleedBox:rt[p].bleedBox,trimBox:rt[p].trimBox,artBox:rt[p].artBox,userUnit:rt[p].userUnit,rootDictionaryObjId:wa,resourceDictionaryObjId:br}));Nn(wa,!0),_("<</Type /Pages");var ie="/Kids [";for(A=0;A<Lt;A++)ie+=K[A]+" 0 R ";_(ie+"]"),_("/Count "+Lt),_(">>"),_("endobj"),Rt.publish("postPutPages")},Ga=function(p){Rt.publish("putFont",{font:p,out:_,newObject:nn,putStream:ur}),p.isAlreadyPutted!==!0&&(p.objectNumber=nn(),_("<<"),_("/Type /Font"),_("/BaseFont /"+Bs(p.postScriptName)),_("/Subtype /Type1"),typeof p.encoding=="string"&&_("/Encoding /"+p.encoding),_("/FirstChar 32"),_("/LastChar 255"),_(">>"),_("endobj"))},bs=function(p){p.objectNumber=nn();var A=[];A.push({key:"Type",value:"/XObject"}),A.push({key:"Subtype",value:"/Form"}),A.push({key:"BBox",value:"["+[re(p.x),re(p.y),re(p.x+p.width),re(p.y+p.height)].join(" ")+"]"}),A.push({key:"Matrix",value:"["+p.matrix.toString()+"]"});var K=p.pages[1].join(`
`);ur({data:K,additionalKeyValues:A,objectId:p.objectNumber}),_("endobj")},ys=function(p,A){A||(A=21);var K=nn(),ie=function(Fe,Ge){var Ye,ft=[],bt=1/(Ge-1);for(Ye=0;Ye<1;Ye+=bt)ft.push(Ye);if(ft.push(1),Fe[0].offset!=0){var It={offset:0,color:Fe[0].color};Fe.unshift(It)}if(Fe[Fe.length-1].offset!=1){var Zt={offset:1,color:Fe[Fe.length-1].color};Fe.push(Zt)}for(var vn="",Vt=0,wn=0;wn<ft.length;wn++){for(Ye=ft[wn];Ye>Fe[Vt+1].offset;)Vt++;var gn=Fe[Vt].offset,Cn=(Ye-gn)/(Fe[Vt+1].offset-gn),sa=Fe[Vt].color,kr=Fe[Vt+1].color;vn+=q(Math.round((1-Cn)*sa[0]+Cn*kr[0]).toString(16))+q(Math.round((1-Cn)*sa[1]+Cn*kr[1]).toString(16))+q(Math.round((1-Cn)*sa[2]+Cn*kr[2]).toString(16))}return vn.trim()}(p.colors,A),me=[];me.push({key:"FunctionType",value:"0"}),me.push({key:"Domain",value:"[0.0 1.0]"}),me.push({key:"Size",value:"["+A+"]"}),me.push({key:"BitsPerSample",value:"8"}),me.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),me.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ur({data:ie,additionalKeyValues:me,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:K}),_("endobj"),p.objectNumber=nn(),_("<< /ShadingType "+p.type),_("/ColorSpace /DeviceRGB");var Pe="/Coords ["+re(parseFloat(p.coords[0]))+" "+re(parseFloat(p.coords[1]))+" ";p.type===2?Pe+=re(parseFloat(p.coords[2]))+" "+re(parseFloat(p.coords[3])):Pe+=re(parseFloat(p.coords[2]))+" "+re(parseFloat(p.coords[3]))+" "+re(parseFloat(p.coords[4]))+" "+re(parseFloat(p.coords[5])),_(Pe+="]"),p.matrix&&_("/Matrix ["+p.matrix.toString()+"]"),_("/Function "+K+" 0 R"),_("/Extend [true true]"),_(">>"),_("endobj")},ws=function(p,A){var K=An(),ie=nn();A.push({resourcesOid:K,objectOid:ie}),p.objectNumber=ie;var me=[];me.push({key:"Type",value:"/Pattern"}),me.push({key:"PatternType",value:"1"}),me.push({key:"PaintType",value:"1"}),me.push({key:"TilingType",value:"1"}),me.push({key:"BBox",value:"["+p.boundingBox.map(re).join(" ")+"]"}),me.push({key:"XStep",value:re(p.xStep)}),me.push({key:"YStep",value:re(p.yStep)}),me.push({key:"Resources",value:K+" 0 R"}),p.matrix&&me.push({key:"Matrix",value:"["+p.matrix.toString()+"]"}),ur({data:p.stream,additionalKeyValues:me,objectId:p.objectNumber}),_("endobj")},Qo=function(p){for(var A in p.objectNumber=nn(),_("<<"),p)switch(A){case"opacity":_("/ca "+F(p[A]));break;case"stroke-opacity":_("/CA "+F(p[A]))}_(">>"),_("endobj")},Ks=function(p){Nn(p.resourcesOid,!0),_("<<"),_("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var A in _("/Font <<"),ht)ht.hasOwnProperty(A)&&(m===!1||m===!0&&w.hasOwnProperty(A))&&_("/"+A+" "+ht[A].objectNumber+" 0 R");_(">>")}(),function(){if(Object.keys(nt).length>0){for(var A in _("/Shading <<"),nt)nt.hasOwnProperty(A)&&nt[A]instanceof us&&nt[A].objectNumber>=0&&_("/"+A+" "+nt[A].objectNumber+" 0 R");Rt.publish("putShadingPatternDict"),_(">>")}}(),function(A){if(Object.keys(nt).length>0){for(var K in _("/Pattern <<"),nt)nt.hasOwnProperty(K)&&nt[K]instanceof v.TilingPattern&&nt[K].objectNumber>=0&&nt[K].objectNumber<A&&_("/"+K+" "+nt[K].objectNumber+" 0 R");Rt.publish("putTilingPatternDict"),_(">>")}}(p.objectOid),function(){if(Object.keys(it).length>0){var A;for(A in _("/ExtGState <<"),it)it.hasOwnProperty(A)&&it[A].objectNumber>=0&&_("/"+A+" "+it[A].objectNumber+" 0 R");Rt.publish("putGStateDict"),_(">>")}}(),function(){for(var A in _("/XObject <<"),Fn)Fn.hasOwnProperty(A)&&Fn[A].objectNumber>=0&&_("/"+A+" "+Fn[A].objectNumber+" 0 R");Rt.publish("putXobjectDict"),_(">>")}(),_(">>"),_("endobj")},Bi=function(p){yt[p.fontName]=yt[p.fontName]||{},yt[p.fontName][p.fontStyle]=p.id},ji=function(p,A,K,ie,me){var Pe={id:"F"+(Object.keys(ht).length+1).toString(10),postScriptName:p,fontName:A,fontStyle:K,encoding:ie,isStandardFont:me||!1,metadata:{}};return Rt.publish("addFont",{font:Pe,instance:this}),ht[Pe.id]=Pe,Bi(Pe),Pe.id},cr=v.__private__.pdfEscape=v.pdfEscape=function(p,A){return function(K,ie){var me,Pe,Fe,Ge,Ye,ft,bt,It,Zt;if(Fe=(ie=ie||{}).sourceEncoding||"Unicode",Ye=ie.outputEncoding,(ie.autoencode||Ye)&&ht[ze].metadata&&ht[ze].metadata[Fe]&&ht[ze].metadata[Fe].encoding&&(Ge=ht[ze].metadata[Fe].encoding,!Ye&&ht[ze].encoding&&(Ye=ht[ze].encoding),!Ye&&Ge.codePages&&(Ye=Ge.codePages[0]),typeof Ye=="string"&&(Ye=Ge[Ye]),Ye)){for(bt=!1,ft=[],me=0,Pe=K.length;me<Pe;me++)(It=Ye[K.charCodeAt(me)])?ft.push(String.fromCharCode(It)):ft.push(K[me]),ft[me].charCodeAt(0)>>8&&(bt=!0);K=ft.join("")}for(me=K.length;bt===void 0&&me!==0;)K.charCodeAt(me-1)>>8&&(bt=!0),me--;if(!bt)return K;for(ft=ie.noBOM?[]:[254,255],me=0,Pe=K.length;me<Pe;me++){if((Zt=(It=K.charCodeAt(me))>>8)>>8)throw new Error("Character at position "+me+" of string '"+K+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ft.push(Zt),ft.push(It-(Zt<<8))}return String.fromCharCode.apply(void 0,ft)}(p,A).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ys=v.__private__.beginPage=function(p){te[++Lt]=[],rt[Lt]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(p[0]),topRightY:Number(p[1])}},$i(Lt),Q(te[V])},Di=function(p,A){var K,ie,me;switch(n=A||n,typeof p=="string"&&(K=x(p.toLowerCase()),Array.isArray(K)&&(ie=K[0],me=K[1])),Array.isArray(p)&&(ie=p[0]*dt,me=p[1]*dt),isNaN(ie)&&(ie=a[0],me=a[1]),(ie>14400||me>14400)&&($t.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ie=Math.min(14400,ie),me=Math.min(14400,me)),a=[ie,me],n.substr(0,1)){case"l":me>ie&&(a=[me,ie]);break;case"p":ie>me&&(a=[me,ie])}Ys(a),pt(Zs),_(Ss),ti!==0&&_(ti+" J"),ni!==0&&_(ni+" j"),Rt.publish("addPage",{pageNumber:Lt})},Qs=function(p){p>0&&p<=Lt&&(te.splice(p,1),rt.splice(p,1),Lt--,V>Lt&&(V=Lt),this.setPage(V))},$i=function(p){p>0&&p<=Lt&&(V=p)},Ui=v.__private__.getNumberOfPages=v.getNumberOfPages=function(){return te.length-1},zi=function(p,A,K){var ie,me=void 0;return K=K||{},p=p!==void 0?p:ht[ze].fontName,A=A!==void 0?A:ht[ze].fontStyle,ie=p.toLowerCase(),yt[ie]!==void 0&&yt[ie][A]!==void 0?me=yt[ie][A]:yt[p]!==void 0&&yt[p][A]!==void 0?me=yt[p][A]:K.disableWarning===!1&&$t.warn("Unable to look up font label for font '"+p+"', '"+A+"'. Refer to getFontList() for available fonts."),me||K.noFallback||(me=yt.times[A])==null&&(me=yt.times.normal),me},qr=v.__private__.putInfo=function(){var p=nn(),A=function(ie){return ie};for(var K in f!==null&&(A=yn.encryptor(p,0)),_("<<"),_("/Producer ("+cr(A("jsPDF "+Xe.version))+")"),ct)ct.hasOwnProperty(K)&&ct[K]&&_("/"+K.substr(0,1).toUpperCase()+K.substr(1)+" ("+cr(A(ct[K]))+")");_("/CreationDate ("+cr(A(de))+")"),_(">>"),_("endobj")},_s=v.__private__.putCatalog=function(p){var A=(p=p||{}).rootDictionaryObjId||wa;switch(nn(),_("<<"),_("/Type /Catalog"),_("/Pages "+A+" 0 R"),Oe||(Oe="fullwidth"),Oe){case"fullwidth":_("/OpenAction [3 0 R /FitH null]");break;case"fullheight":_("/OpenAction [3 0 R /FitV null]");break;case"fullpage":_("/OpenAction [3 0 R /Fit]");break;case"original":_("/OpenAction [3 0 R /XYZ null null 1]");break;default:var K=""+Oe;K.substr(K.length-1)==="%"&&(Oe=parseInt(Oe)/100),typeof Oe=="number"&&_("/OpenAction [3 0 R /XYZ null null "+F(Oe)+"]")}switch(lt||(lt="continuous"),lt){case"continuous":_("/PageLayout /OneColumn");break;case"single":_("/PageLayout /SinglePage");break;case"two":case"twoleft":_("/PageLayout /TwoColumnLeft");break;case"tworight":_("/PageLayout /TwoColumnRight")}Ve&&_("/PageMode /"+Ve),Rt.publish("putCatalog"),_(">>"),_("endobj")},Xo=v.__private__.putTrailer=function(){_("trailer"),_("<<"),_("/Size "+(O+1)),_("/Root "+O+" 0 R"),_("/Info "+(O-1)+" 0 R"),f!==null&&_("/Encrypt "+yn.oid+" 0 R"),_("/ID [ <"+ge+"> <"+ge+"> ]"),_(">>")},pn=v.__private__.putHeader=function(){_("%PDF-"+y),_("%ºß¬à")},Hi=v.__private__.putXRef=function(){var p="0000000000";_("xref"),_("0 "+(O+1)),_("0000000000 65535 f ");for(var A=1;A<=O;A++)typeof S[A]=="function"?_((p+S[A]()).slice(-10)+" 00000 n "):S[A]!==void 0?_((p+S[A]).slice(-10)+" 00000 n "):_("0000000000 00000 n ")},Mr=v.__private__.buildDocument=function(){var p;O=0,C=0,j=[],S=[],J=[],wa=An(),br=An(),Q(j),Rt.publish("buildDocument"),pn(),Tr(),function(){Rt.publish("putAdditionalObjects");for(var K=0;K<J.length;K++){var ie=J[K];Nn(ie.objId,!0),_(ie.content),_("endobj")}Rt.publish("postPutAdditionalObjects")}(),p=[],function(){for(var K in ht)ht.hasOwnProperty(K)&&(m===!1||m===!0&&w.hasOwnProperty(K))&&Ga(ht[K])}(),function(){var K;for(K in it)it.hasOwnProperty(K)&&Qo(it[K])}(),function(){for(var K in Fn)Fn.hasOwnProperty(K)&&bs(Fn[K])}(),function(K){var ie;for(ie in nt)nt.hasOwnProperty(ie)&&(nt[ie]instanceof us?ys(nt[ie]):nt[ie]instanceof js&&ws(nt[ie],K))}(p),Rt.publish("putResources"),p.forEach(Ks),Ks({resourcesOid:br,objectOid:Number.MAX_SAFE_INTEGER}),Rt.publish("postPutResources"),f!==null&&(yn.oid=nn(),_("<<"),_("/Filter /Standard"),_("/V "+yn.v),_("/R "+yn.r),_("/U <"+yn.toHexString(yn.U)+">"),_("/O <"+yn.toHexString(yn.O)+">"),_("/P "+yn.P),_(">>"),_("endobj")),qr(),_s();var A=C;return Hi(),Xo(),_("startxref"),_(""+A),_("%%EOF"),Q(te[V]),j.join(`
`)},ks=v.__private__.getBlob=function(p){return new Blob([z(p)],{type:"application/pdf"})},Vi=v.output=v.__private__.output=(lr=function(p,A){switch(typeof(A=A||{})=="string"?A={filename:A}:A.filename=A.filename||"generated.pdf",p){case void 0:return Mr();case"save":v.save(A.filename);break;case"arraybuffer":return z(Mr());case"blob":return ks(Mr());case"bloburi":case"bloburl":if(ot.URL!==void 0&&typeof ot.URL.createObjectURL=="function")return ot.URL&&ot.URL.createObjectURL(ks(Mr()))||void 0;$t.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var K="",ie=Mr();try{K=xd(ie)}catch{K=xd(unescape(encodeURIComponent(ie)))}return"data:application/pdf;filename="+A.filename+";base64,"+K;case"pdfobjectnewwindow":if(Object.prototype.toString.call(ot)==="[object Window]"){var me="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Pe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';A.pdfObjectUrl&&(me=A.pdfObjectUrl,Pe="");var Fe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+me+'"'+Pe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(A)+");<\/script></body></html>",Ge=ot.open();return Ge!==null&&Ge.document.write(Fe),Ge}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(ot)==="[object Window]"){var Ye='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(A.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+A.filename+'" width="500px" height="400px" /></body></html>',ft=ot.open();if(ft!==null){ft.document.write(Ye);var bt=this;ft.document.documentElement.querySelector("#pdfViewer").onload=function(){ft.document.title=A.filename,ft.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(bt.output("bloburl"))}}return ft}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(ot)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var It='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",A)+'"></iframe></body></html>',Zt=ot.open();if(Zt!==null&&(Zt.document.write(It),Zt.document.title=A.filename),Zt||typeof safari>"u")return Zt;break;case"datauri":case"dataurl":return ot.document.location.href=this.output("datauristring",A);default:return null}},lr.foo=function(){try{return lr.apply(this,arguments)}catch(K){var p=K.stack||"";~p.indexOf(" at ")&&(p=p.split(" at ")[1]);var A="Error in function "+p.split(`
`)[0].split("<")[0]+": "+K.message;if(!ot.console)throw new Error(A);ot.console.error(A,K),ot.alert&&alert(A)}},lr.foo.bar=lr,lr.foo),dr=function(p){return Array.isArray(Ha)===!0&&Ha.indexOf(p)>-1};switch(r){case"pt":dt=1;break;case"mm":dt=72/25.4;break;case"cm":dt=72/2.54;break;case"in":dt=72;break;case"px":dt=dr("px_scaling")==1?.75:96/72;break;case"pc":case"em":dt=12;break;case"ex":dt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);dt=r}var yn=null;Le(),ve();var Xr=v.__private__.getPageInfo=v.getPageInfo=function(p){if(isNaN(p)||p%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:rt[p].objId,pageNumber:p,pageContext:rt[p]}},Wi=v.__private__.getPageInfoByObjId=function(p){if(isNaN(p)||p%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var A in rt)if(rt[A].objId===p)break;return Xr(A)},Zo=v.__private__.getCurrentPageInfo=v.getCurrentPageInfo=function(){return{objId:rt[V].objId,pageNumber:V,pageContext:rt[V]}};v.addPage=function(){return Di.apply(this,arguments),this},v.setPage=function(){return $i.apply(this,arguments),Q.call(this,te[V]),this},v.insertPage=function(p){return this.addPage(),this.movePage(V,p),this},v.movePage=function(p,A){var K,ie;if(p>A){K=te[p],ie=rt[p];for(var me=p;me>A;me--)te[me]=te[me-1],rt[me]=rt[me-1];te[A]=K,rt[A]=ie,this.setPage(A)}else if(p<A){K=te[p],ie=rt[p];for(var Pe=p;Pe<A;Pe++)te[Pe]=te[Pe+1],rt[Pe]=rt[Pe+1];te[A]=K,rt[A]=ie,this.setPage(A)}return this},v.deletePage=function(){return Qs.apply(this,arguments),this},v.__private__.text=v.text=function(p,A,K,ie,me){var Pe,Fe,Ge,Ye,ft,bt,It,Zt,vn,Vt=(ie=ie||{}).scope||this;if(typeof p=="number"&&typeof A=="number"&&(typeof K=="string"||Array.isArray(K))){var wn=K;K=A,A=p,p=wn}if(arguments[3]instanceof at==0?(Ge=arguments[4],Ye=arguments[5],Bt(It=arguments[3])==="object"&&It!==null||(typeof Ge=="string"&&(Ye=Ge,Ge=null),typeof It=="string"&&(Ye=It,It=null),typeof It=="number"&&(Ge=It,It=null),ie={flags:It,angle:Ge,align:Ye})):($("The transform parameter of text() with a Matrix value"),vn=me),isNaN(A)||isNaN(K)||p==null)throw new Error("Invalid arguments passed to jsPDF.text");if(p.length===0)return Vt;var gn,Cn="",sa=typeof ie.lineHeightFactor=="number"?ie.lineHeightFactor:Ka,kr=Vt.internal.scaleFactor;function ia(Ft){return Ft=Ft.split("	").join(Array(ie.TabLen||9).join(" ")),cr(Ft,It)}function ii(Ft){for(var jt,ln=Ft.concat(),_n=[],ua=ln.length;ua--;)typeof(jt=ln.shift())=="string"?_n.push(jt):Array.isArray(Ft)&&(jt.length===1||jt[1]===void 0&&jt[2]===void 0)?_n.push(jt[0]):_n.push([jt[0],jt[1],jt[2]]);return _n}function Ls(Ft,jt){var ln;if(typeof Ft=="string")ln=jt(Ft)[0];else if(Array.isArray(Ft)){for(var _n,ua,gi=Ft.concat(),Ps=[],ro=gi.length;ro--;)typeof(_n=gi.shift())=="string"?Ps.push(jt(_n)[0]):Array.isArray(_n)&&typeof _n[0]=="string"&&(ua=jt(_n[0],_n[1],_n[2]),Ps.push([ua[0],ua[1],ua[2]]));ln=Ps}return ln}var _a=!1,Za=!0;if(typeof p=="string")_a=!0;else if(Array.isArray(p)){var es=p.concat();Fe=[];for(var ka,Pn=es.length;Pn--;)(typeof(ka=es.shift())!="string"||Array.isArray(ka)&&typeof ka[0]!="string")&&(Za=!1);_a=Za}if(_a===!1)throw new Error('Type of text must be string or Array. "'+p+'" is not recognized.');typeof p=="string"&&(p=p.match(/[\r?\n]/)?p.split(/\r\n|\r|\n/g):[p]);var ts=ae/Vt.internal.scaleFactor,ns=ts*(sa-1);switch(ie.baseline){case"bottom":K-=ns;break;case"top":K+=ts-ns;break;case"hanging":K+=ts-2*ns;break;case"middle":K+=ts/2-ns}if((bt=ie.maxWidth||0)>0&&(typeof p=="string"?p=Vt.splitTextToSize(p,bt):Object.prototype.toString.call(p)==="[object Array]"&&(p=p.reduce(function(Ft,jt){return Ft.concat(Vt.splitTextToSize(jt,bt))},[]))),Pe={text:p,x:A,y:K,options:ie,mutex:{pdfEscape:cr,activeFontKey:ze,fonts:ht,activeFontSize:ae}},Rt.publish("preProcessText",Pe),p=Pe.text,Ge=(ie=Pe.options).angle,vn instanceof at==0&&Ge&&typeof Ge=="number"){Ge*=Math.PI/180,ie.rotationDirection===0&&(Ge=-Ge),M===H&&(Ge=-Ge);var oi=Math.cos(Ge),li=Math.sin(Ge);vn=new at(oi,li,-li,oi,0,0)}else Ge&&Ge instanceof at&&(vn=Ge);M!==H||vn||(vn=Qr),(ft=ie.charSpace||ta)!==void 0&&(Cn+=re(ee(ft))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Zt=ie.horizontalScale)!==void 0&&(Cn+=re(100*Zt)+` Tz
`),ie.lang;var jn=-1,oa=ie.renderingMode!==void 0?ie.renderingMode:ie.stroke,Ns=Vt.internal.getCurrentPageInfo().pageContext;switch(oa){case 0:case!1:case"fill":jn=0;break;case 1:case!0:case"stroke":jn=1;break;case 2:case"fillThenStroke":jn=2;break;case 3:case"invisible":jn=3;break;case 4:case"fillAndAddForClipping":jn=4;break;case 5:case"strokeAndAddPathForClipping":jn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":jn=6;break;case 7:case"addToPathForClipping":jn=7}var to=Ns.usedRenderingMode!==void 0?Ns.usedRenderingMode:-1;jn!==-1?Cn+=jn+` Tr
`:to!==-1&&(Cn+=`0 Tr
`),jn!==-1&&(Ns.usedRenderingMode=jn),Ye=ie.align||"left";var hr,rs=ae*sa,ui=Vt.internal.pageSize.getWidth(),ci=ht[ze];ft=ie.charSpace||ta,bt=ie.maxWidth||0,It=Object.assign({autoencode:!0,noBOM:!0},ie.flags);var xa=[],as=function(Ft){return Vt.getStringUnitWidth(Ft,{font:ci,charSpace:ft,fontSize:ae,doKerning:!1})*ae/kr};if(Object.prototype.toString.call(p)==="[object Array]"){var Gn;Fe=ii(p),Ye!=="left"&&(hr=Fe.map(as));var Jn,Sa=0;if(Ye==="right"){A-=hr[0],p=[],Pn=Fe.length;for(var la=0;la<Pn;la++)la===0?(Jn=Zr(A),Gn=ea(K)):(Jn=ee(Sa-hr[la]),Gn=-rs),p.push([Fe[la],Jn,Gn]),Sa=hr[la]}else if(Ye==="center"){A-=hr[0]/2,p=[],Pn=Fe.length;for(var Aa=0;Aa<Pn;Aa++)Aa===0?(Jn=Zr(A),Gn=ea(K)):(Jn=ee((Sa-hr[Aa])/2),Gn=-rs),p.push([Fe[Aa],Jn,Gn]),Sa=hr[Aa]}else if(Ye==="left"){p=[],Pn=Fe.length;for(var di=0;di<Pn;di++)p.push(Fe[di])}else if(Ye==="justify"&&ci.encoding==="Identity-H"){p=[],Pn=Fe.length,bt=bt!==0?bt:ui;for(var Cs=0,on=0;on<Pn;on++)if(Gn=on===0?ea(K):-rs,Jn=on===0?Zr(A):Cs,on<Pn-1){var no=ee((bt-hr[on])/(Fe[on].split(" ").length-1)),Br=Fe[on].split(" ");p.push([Br[0]+" ",Jn,Gn]),Cs=0;for(var jr=1;jr<Br.length;jr++){var hi=(as(Br[jr-1]+" "+Br[jr])-as(Br[jr]))*kr+no;jr==Br.length-1?p.push([Br[jr],hi,0]):p.push([Br[jr]+" ",hi,0]),Cs-=hi}}else p.push([Fe[on],Jn,Gn]);p.push(["",Cs,0])}else{if(Ye!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(p=[],Pn=Fe.length,bt=bt!==0?bt:ui,on=0;on<Pn;on++){Gn=on===0?ea(K):-rs,Jn=on===0?Zr(A):0;var fi=Fe[on].split(" ").length-1,pi=fi>0?(bt-hr[on])/fi:0;on<Pn-1?xa.push(re(ee(pi))):xa.push(0),p.push([Fe[on],Jn,Gn])}}}(typeof ie.R2L=="boolean"?ie.R2L:Ue)===!0&&(p=Ls(p,function(Ft,jt,ln){return[Ft.split("").reverse().join(""),jt,ln]})),Pe={text:p,x:A,y:K,options:ie,mutex:{pdfEscape:cr,activeFontKey:ze,fonts:ht,activeFontSize:ae}},Rt.publish("postProcessText",Pe),p=Pe.text,gn=Pe.mutex.isHex||!1;var vi=ht[ze].encoding;vi!=="WinAnsiEncoding"&&vi!=="StandardEncoding"||(p=Ls(p,function(Ft,jt,ln){return[ia(Ft),jt,ln]})),Fe=ii(p),p=[];for(var La,Na,Ca,ss=Array.isArray(Fe[0])?1:0,Pa="",is=function(Ft,jt,ln){var _n="";return ln instanceof at?(ln=typeof ie.angle=="number"?Yr(ln,new at(1,0,0,1,Ft,jt)):Yr(new at(1,0,0,1,Ft,jt),ln),M===H&&(ln=Yr(new at(1,0,0,-1,0,0),ln)),_n=ln.join(" ")+` Tm
`):_n=re(Ft)+" "+re(jt)+` Td
`,_n},fr=0;fr<Fe.length;fr++){switch(Pa="",ss){case 1:Ca=(gn?"<":"(")+Fe[fr][0]+(gn?">":")"),La=parseFloat(Fe[fr][1]),Na=parseFloat(Fe[fr][2]);break;case 0:Ca=(gn?"<":"(")+Fe[fr]+(gn?">":")"),La=Zr(A),Na=ea(K)}xa!==void 0&&xa[fr]!==void 0&&(Pa=xa[fr]+` Tw
`),fr===0?p.push(Pa+is(La,Na,vn)+Ca):ss===0?p.push(Pa+Ca):ss===1&&p.push(Pa+is(La,Na,vn)+Ca)}p=ss===0?p.join(` Tj
T* `):p.join(` Tj
`),p+=` Tj
`;var Dr=`BT
/`;return Dr+=ze+" "+ae+` Tf
`,Dr+=re(ae*sa)+` TL
`,Dr+=Ya+`
`,Dr+=Cn,Dr+=p,_(Dr+="ET"),w[ze]=!0,Vt};var el=v.__private__.clip=v.clip=function(p){return _(p==="evenodd"?"W*":"W"),this};v.clipEvenOdd=function(){return el("evenodd")},v.__private__.discardPath=v.discardPath=function(){return _("n"),this};var Or=v.__private__.isValidStyle=function(p){var A=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(p)!==-1&&(A=!0),A};v.__private__.setDefaultPathOperation=v.setDefaultPathOperation=function(p){return Or(p)&&(h=p),this};var Gi=v.__private__.getStyle=v.getStyle=function(p){var A=h;switch(p){case"D":case"S":A="S";break;case"F":A="f";break;case"FD":case"DF":A="B";break;case"f":case"f*":case"B":case"B*":A=p}return A},Ji=v.close=function(){return _("h"),this};v.stroke=function(){return _("S"),this},v.fill=function(p){return xs("f",p),this},v.fillEvenOdd=function(p){return xs("f*",p),this},v.fillStroke=function(p){return xs("B",p),this},v.fillStrokeEvenOdd=function(p){return xs("B*",p),this};var xs=function(p,A){Bt(A)==="object"?nl(A,p):_(p)},Ja=function(p){p===null||M===H&&p===void 0||(p=Gi(p),_(p))};function tl(p,A,K,ie,me){var Pe=new js(A||this.boundingBox,K||this.xStep,ie||this.yStep,this.gState,me||this.matrix);Pe.stream=this.stream;var Fe=p+"$$"+this.cloneIndex+++"$$";return or(Fe,Pe),Pe}var nl=function(p,A){var K=Ht[p.key],ie=nt[K];if(ie instanceof us)_("q"),_(rl(A)),ie.gState&&v.setGState(ie.gState),_(p.matrix.toString()+" cm"),_("/"+K+" sh"),_("Q");else if(ie instanceof js){var me=new at(1,0,0,-1,0,Xa());p.matrix&&(me=me.multiply(p.matrix||Qr),K=tl.call(ie,p.key,p.boundingBox,p.xStep,p.yStep,me).id),_("q"),_("/Pattern cs"),_("/"+K+" scn"),ie.gState&&v.setGState(ie.gState),_(A),_("Q")}},rl=function(p){switch(p){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Xs=v.moveTo=function(p,A){return _(re(ee(p))+" "+re(Z(A))+" m"),this},Ki=v.lineTo=function(p,A){return _(re(ee(p))+" "+re(Z(A))+" l"),this},_r=v.curveTo=function(p,A,K,ie,me,Pe){return _([re(ee(p)),re(Z(A)),re(ee(K)),re(Z(ie)),re(ee(me)),re(Z(Pe)),"c"].join(" ")),this};v.__private__.line=v.line=function(p,A,K,ie,me){if(isNaN(p)||isNaN(A)||isNaN(K)||isNaN(ie)||!Or(me))throw new Error("Invalid arguments passed to jsPDF.line");return M===P?this.lines([[K-p,ie-A]],p,A,[1,1],me||"S"):this.lines([[K-p,ie-A]],p,A,[1,1]).stroke()},v.__private__.lines=v.lines=function(p,A,K,ie,me,Pe){var Fe,Ge,Ye,ft,bt,It,Zt,vn,Vt,wn,gn,Cn;if(typeof p=="number"&&(Cn=K,K=A,A=p,p=Cn),ie=ie||[1,1],Pe=Pe||!1,isNaN(A)||isNaN(K)||!Array.isArray(p)||!Array.isArray(ie)||!Or(me)||typeof Pe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Xs(A,K),Fe=ie[0],Ge=ie[1],ft=p.length,wn=A,gn=K,Ye=0;Ye<ft;Ye++)(bt=p[Ye]).length===2?(wn=bt[0]*Fe+wn,gn=bt[1]*Ge+gn,Ki(wn,gn)):(It=bt[0]*Fe+wn,Zt=bt[1]*Ge+gn,vn=bt[2]*Fe+wn,Vt=bt[3]*Ge+gn,wn=bt[4]*Fe+wn,gn=bt[5]*Ge+gn,_r(It,Zt,vn,Vt,wn,gn));return Pe&&Ji(),Ja(me),this},v.path=function(p){for(var A=0;A<p.length;A++){var K=p[A],ie=K.c;switch(K.op){case"m":Xs(ie[0],ie[1]);break;case"l":Ki(ie[0],ie[1]);break;case"c":_r.apply(this,ie);break;case"h":Ji()}}return this},v.__private__.rect=v.rect=function(p,A,K,ie,me){if(isNaN(p)||isNaN(A)||isNaN(K)||isNaN(ie)||!Or(me))throw new Error("Invalid arguments passed to jsPDF.rect");return M===P&&(ie=-ie),_([re(ee(p)),re(Z(A)),re(ee(K)),re(ee(ie)),"re"].join(" ")),Ja(me),this},v.__private__.triangle=v.triangle=function(p,A,K,ie,me,Pe,Fe){if(isNaN(p)||isNaN(A)||isNaN(K)||isNaN(ie)||isNaN(me)||isNaN(Pe)||!Or(Fe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[K-p,ie-A],[me-K,Pe-ie],[p-me,A-Pe]],p,A,[1,1],Fe,!0),this},v.__private__.roundedRect=v.roundedRect=function(p,A,K,ie,me,Pe,Fe){if(isNaN(p)||isNaN(A)||isNaN(K)||isNaN(ie)||isNaN(me)||isNaN(Pe)||!Or(Fe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ge=4/3*(Math.SQRT2-1);return me=Math.min(me,.5*K),Pe=Math.min(Pe,.5*ie),this.lines([[K-2*me,0],[me*Ge,0,me,Pe-Pe*Ge,me,Pe],[0,ie-2*Pe],[0,Pe*Ge,-me*Ge,Pe,-me,Pe],[2*me-K,0],[-me*Ge,0,-me,-Pe*Ge,-me,-Pe],[0,2*Pe-ie],[0,-Pe*Ge,me*Ge,-Pe,me,-Pe]],p+me,A,[1,1],Fe,!0),this},v.__private__.ellipse=v.ellipse=function(p,A,K,ie,me){if(isNaN(p)||isNaN(A)||isNaN(K)||isNaN(ie)||!Or(me))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Pe=4/3*(Math.SQRT2-1)*K,Fe=4/3*(Math.SQRT2-1)*ie;return Xs(p+K,A),_r(p+K,A-Fe,p+Pe,A-ie,p,A-ie),_r(p-Pe,A-ie,p-K,A-Fe,p-K,A),_r(p-K,A+Fe,p-Pe,A+ie,p,A+ie),_r(p+Pe,A+ie,p+K,A+Fe,p+K,A),Ja(me),this},v.__private__.circle=v.circle=function(p,A,K,ie){if(isNaN(p)||isNaN(A)||isNaN(K)||!Or(ie))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(p,A,K,K,ie)},v.setFont=function(p,A,K){return K&&(A=pe(A,K)),ze=zi(p,A,{disableWarning:!1}),this};var al=v.__private__.getFont=v.getFont=function(){return ht[zi.apply(v,arguments)]};v.__private__.getFontList=v.getFontList=function(){var p,A,K={};for(p in yt)if(yt.hasOwnProperty(p))for(A in K[p]=[],yt[p])yt[p].hasOwnProperty(A)&&K[p].push(A);return K},v.addFont=function(p,A,K,ie,me){var Pe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Pe.indexOf(arguments[3])!==-1?me=arguments[3]:arguments[3]&&Pe.indexOf(arguments[3])==-1&&(K=pe(K,ie)),ji.call(this,p,A,K,me=me||"Identity-H")};var Ka,Zs=t.lineWidth||.200025,sl=v.__private__.getLineWidth=v.getLineWidth=function(){return Zs},pt=v.__private__.setLineWidth=v.setLineWidth=function(p){return Zs=p,_(re(ee(p))+" w"),this};v.__private__.setLineDash=Xe.API.setLineDash=Xe.API.setLineDashPattern=function(p,A){if(p=p||[],A=A||0,isNaN(A)||!Array.isArray(p))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return p=p.map(function(K){return re(ee(K))}).join(" "),A=re(ee(A)),_("["+p+"] "+A+" d"),this};var il=v.__private__.getLineHeight=v.getLineHeight=function(){return ae*Ka};v.__private__.getLineHeight=v.getLineHeight=function(){return ae*Ka};var ol=v.__private__.setLineHeightFactor=v.setLineHeightFactor=function(p){return typeof(p=p||1.15)=="number"&&(Ka=p),this},ll=v.__private__.getLineHeightFactor=v.getLineHeightFactor=function(){return Ka};ol(t.lineHeight);var Zr=v.__private__.getHorizontalCoordinate=function(p){return ee(p)},ea=v.__private__.getVerticalCoordinate=function(p){return M===H?p:rt[V].mediaBox.topRightY-rt[V].mediaBox.bottomLeftY-ee(p)},ul=v.__private__.getHorizontalCoordinateString=v.getHorizontalCoordinateString=function(p){return re(Zr(p))},cl=v.__private__.getVerticalCoordinateString=v.getVerticalCoordinateString=function(p){return re(ea(p))},Ss=t.strokeColor||"0 G";v.__private__.getStrokeColor=v.getDrawColor=function(){return Fr(Ss)},v.__private__.setStrokeColor=v.setDrawColor=function(p,A,K,ie){return Ss=yr({ch1:p,ch2:A,ch3:K,ch4:ie,pdfColorType:"draw",precision:2}),_(Ss),this};var ei=t.fillColor||"0 g";v.__private__.getFillColor=v.getFillColor=function(){return Fr(ei)},v.__private__.setFillColor=v.setFillColor=function(p,A,K,ie){return ei=yr({ch1:p,ch2:A,ch3:K,ch4:ie,pdfColorType:"fill",precision:2}),_(ei),this};var Ya=t.textColor||"0 g",dl=v.__private__.getTextColor=v.getTextColor=function(){return Fr(Ya)};v.__private__.setTextColor=v.setTextColor=function(p,A,K,ie){return Ya=yr({ch1:p,ch2:A,ch3:K,ch4:ie,pdfColorType:"text",precision:3}),this};var ta=t.charSpace,hl=v.__private__.getCharSpace=v.getCharSpace=function(){return parseFloat(ta||0)};v.__private__.setCharSpace=v.setCharSpace=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ta=p,this};var ti=0;v.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},v.__private__.setLineCap=v.setLineCap=function(p){var A=v.CapJoinStyles[p];if(A===void 0)throw new Error("Line cap style of '"+p+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ti=A,_(A+" J"),this};var ni=0;v.__private__.setLineJoin=v.setLineJoin=function(p){var A=v.CapJoinStyles[p];if(A===void 0)throw new Error("Line join style of '"+p+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ni=A,_(A+" j"),this},v.__private__.setLineMiterLimit=v.__private__.setMiterLimit=v.setLineMiterLimit=v.setMiterLimit=function(p){if(p=p||0,isNaN(p))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return _(re(ee(p))+" M"),this},v.GState=Ho,v.setGState=function(p){(p=typeof p=="string"?it[gt[p]]:Yi(null,p)).equals(Qt)||(_("/"+p.id+" gs"),Qt=p)};var Yi=function(p,A){if(!p||!gt[p]){var K=!1;for(var ie in it)if(it.hasOwnProperty(ie)&&it[ie].equals(A)){K=!0;break}if(K)A=it[ie];else{var me="GS"+(Object.keys(it).length+1).toString(10);it[me]=A,A.id=me}return p&&(gt[p]=A.id),Rt.publish("addGState",A),A}};v.addGState=function(p,A){return Yi(p,A),this},v.saveGraphicsState=function(){return _("q"),zt.push({key:ze,size:ae,color:Ya}),this},v.restoreGraphicsState=function(){_("Q");var p=zt.pop();return ze=p.key,ae=p.size,Ya=p.color,Qt=null,this},v.setCurrentTransformationMatrix=function(p){return _(p.toString()+" cm"),this},v.comment=function(p){return _("#"+p),this};var na=function(p,A){var K=p||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return K},set:function(Pe){isNaN(Pe)||(K=parseFloat(Pe))}});var ie=A||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ie},set:function(Pe){isNaN(Pe)||(ie=parseFloat(Pe))}});var me="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return me},set:function(Pe){me=Pe.toString()}}),this},ri=function(p,A,K,ie){na.call(this,p,A),this.type="rect";var me=K||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return me},set:function(Fe){isNaN(Fe)||(me=parseFloat(Fe))}});var Pe=ie||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Pe},set:function(Fe){isNaN(Fe)||(Pe=parseFloat(Fe))}}),this},As=function(){this.page=Lt,this.currentPage=V,this.pages=te.slice(0),this.pagesContext=rt.slice(0),this.x=De,this.y=kt,this.matrix=xt,this.width=si(V),this.height=Xi(V),this.outputDestination=be,this.id="",this.objectNumber=-1};As.prototype.restore=function(){Lt=this.page,V=this.currentPage,rt=this.pagesContext,te=this.pages,De=this.x,kt=this.y,xt=this.matrix,Qi(V,this.width),ra(V,this.height),be=this.outputDestination};var ai=function(p,A,K,ie,me){Rr.push(new As),Lt=V=0,te=[],De=p,kt=A,xt=me,Ys([K,ie])};for(var Qa in v.beginFormObject=function(p,A,K,ie,me){return ai(p,A,K,ie,me),this},v.endFormObject=function(p){return function(A){if(Kr[A])Rr.pop().restore();else{var K=new As,ie="Xo"+(Object.keys(Fn).length+1).toString(10);K.id=ie,Kr[A]=ie,Fn[ie]=K,Rt.publish("addFormObject",K),Rr.pop().restore()}}(p),this},v.doFormObject=function(p,A){var K=Fn[Kr[p]];return _("q"),_(A.toString()+" cm"),_("/"+K.id+" Do"),_("Q"),this},v.getFormObject=function(p){var A=Fn[Kr[p]];return{x:A.x,y:A.y,width:A.width,height:A.height,matrix:A.matrix}},v.save=function(p,A){return p=p||"generated.pdf",(A=A||{}).returnPromise=A.returnPromise||!1,A.returnPromise===!1?(ls(ks(Mr()),p),typeof ls.unload=="function"&&ot.setTimeout&&setTimeout(ls.unload,911),this):new Promise(function(K,ie){try{var me=ls(ks(Mr()),p);typeof ls.unload=="function"&&ot.setTimeout&&setTimeout(ls.unload,911),K(me)}catch(Pe){ie(Pe.message)}})},Xe.API)Xe.API.hasOwnProperty(Qa)&&(Qa==="events"&&Xe.API.events.length?function(p,A){var K,ie,me;for(me=A.length-1;me!==-1;me--)K=A[me][0],ie=A[me][1],p.subscribe.apply(p,[K].concat(typeof ie=="function"?[ie]:ie))}(Rt,Xe.API.events):v[Qa]=Xe.API[Qa]);function si(p){return rt[p].mediaBox.topRightX-rt[p].mediaBox.bottomLeftX}function Qi(p,A){rt[p].mediaBox.topRightX=A+rt[p].mediaBox.bottomLeftX}function Xi(p){return rt[p].mediaBox.topRightY-rt[p].mediaBox.bottomLeftY}function ra(p,A){rt[p].mediaBox.topRightY=A+rt[p].mediaBox.bottomLeftY}var aa=v.getPageWidth=function(p){return si(p=p||V)/dt},Zi=v.setPageWidth=function(p,A){Qi(p,A*dt)},Xa=v.getPageHeight=function(p){return Xi(p=p||V)/dt},eo=v.setPageHeight=function(p,A){ra(p,A*dt)};return v.internal={pdfEscape:cr,getStyle:Gi,getFont:al,getFontSize:Be,getCharSpace:hl,getTextColor:dl,getLineHeight:il,getLineHeightFactor:ll,getLineWidth:sl,write:se,getHorizontalCoordinate:Zr,getVerticalCoordinate:ea,getCoordinateString:ul,getVerticalCoordinateString:cl,collections:{},newObject:nn,newAdditionalObject:Va,newObjectDeferred:An,newObjectDeferredBegin:Nn,getFilters:wr,putStream:ur,events:Rt,scaleFactor:dt,pageSize:{getWidth:function(){return aa(V)},setWidth:function(p){Zi(V,p)},getHeight:function(){return Xa(V)},setHeight:function(p){eo(V,p)}},encryptionOptions:f,encryption:yn,getEncryptor:function(p){return f!==null?yn.encryptor(p,0):function(A){return A}},output:Vi,getNumberOfPages:Ui,get pages(){return te},out:_,f2:F,f3:B,getPageInfo:Xr,getPageInfoByObjId:Wi,getCurrentPageInfo:Zo,getPDFVersion:k,Point:na,Rectangle:ri,Matrix:at,hasHotfix:dr},Object.defineProperty(v.internal.pageSize,"width",{get:function(){return aa(V)},set:function(p){Zi(V,p)},enumerable:!0,configurable:!0}),Object.defineProperty(v.internal.pageSize,"height",{get:function(){return Xa(V)},set:function(p){eo(V,p)},enumerable:!0,configurable:!0}),(function(p){for(var A=0,K=Y.length;A<K;A++){var ie=ji.call(this,p[A][0],p[A][1],p[A][2],Y[A][3],!0);m===!1&&(w[ie]=!0);var me=p[A][0].split("-");Bi({id:ie,fontName:me[0],fontStyle:me[1]||""})}Rt.publish("addFonts",{fonts:ht,dictionary:yt})}).call(v,Y),ze="F1",Di(a,n),Rt.publish("initialized"),v}Os.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},Os.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Os.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Os.prototype.processOwnerPassword=function(t,e){return gu(vu(e).substr(0,5),t)},Os.prototype.encryptor=function(t,e){var n=vu(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return gu(n,r)}},Ho.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Bt(t)!==Bt(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},Xe.API={events:[]},Xe.version="3.0.4";var sn=Xe.API,Lu=1,ms=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Rs=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},vt=function(t){return t.toFixed(2)},Ba=function(t){return t.toFixed(5)};sn.__acroform__={};var Wn=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},Nd=function(t){return t*Lu},zr=function(t){var e=new J1,n=We.internal.getHeight(t)||0,r=We.internal.getWidth(t)||0;return e.BBox=[0,0,Number(vt(r)),Number(vt(n))],e},D5=sn.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},$5=sn.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},U5=sn.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},dn=sn.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return U5(t,e-1)},hn=sn.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return D5(t,e-1)},fn=sn.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return $5(t,e-1)},z5=sn.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,a=t[0],s=t[1],u=t[2],o=t[3],c={};return c.lowerLeft_X=n(a)||0,c.lowerLeft_Y=r(s+o)||0,c.upperRight_X=n(a+u)||0,c.upperRight_Y=r(s)||0,[Number(vt(c.lowerLeft_X)),Number(vt(c.lowerLeft_Y)),Number(vt(c.upperRight_X)),Number(vt(c.upperRight_Y))]},H5=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=mu(t,n),a=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+a+" "+vt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=zr(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},mu=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=t.multiline?a.map(function(F){return F.split(`
`)}):a.map(function(F){return[F]});var s=n,u=We.internal.getHeight(t)||0;u=u<0?-u:u;var o=We.internal.getWidth(t)||0;o=o<0?-o:o;var c=function(F,B,ee){if(F+1<a.length){var Z=B+" "+a[F+1][0];return Po(Z,t,ee).width<=o-4}return!1};s++;e:for(;s>0;){e="",s--;var h,f,m=Po("3",t,s).height,w=t.multiline?u-s:(u-m)/2,v=w+=2,y=0,k=0,L=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+Po(e,t,s=12).width+", FieldWidth:"+o+`
`;break}for(var x="",P=0,H=0;H<a.length;H++)if(a.hasOwnProperty(H)){var M=!1;if(a[H].length!==1&&L!==a[H].length-1){if((m+2)*(P+2)+2>u)continue e;x+=a[H][L],M=!0,k=H,H--}else{x=(x+=a[H][L]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var oe=parseInt(H),fe=c(oe,x,s),pe=H>=a.length-1;if(fe&&!pe){x+=" ",L=0;continue}if(fe||pe){if(pe)k=oe;else if(t.multiline&&(m+2)*(P+2)+2>u)continue e}else{if(!t.multiline||(m+2)*(P+2)+2>u)continue e;k=oe}}for(var re="",$=y;$<=k;$++){var ce=a[$];if(t.multiline){if($===k){re+=ce[L]+" ",L=(L+1)%ce.length;continue}if($===y){re+=ce[ce.length-1]+" ";continue}}re+=ce[0]+" "}switch(re=re.substr(re.length-1)==" "?re.substr(0,re.length-1):re,f=Po(re,t,s).width,t.textAlign){case"right":h=o-f-2;break;case"center":h=(o-f)/2;break;default:h=2}e+=vt(h)+" "+vt(v)+` Td
`,e+="("+ms(re)+`) Tj
`,e+=-vt(h)+` 0 Td
`,v=-(s+2),f=0,y=M?k:k+1,P++,x=""}break}return r.text=e,r.fontSize=s,r},Po=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:a}},V5={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},W5=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},G5=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Ir.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(V5)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Lu=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new K1,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in r)if(r.hasOwnProperty(a)){var s=r[a];s.objId=void 0,s.hasAnnotation&&W5(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,a){var s=!r;for(var u in r||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(u)){var o=r[u],c=[],h=o.Rect;if(o.Rect&&(o.Rect=z5(o.Rect,a)),a.internal.newObjectDeferredBegin(o.objId,!0),o.DA=We.createDefaultAppearanceStream(o),Bt(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(c=o.getKeyValueListForStream()),o.Rect=h,o.hasAppearanceStream&&!o.appearanceStreamContent){var f=H5(o);c.push({key:"AP",value:"<</N "+f+">>"}),a.internal.acroformPlugin.xForms.push(f)}if(o.appearanceStreamContent){var m="";for(var w in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(w)){var v=o.appearanceStreamContent[w];if(m+="/"+w+" ",m+="<<",Object.keys(v).length>=1||Array.isArray(v)){for(var u in v)if(v.hasOwnProperty(u)){var y=v[u];typeof y=="function"&&(y=y.call(a,o)),m+="/"+u+" "+y+" ",a.internal.acroformPlugin.xForms.indexOf(y)>=0||a.internal.acroformPlugin.xForms.push(y)}}else typeof(y=v)=="function"&&(y=y.call(a,o)),m+="/"+u+" "+y,a.internal.acroformPlugin.xForms.indexOf(y)>=0||a.internal.acroformPlugin.xForms.push(y);m+=">>"}c.push({key:"AP",value:`<<
`+m+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:o.objId}),a.internal.out("endobj")}s&&function(k,L){for(var x in k)if(k.hasOwnProperty(x)){var P=x,H=k[x];L.internal.newObjectDeferredBegin(H.objId,!0),Bt(H)==="object"&&typeof H.putStream=="function"&&H.putStream(),delete k[P]}}(a.internal.acroformPlugin.xForms,a)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},G1=sn.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(u){return u};if(Array.isArray(t)){for(var a="[",s=0;s<t.length;s++)switch(s!==0&&(a+=" "),Bt(t[s])){case"boolean":case"number":case"object":a+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),a+="("+ms(r(t[s].toString()))+")"):a+=t[s].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Yl=function(t,e,n){var r=function(a){return a};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),"("+ms(r(t))+")"},Hr=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Hr.prototype.toString=function(){return this.objId+" 0 R"},Hr.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Hr.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],a=this[r];a&&(Array.isArray(a)?t.push({key:r,value:G1(a,this.objId,this.scope)}):a instanceof Hr?(a.scope=this.scope,t.push({key:r,value:a.objId+" 0 R"})):typeof a!="function"&&t.push({key:r,value:a}))}return t};var J1=function(){Hr.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Wn(J1,Hr);var K1=function(){Hr.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+ms(n(t))+")"}},set:function(n){t=n}})};Wn(K1,Hr);var Ir=function t(){Hr.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');e=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!dn(e,3)},set:function(x){x?this.F=hn(e,3):this.F=fn(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');n=x}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(x){r=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(x){r[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(x){r[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(x){r[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(x){r[3]=x}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Vo)return;s="FieldObject"+t.FieldNum++}var x=function(P){return P};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+ms(x(s))+")"},set:function(x){s=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(x){s=x}});var u="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return u},set:function(x){u=x}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(x){o=x}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(x){c=x}});var h=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return h===void 0?50/Lu:h},set:function(x){h=x}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(x){f=x}});var m="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!m||this instanceof Vo||this instanceof hs))return Yl(m,this.objId,this.scope)},set:function(x){x=x.toString(),m=x}});var w=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(w)return this instanceof Ln==0?Yl(w,this.objId,this.scope):w},set:function(x){x=x.toString(),w=this instanceof Ln==0?x.substr(0,1)==="("?Rs(x.substr(1,x.length-2)):Rs(x):x}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ln==1?Rs(w.substr(1,w.length-1)):w},set:function(x){x=x.toString(),w=this instanceof Ln==1?"/"+x:x}});var v=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(v)return v},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof Ln==0?Yl(v,this.objId,this.scope):v},set:function(x){x=x.toString(),v=this instanceof Ln==0?x.substr(0,1)==="("?Rs(x.substr(1,x.length-2)):Rs(x):x}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ln==1?Rs(v.substr(1,v.length-1)):v},set:function(x){x=x.toString(),v=this instanceof Ln==1?"/"+x:x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,k=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return k},set:function(x){x=!!x,k=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(x){y=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,1)},set:function(x){x?this.Ff=hn(this.Ff,1):this.Ff=fn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,2)},set:function(x){x?this.Ff=hn(this.Ff,2):this.Ff=fn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,3)},set:function(x){x?this.Ff=hn(this.Ff,3):this.Ff=fn(this.Ff,3)}});var L=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(L!==null)return L},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');L=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(L){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:L=2;break;case"center":case 1:L=1;break;default:L=0}}})};Wn(Ir,Hr);var Ds=function(){Ir.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return G1(e,this.objId,this.scope)},set:function(n){var r,a;a=[],typeof(r=n)=="string"&&(a=function(s,u,o){o||(o=1);for(var c,h=[];c=u.exec(s);)h.push(c[o]);return h}(r,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,18)},set:function(n){n?this.Ff=hn(this.Ff,18):this.Ff=fn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=hn(this.Ff,19):this.Ff=fn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,20)},set:function(n){n?(this.Ff=hn(this.Ff,20),e.sort()):this.Ff=fn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,22)},set:function(n){n?this.Ff=hn(this.Ff,22):this.Ff=fn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,23)},set:function(n){n?this.Ff=hn(this.Ff,23):this.Ff=fn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,27)},set:function(n){n?this.Ff=hn(this.Ff,27):this.Ff=fn(this.Ff,27)}}),this.hasAppearanceStream=!1};Wn(Ds,Ir);var $s=function(){Ds.call(this),this.fontName="helvetica",this.combo=!1};Wn($s,Ds);var Us=function(){$s.call(this),this.combo=!0};Wn(Us,$s);var Mo=function(){Us.call(this),this.edit=!0};Wn(Mo,Us);var Ln=function(){Ir.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,15)},set:function(n){n?this.Ff=hn(this.Ff,15):this.Ff=fn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,16)},set:function(n){n?this.Ff=hn(this.Ff,16):this.Ff=fn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,17)},set:function(n){n?this.Ff=hn(this.Ff,17):this.Ff=fn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,26)},set:function(n){n?this.Ff=hn(this.Ff,26):this.Ff=fn(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,a=[];for(r in a.push("<<"),e)a.push("/"+r+" ("+ms(n(e[r]))+")");return a.push(">>"),a.join(`
`)}},set:function(n){Bt(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Wn(Ln,Ir);var Oo=function(){Ln.call(this),this.pushButton=!0};Wn(Oo,Ln);var zs=function(){Ln.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Wn(zs,Ln);var Vo=function(){var t,e;Ir.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(o){return o};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,u=[];for(s in u.push("<<"),r)u.push("/"+s+" ("+ms(a(r[s]))+")");return u.push(">>"),u.join(`
`)},set:function(a){Bt(a)==="object"&&(r=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(a){typeof a=="string"&&(r.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(a){n=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(a){n="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=We.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Wn(Vo,Ir),zs.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},zs.prototype.createOption=function(t){var e=new Vo;return e.Parent=this,e.optionName=t,this.Kids.push(e),J5.call(this.scope,e),e};var Bo=function(){Ln.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=We.CheckBox.createAppearanceStream()};Wn(Bo,Ln);var hs=function(){Ir.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,13)},set:function(e){e?this.Ff=hn(this.Ff,13):this.Ff=fn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,21)},set:function(e){e?this.Ff=hn(this.Ff,21):this.Ff=fn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,23)},set:function(e){e?this.Ff=hn(this.Ff,23):this.Ff=fn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,24)},set:function(e){e?this.Ff=hn(this.Ff,24):this.Ff=fn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,25)},set:function(e){e?this.Ff=hn(this.Ff,25):this.Ff=fn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,26)},set:function(e){e?this.Ff=hn(this.Ff,26):this.Ff=fn(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Wn(hs,Ir);var jo=function(){hs.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,14)},set:function(t){t?this.Ff=hn(this.Ff,14):this.Ff=fn(this.Ff,14)}}),this.password=!0};Wn(jo,hs);var We={CheckBox:{createAppearanceStream:function(){return{N:{On:We.CheckBox.YesNormal},D:{On:We.CheckBox.YesPushDown,Off:We.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=zr(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),s=mu(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+vt(We.internal.getWidth(t))+" "+vt(We.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+vt(s.fontSize)+" Tf "+a),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=zr(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),a=[],s=We.internal.getHeight(t),u=We.internal.getWidth(t),o=mu(t,t.caption);return a.push("1 g"),a.push("0 0 "+vt(u)+" "+vt(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+vt(u-1)+" "+vt(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+n+" "+vt(o.fontSize)+" Tf "+r),a.push(o.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(t){var e=zr(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+vt(We.internal.getWidth(t))+" "+vt(We.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:We.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=We.RadioButton.Circle.YesNormal,e.D[t]=We.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=zr(t);e.scope=t.scope;var n=[],r=We.internal.getWidth(t)<=We.internal.getHeight(t)?We.internal.getWidth(t)/4:We.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var a=We.internal.Bezier_C,s=Number((r*a).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Ba(We.internal.getWidth(t)/2)+" "+Ba(We.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=zr(t);e.scope=t.scope;var n=[],r=We.internal.getWidth(t)<=We.internal.getHeight(t)?We.internal.getWidth(t)/4:We.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var a=Number((2*r).toFixed(5)),s=Number((a*We.internal.Bezier_C).toFixed(5)),u=Number((r*We.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Ba(We.internal.getWidth(t)/2)+" "+Ba(We.internal.getHeight(t)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),n.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),n.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),n.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Ba(We.internal.getWidth(t)/2)+" "+Ba(We.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+u+" "+u+" "+r+" 0 "+r+" c"),n.push("-"+u+" "+r+" -"+r+" "+u+" -"+r+" 0 c"),n.push("-"+r+" -"+u+" -"+u+" -"+r+" 0 -"+r+" c"),n.push(u+" -"+r+" "+r+" -"+u+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=zr(t);e.scope=t.scope;var n=[],r=We.internal.getWidth(t)<=We.internal.getHeight(t)?We.internal.getWidth(t)/4:We.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var a=Number((2*r).toFixed(5)),s=Number((a*We.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Ba(We.internal.getWidth(t)/2)+" "+Ba(We.internal.getHeight(t)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),n.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),n.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),n.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:We.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=We.RadioButton.Cross.YesNormal,e.D[t]=We.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=zr(t);e.scope=t.scope;var n=[],r=We.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+vt(We.internal.getWidth(t)-2)+" "+vt(We.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(vt(r.x1.x)+" "+vt(r.x1.y)+" m"),n.push(vt(r.x2.x)+" "+vt(r.x2.y)+" l"),n.push(vt(r.x4.x)+" "+vt(r.x4.y)+" m"),n.push(vt(r.x3.x)+" "+vt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=zr(t);e.scope=t.scope;var n=We.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+vt(We.internal.getWidth(t))+" "+vt(We.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+vt(We.internal.getWidth(t)-2)+" "+vt(We.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(vt(n.x1.x)+" "+vt(n.x1.y)+" m"),r.push(vt(n.x2.x)+" "+vt(n.x2.y)+" l"),r.push(vt(n.x4.x)+" "+vt(n.x4.y)+" m"),r.push(vt(n.x3.x)+" "+vt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=zr(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+vt(We.internal.getWidth(t))+" "+vt(We.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};We.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=We.internal.getWidth(t),n=We.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},We.internal.getWidth=function(t){var e=0;return Bt(t)==="object"&&(e=Nd(t.Rect[2])),e},We.internal.getHeight=function(t){var e=0;return Bt(t)==="object"&&(e=Nd(t.Rect[3])),e};var J5=sn.addField=function(t){if(G5(this,t),!(t instanceof Ir))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};sn.AcroFormChoiceField=Ds,sn.AcroFormListBox=$s,sn.AcroFormComboBox=Us,sn.AcroFormEditBox=Mo,sn.AcroFormButton=Ln,sn.AcroFormPushButton=Oo,sn.AcroFormRadioButton=zs,sn.AcroFormCheckBox=Bo,sn.AcroFormTextField=hs,sn.AcroFormPasswordField=jo,sn.AcroFormAppearance=We,sn.AcroForm={ChoiceField:Ds,ListBox:$s,ComboBox:Us,EditBox:Mo,Button:Ln,PushButton:Oo,RadioButton:zs,CheckBox:Bo,TextField:hs,PasswordField:jo,Appearance:We},Xe.AcroForm={ChoiceField:Ds,ListBox:$s,ComboBox:Us,EditBox:Mo,Button:Ln,PushButton:Oo,RadioButton:zs,CheckBox:Bo,TextField:hs,PasswordField:jo,Appearance:We};Xe.AcroForm;function Y1(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){var e="addImage_";t.__addimage__={};var n="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=t.__addimage__.getImageFileTypeByImageData=function(F,B){var ee,Z,de,ge,ke,ve=n;if((B=B||n)==="RGBA"||F.data!==void 0&&F.data instanceof Uint8ClampedArray&&"height"in F&&"width"in F)return"RGBA";if(fe(F))for(ke in r)for(de=r[ke],ee=0;ee<de.length;ee+=1){for(ge=!0,Z=0;Z<de[ee].length;Z+=1)if(de[ee][Z]!==void 0&&de[ee][Z]!==F[Z]){ge=!1;break}if(ge===!0){ve=ke;break}}else for(ke in r)for(de=r[ke],ee=0;ee<de.length;ee+=1){for(ge=!0,Z=0;Z<de[ee].length;Z+=1)if(de[ee][Z]!==void 0&&de[ee][Z]!==F.charCodeAt(Z)){ge=!1;break}if(ge===!0){ve=ke;break}}return ve===n&&B!==n&&(ve=B),ve},s=function F(B){for(var ee=this.internal.write,Z=this.internal.putStream,de=(0,this.internal.getFilters)();de.indexOf("FlateEncode")!==-1;)de.splice(de.indexOf("FlateEncode"),1);B.objectId=this.internal.newObject();var ge=[];if(ge.push({key:"Type",value:"/XObject"}),ge.push({key:"Subtype",value:"/Image"}),ge.push({key:"Width",value:B.width}),ge.push({key:"Height",value:B.height}),B.colorSpace===x.INDEXED?ge.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(B.palette.length/3-1)+" "+("sMask"in B&&B.sMask!==void 0?B.objectId+2:B.objectId+1)+" 0 R]"}):(ge.push({key:"ColorSpace",value:"/"+B.colorSpace}),B.colorSpace===x.DEVICE_CMYK&&ge.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ge.push({key:"BitsPerComponent",value:B.bitsPerComponent}),"decodeParameters"in B&&B.decodeParameters!==void 0&&ge.push({key:"DecodeParms",value:"<<"+B.decodeParameters+">>"}),"transparency"in B&&Array.isArray(B.transparency)&&B.transparency.length>0){for(var ke="",ve=0,Se=B.transparency.length;ve<Se;ve++)ke+=B.transparency[ve]+" "+B.transparency[ve]+" ";ge.push({key:"Mask",value:"["+ke+"]"})}B.sMask!==void 0&&ge.push({key:"SMask",value:B.objectId+1+" 0 R"});var Ee=B.filter!==void 0?["/"+B.filter]:void 0;if(Z({data:B.data,additionalKeyValues:ge,alreadyAppliedFilters:Ee,objectId:B.objectId}),ee("endobj"),"sMask"in B&&B.sMask!==void 0){var Le,I=(Le=B.sMaskBitsPerComponent)!==null&&Le!==void 0?Le:B.bitsPerComponent,V={width:B.width,height:B.height,colorSpace:"DeviceGray",bitsPerComponent:I,data:B.sMask};"filter"in B&&(V.decodeParameters="/Predictor ".concat(B.predictor," /Colors 1 /BitsPerComponent ").concat(I," /Columns ").concat(B.width),V.filter=B.filter),F.call(this,V)}if(B.colorSpace===x.INDEXED){var R=this.internal.newObject();Z({data:re(new Uint8Array(B.palette)),objectId:R}),ee("endobj")}},u=function(){var F=this.internal.collections[e+"images"];for(var B in F)s.call(this,F[B])},o=function(){var F,B=this.internal.collections[e+"images"],ee=this.internal.write;for(var Z in B)ee("/I"+(F=B[Z]).index,F.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",o))},h=function(){var F=this.internal.collections[e+"images"];return c.call(this),F},f=function(){return Object.keys(this.internal.collections[e+"images"]).length},m=function(F){return typeof t["process"+F.toUpperCase()]=="function"},w=function(F){return Bt(F)==="object"&&F.nodeType===1},v=function(F,B){if(F.nodeName==="IMG"&&F.hasAttribute("src")){var ee=""+F.getAttribute("src");if(ee.indexOf("data:image/")===0)return qo(unescape(ee).split("base64,").pop());var Z=t.loadFile(ee,!0);if(Z!==void 0)return Z}if(F.nodeName==="CANVAS"){if(F.width===0||F.height===0)throw new Error("Given canvas must have data. Canvas width: "+F.width+", height: "+F.height);var de;switch(B){case"PNG":de="image/png";break;case"WEBP":de="image/webp";break;default:de="image/jpeg"}return qo(F.toDataURL(de,1).split("base64,").pop())}},y=function(F){var B=this.internal.collections[e+"images"];if(B){for(var ee in B)if(F===B[ee].alias)return B[ee]}},k=function(F,B,ee){return F||B||(F=-96,B=-96),F<0&&(F=-1*ee.width*72/F/this.internal.scaleFactor),B<0&&(B=-1*ee.height*72/B/this.internal.scaleFactor),F===0&&(F=B*ee.width/ee.height),B===0&&(B=F*ee.height/ee.width),[F,B]},L=function(F,B,ee,Z,de,ge){var ke=k.call(this,ee,Z,de),ve=this.internal.getCoordinateString,Se=this.internal.getVerticalCoordinateString,Ee=h.call(this);if(ee=ke[0],Z=ke[1],Ee[de.index]=de,ge){ge*=Math.PI/180;var Le=Math.cos(ge),I=Math.sin(ge),V=function(q){return q.toFixed(4)},R=[V(Le),V(I),V(-1*I),V(Le),0,0,"cm"]}this.internal.write("q"),ge?(this.internal.write([1,"0","0",1,ve(F),Se(B+Z),"cm"].join(" ")),this.internal.write(R.join(" ")),this.internal.write([ve(ee),"0","0",ve(Z),"0","0","cm"].join(" "))):this.internal.write([ve(ee),"0","0",ve(Z),ve(F),Se(B+Z),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+de.index+" Do"),this.internal.write("Q")},x=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var P=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},H=t.__addimage__.sHashCode=function(F){var B,ee,Z=0;if(typeof F=="string")for(ee=F.length,B=0;B<ee;B++)Z=(Z<<5)-Z+F.charCodeAt(B),Z|=0;else if(fe(F))for(ee=F.byteLength/2,B=0;B<ee;B++)Z=(Z<<5)-Z+F[B],Z|=0;return Z},M=t.__addimage__.validateStringAsBase64=function(F){(F=F||"").toString().trim();var B=!0;return F.length===0&&(B=!1),F.length%4!=0&&(B=!1),/^[A-Za-z0-9+/]+$/.test(F.substr(0,F.length-2))===!1&&(B=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(F.substr(-2))===!1&&(B=!1),B},oe=t.__addimage__.extractImageFromDataUrl=function(F){if(F==null||!(F=F.trim()).startsWith("data:"))return null;var B=F.indexOf(",");return B<0?null:F.substring(0,B).trim().endsWith("base64")?F.substring(B+1):null};t.__addimage__.isArrayBuffer=function(F){return F instanceof ArrayBuffer};var fe=t.__addimage__.isArrayBufferView=function(F){return F instanceof Int8Array||F instanceof Uint8Array||F instanceof Uint8ClampedArray||F instanceof Int16Array||F instanceof Uint16Array||F instanceof Int32Array||F instanceof Uint32Array||F instanceof Float32Array||F instanceof Float64Array},pe=t.__addimage__.binaryStringToUint8Array=function(F){for(var B=F.length,ee=new Uint8Array(B),Z=0;Z<B;Z++)ee[Z]=F.charCodeAt(Z);return ee},re=t.__addimage__.arrayBufferToBinaryString=function(F){for(var B="",ee=fe(F)?F:new Uint8Array(F),Z=0;Z<ee.length;Z+=8192)B+=String.fromCharCode.apply(null,ee.subarray(Z,Z+8192));return B};t.addImage=function(){var F,B,ee,Z,de,ge,ke,ve,Se;if(typeof arguments[1]=="number"?(B=n,ee=arguments[1],Z=arguments[2],de=arguments[3],ge=arguments[4],ke=arguments[5],ve=arguments[6],Se=arguments[7]):(B=arguments[1],ee=arguments[2],Z=arguments[3],de=arguments[4],ge=arguments[5],ke=arguments[6],ve=arguments[7],Se=arguments[8]),Bt(F=arguments[0])==="object"&&!w(F)&&"imageData"in F){var Ee=F;F=Ee.imageData,B=Ee.format||B||n,ee=Ee.x||ee||0,Z=Ee.y||Z||0,de=Ee.w||Ee.width||de,ge=Ee.h||Ee.height||ge,ke=Ee.alias||ke,ve=Ee.compression||ve,Se=Ee.rotation||Ee.angle||Se}var Le=this.internal.getFilters();if(ve===void 0&&Le.indexOf("FlateEncode")!==-1&&(ve="SLOW"),isNaN(ee)||isNaN(Z))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var I=$.call(this,F,B,ke,ve);return L.call(this,ee,Z,de,ge,I,Se),this};var $=function(F,B,ee,Z){var de,ge,ke;if(typeof F=="string"&&a(F)===n){F=unescape(F);var ve=ce(F,!1);(ve!==""||(ve=t.loadFile(F,!0))!==void 0)&&(F=ve)}if(w(F)&&(F=v(F,B)),B=a(F,B),!m(B))throw new Error("addImage does not support files of type '"+B+"', please ensure that a plugin for '"+B+"' support is added.");if(((ke=ee)==null||ke.length===0)&&(ee=function(Se){return typeof Se=="string"||fe(Se)?H(Se):fe(Se.data)?H(Se.data):null}(F)),(de=y.call(this,ee))||(F instanceof Uint8Array||B==="RGBA"||(ge=F,F=pe(F)),de=this["process"+B.toUpperCase()](F,f.call(this),ee,function(Se){return Se&&typeof Se=="string"&&(Se=Se.toUpperCase()),Se in t.image_compression?Se:P.NONE}(Z),ge)),!de)throw new Error("An unknown error occurred whilst processing the image.");return de},ce=t.__addimage__.convertBase64ToBinaryString=function(F,B){B=typeof B!="boolean"||B;var ee,Z="";if(typeof F=="string"){var de;ee=(de=oe(F))!==null&&de!==void 0?de:F;try{Z=qo(ee)}catch(ge){if(B)throw M(ee)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ge.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Z};t.getImageProperties=function(F){var B,ee,Z="";if(w(F)&&(F=v(F)),typeof F=="string"&&a(F)===n&&((Z=ce(F,!1))===""&&(Z=t.loadFile(F)||""),F=Z),ee=a(F),!m(ee))throw new Error("addImage does not support files of type '"+ee+"', please ensure that a plugin for '"+ee+"' support is added.");if(F instanceof Uint8Array||(F=pe(F)),!(B=this["process"+ee.toUpperCase()](F)))throw new Error("An unknown error occurred whilst processing the image");return B.fileType=ee,B}})(Xe.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};Xe.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,a,s,u=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(n.objId),h=n.pageContext.annotations,f=!1,m=0;m<h.length&&!f;m++)switch((r=h[m]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var w=0;w<h.length;w++){r=h[w];var v=this.internal.pdfEscape,y=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var k=this.internal.newAdditionalObject(),L=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(k.objId),P=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+u(r.bounds.x)+" "+o(r.bounds.y+r.bounds.h)+" "+u(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y)+"] ")+"/Contents ("+v(x(r.contents))+")",s+=" /Popup "+L.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+v(x(P))+") >>",k.content=s;var H=k.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+u(r.bounds.x+30)+" "+o(r.bounds.y+r.bounds.h)+" "+u(r.bounds.x+r.bounds.w+30)+" "+o(r.bounds.y)+"] ")+" /Parent "+H,r.open&&(s+=" /Open true"),s+=" >>",L.content=s,this.internal.write(k.objId,"0 R",L.objId,"0 R");break;case"freetext":a="/Rect ["+u(r.bounds.x)+" "+o(r.bounds.y)+" "+u(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y+r.bounds.h)+"] ";var M=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+v(y(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+M+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var oe=this.annotations._nameMap[r.options.name];r.options.pageNumber=oe.page,r.options.top=oe.y}else r.options.top||(r.options.top=0);if(a="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+v(y(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;default:var fe=o(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+fe+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,a,s,u){var o=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:c(n),y:h(r),w:c(n+a),h:h(r+s)},options:u,type:"link"})},t.textWithLink=function(n,r,a,s){var u,o,c=this.getTextWidth(n),h=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var f=this.splitTextToSize(n,o).length;u=Math.ceil(h*f)}else o=c,u=h;return this.text(n,r,a,s),a+=.2*h,s.align==="center"&&(r-=c/2),s.align==="right"&&(r-=c),this.link(r,a-h,o,u,s),c},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(Xe.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(k){return e[k.charCodeAt(0)]!==void 0},u=t.__arabicParser__.isArabicLetter=function(k){return typeof k=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(k)},o=t.__arabicParser__.isArabicEndLetter=function(k){return u(k)&&s(k)&&e[k.charCodeAt(0)].length<=2},c=t.__arabicParser__.isArabicAlfLetter=function(k){return u(k)&&a.indexOf(k.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(k){return u(k)&&s(k)&&e[k.charCodeAt(0)].length>=1};var h=t.__arabicParser__.arabicLetterHasFinalForm=function(k){return u(k)&&s(k)&&e[k.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(k){return u(k)&&s(k)&&e[k.charCodeAt(0)].length>=3};var f=t.__arabicParser__.arabicLetterHasMedialForm=function(k){return u(k)&&s(k)&&e[k.charCodeAt(0)].length==4},m=t.__arabicParser__.resolveLigatures=function(k){var L=0,x=n,P="",H=0;for(L=0;L<k.length;L+=1)x[k.charCodeAt(L)]!==void 0?(H++,typeof(x=x[k.charCodeAt(L)])=="number"&&(P+=String.fromCharCode(x),x=n,H=0),L===k.length-1&&(x=n,P+=k.charAt(L-(H-1)),L-=H-1,H=0)):(x=n,P+=k.charAt(L-H),L-=H,H=0);return P};t.__arabicParser__.isArabicDiacritic=function(k){return k!==void 0&&r[k.charCodeAt(0)]!==void 0};var w=t.__arabicParser__.getCorrectForm=function(k,L,x){return u(k)?s(k)===!1?-1:!h(k)||!u(L)&&!u(x)||!u(x)&&o(L)||o(k)&&!u(L)||o(k)&&c(L)||o(k)&&o(L)?0:f(k)&&u(L)&&!o(L)&&u(x)&&h(x)?3:o(k)||!u(x)?1:2:-1},v=function(k){var L=0,x=0,P=0,H="",M="",oe="",fe=(k=k||"").split("\\s+"),pe=[];for(L=0;L<fe.length;L+=1){for(pe.push(""),x=0;x<fe[L].length;x+=1)H=fe[L][x],M=fe[L][x-1],oe=fe[L][x+1],u(H)?(P=w(H,M,oe),pe[L]+=P!==-1?String.fromCharCode(e[H.charCodeAt(0)][P]):H):pe[L]+=H;pe[L]=m(pe[L])}return pe.join(" ")},y=t.__arabicParser__.processArabic=t.processArabic=function(){var k,L=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(L)){var P=0;for(x=[],P=0;P<L.length;P+=1)Array.isArray(L[P])?x.push([v(L[P][0]),L[P][1],L[P][2]]):x.push([v(L[P])]);k=x}else k=v(L);return typeof arguments[0]=="string"?k:(arguments[0].text=k,arguments[0])};t.events.push(["preProcessText",y])}(Xe.API),Xe.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(o){n=o}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(o){r=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(o){a=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var u={};Object.defineProperty(this,"style",{get:function(){return u},set:function(o){u=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var a;if((n=n||"2d")!=="2d")return null;for(a in r)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=r[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Xe.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(k){c=k}});var h=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return h},set:function(k){h=k}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(k){f=k}});var m=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return m},set:function(k){m=k}});var w=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return w},set:function(k){w=k}});var v=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return v},set:function(k){v=k}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(k){y=k}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},t.getTextDimensions=function(c,h){r.call(this);var f=(h=h||{}).fontSize||this.getFontSize(),m=h.font||this.getFont(),w=h.scaleFactor||this.internal.scaleFactor,v=0,y=0,k=0,L=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var x=h.maxWidth;x>0?typeof c=="string"?c=this.splitTextToSize(c,x):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(H,M){return H.concat(L.splitTextToSize(M,x))},[])):c=Array.isArray(c)?c:[c];for(var P=0;P<c.length;P++)v<(k=this.getStringUnitWidth(c[P],{font:m})*f)&&(v=k);return v!==0&&(y=c.length),{w:v/=w,h:Math.max((y*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/w,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var u=t.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var h=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,m=this.internal.__cell__.margins||e,w=this.internal.__cell__.tableHeaderRow,v=this.internal.__cell__.printHeaders;return h.lineNumber!==void 0&&(h.lineNumber===c.lineNumber?(c.x=(h.x||0)+(h.width||0),c.y=h.y||0):h.y+h.height+c.height+m.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=m.top,v&&w&&(this.printHeaderRow(c.lineNumber,!0),c.y+=w[0].height)):c.y=h.y+h.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,n===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-f,c.y+f,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+f,{align:"center",baseline:"top",maxWidth:c.width-f-f}):this.text(c.text,c.x+f,c.y+f,{align:"left",baseline:"top",maxWidth:c.width-f-f})),this.internal.__cell__.lastCell=c,this};t.table=function(c,h,f,m,w){if(r.call(this),!f)throw new Error("No data for PDF table.");var v,y,k,L,x=[],P=[],H=[],M={},oe={},fe=[],pe=[],re=(w=w||{}).autoSize||!1,$=w.printHeaders!==!1,ce=w.css&&w.css["font-size"]!==void 0?16*w.css["font-size"]:w.fontSize||12,F=w.margins||Object.assign({width:this.getPageWidth()},e),B=typeof w.padding=="number"?w.padding:3,ee=w.headerBackgroundColor||"#c8c8c8",Z=w.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=$,this.internal.__cell__.margins=F,this.internal.__cell__.table_font_size=ce,this.internal.__cell__.padding=B,this.internal.__cell__.headerBackgroundColor=ee,this.internal.__cell__.headerTextColor=Z,this.setFontSize(ce),m==null)P=x=Object.keys(f[0]),H=x.map(function(){return"left"});else if(Array.isArray(m)&&Bt(m[0])==="object")for(x=m.map(function(Ee){return Ee.name}),P=m.map(function(Ee){return Ee.prompt||Ee.name||""}),H=m.map(function(Ee){return Ee.align||"left"}),v=0;v<m.length;v+=1)oe[m[v].name]=.7499990551181103*m[v].width;else Array.isArray(m)&&typeof m[0]=="string"&&(P=x=m,H=x.map(function(){return"left"}));if(re||Array.isArray(m)&&typeof m[0]=="string")for(v=0;v<x.length;v+=1){for(M[L=x[v]]=f.map(function(Ee){return Ee[L]}),this.setFont(void 0,"bold"),fe.push(this.getTextDimensions(P[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=M[L],this.setFont(void 0,"normal"),k=0;k<y.length;k+=1)fe.push(this.getTextDimensions(y[k],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);oe[L]=Math.max.apply(null,fe)+B+B,fe=[]}if($){var de={};for(v=0;v<x.length;v+=1)de[x[v]]={},de[x[v]].text=P[v],de[x[v]].align=H[v];var ge=o.call(this,de,oe);pe=x.map(function(Ee){return new s(c,h,oe[Ee],ge,de[Ee].text,void 0,de[Ee].align)}),this.setTableHeaderRow(pe),this.printHeaderRow(1,!1)}var ke=m.reduce(function(Ee,Le){return Ee[Le.name]=Le.align,Ee},{});for(v=0;v<f.length;v+=1){"rowStart"in w&&w.rowStart instanceof Function&&w.rowStart({row:v,data:f[v]},this);var ve=o.call(this,f[v],oe);for(k=0;k<x.length;k+=1){var Se=f[v][x[k]];"cellStart"in w&&w.cellStart instanceof Function&&w.cellStart({row:v,col:k,data:Se},this),u.call(this,new s(c,h,oe[x[k]],ve,Se,v+2,ke[x[k]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=h,this};var o=function(c,h){var f=this.internal.__cell__.padding,m=this.internal.__cell__.table_font_size,w=this.internal.scaleFactor;return Object.keys(c).map(function(v){var y=c[v];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,h[v]-f-f)},this).map(function(v){return this.getLineHeightFactor()*v.length*m/w+f+f},this).reduce(function(v,y){return Math.max(v,y)},0)};t.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},t.printHeaderRow=function(c,h){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var m=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(m[0],m[1],m[2],m[3],void 0,-1)}this.setFont(void 0,"bold");for(var w=[],v=0;v<this.internal.__cell__.tableHeaderRow.length;v+=1){f=this.internal.__cell__.tableHeaderRow[v].clone(),h&&(f.y=this.internal.__cell__.margins.top||0,w.push(f)),f.lineNumber=c;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),u.call(this,f),this.setTextColor(y)}w.length>0&&this.setTableHeaderRow(w),this.setFont(void 0,"normal"),n=!1}}(Xe.API);var Q1={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},X1=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],bu=Y1(X1),Z1=[100,200,300,400,500,600,700,800,900],K5=Y1(Z1);function Ql(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return Q1[s=s||"normal"]?s:"normal"}(t.style),r=function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400}(t.weight),a=function(s){return typeof bu[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:a,src:t.src||[],ref:t.ref||{name:e,style:[a,n,r].join(" ")}}}function Cd(t,e,n,r){var a;for(a=n;a>=0&&a<e.length;a+=r)if(t[e[a]])return t[e[a]];for(a=n;a>=0&&a<e.length;a-=r)if(t[e[a]])return t[e[a]]}var Y5={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Pd={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Id(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function Ed(t){return t.trimLeft()}function Q5(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function X5(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Io,Rd,Fd,Fs,Eo,Td,qd,Md,Xl=["times"];function Od(t,e,n,r,a){var s=4,u=jd;switch(a){case Xe.API.image_compression.FAST:s=1,u=Bd;break;case Xe.API.image_compression.MEDIUM:s=6,u=Dd;break;case Xe.API.image_compression.SLOW:s=9,u=$d}t=function(c,h,f,m){for(var w,v=c.length/h,y=new Uint8Array(c.length+v),k=[Z5,Bd,jd,Dd,$d],L=0;L<v;L+=1){var x=L*h,P=c.subarray(x,x+h);if(m)y.set(m(P,f,w),x+L);else{for(var H=k.length,M=[],oe=0;oe<H;oe+=1)M[oe]=k[oe](P,f,w);var fe=tv(M.concat());y.set(M[fe],x+L)}w=P}return y}(t,e,Math.ceil(n*r/8),u);var o=du(t,{level:s});return Xe.API.__addimage__.arrayBufferToBinaryString(o)}function Z5(t){var e=Array.apply([],t);return e.unshift(0),e}function Bd(t,e){var n=t.length,r=[];r[0]=1;for(var a=0;a<n;a+=1){var s=t[a-e]||0;r[a+1]=t[a]-s+256&255}return r}function jd(t,e,n){var r=t.length,a=[];a[0]=2;for(var s=0;s<r;s+=1){var u=n&&n[s]||0;a[s+1]=t[s]-u+256&255}return a}function Dd(t,e,n){var r=t.length,a=[];a[0]=3;for(var s=0;s<r;s+=1){var u=t[s-e]||0,o=n&&n[s]||0;a[s+1]=t[s]+256-(u+o>>>1)&255}return a}function $d(t,e,n){var r=t.length,a=[];a[0]=4;for(var s=0;s<r;s+=1){var u=ev(t[s-e]||0,n&&n[s]||0,n&&n[s-e]||0);a[s+1]=t[s]-u+256&255}return a}function ev(t,e,n){if(t===e&&e===n)return t;var r=Math.abs(e-n),a=Math.abs(t-n),s=Math.abs(t+e-n-n);return r<=a&&r<=s?t:a<=s?e:n}function tv(t){var e=t.map(function(n){return n.reduce(function(r,a){return r+Math.abs(a)},0)});return e.indexOf(Math.min.apply(null,e))}function Zl(t,e,n){var r=e*n,a=Math.floor(r/8),s=16-(r-8*a+n),u=(1<<n)-1;return eh(t,a)>>s&u}function Ud(t,e,n,r){var a=n*r,s=Math.floor(a/8),u=16-(a-8*s+r),o=(1<<r)-1,c=(e&o)<<u;(function(h,f,m){if(f+1<h.byteLength)h.setUint16(f,m,!1);else{var w=m>>8&255;h.setUint8(f,w)}})(t,s,eh(t,s)&~(o<<u)&65535|c)}function eh(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function nv(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,a=t[e++],s=a>>7,u=1<<1+(7&a);t[e++],t[e++];var o=null,c=null;s&&(o=e,c=u,e+=3*u);var h=!0,f=[],m=0,w=null,v=0,y=null;for(this.width=n,this.height=r;h&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,y=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((F=t[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var k=t[e++];m=t[e++]|t[e++]<<8,w=t[e++],1&k||(w=null),v=k>>2&7,e++;break;case 254:for(;;){if(!((F=t[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var L=t[e++]|t[e++]<<8,x=t[e++]|t[e++]<<8,P=t[e++]|t[e++]<<8,H=t[e++]|t[e++]<<8,M=t[e++],oe=M>>6&1,fe=1<<1+(7&M),pe=o,re=c,$=!1;M>>7&&($=!0,pe=e,re=fe,e+=3*fe);var ce=e;for(e++;;){var F;if(!((F=t[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}f.push({x:L,y:x,width:P,height:H,has_local_palette:$,palette_offset:pe,palette_size:re,data_offset:ce,data_length:e-ce,transparent_index:w,interlaced:!!oe,delay:m,disposal:v});break;case 59:h=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return y},this.frameInfo=function(B){if(B<0||B>=f.length)throw new Error("Frame index out of range.");return f[B]},this.decodeAndBlitFrameBGRA=function(B,ee){var Z=this.frameInfo(B),de=Z.width*Z.height,ge=new Uint8Array(de);zd(t,Z.data_offset,ge,de);var ke=Z.palette_offset,ve=Z.transparent_index;ve===null&&(ve=256);var Se=Z.width,Ee=n-Se,Le=Se,I=4*(Z.y*n+Z.x),V=4*((Z.y+Z.height)*n+Z.x),R=I,q=4*Ee;Z.interlaced===!0&&(q+=4*n*7);for(var O=8,S=0,j=ge.length;S<j;++S){var C=ge[S];if(Le===0&&(Le=Se,(R+=q)>=V&&(q=4*Ee+4*n*(O-1),R=I+(Se+Ee)*(O<<1),O>>=1)),C===ve)R+=4;else{var J=t[ke+3*C],te=t[ke+3*C+1],_e=t[ke+3*C+2];ee[R++]=_e,ee[R++]=te,ee[R++]=J,ee[R++]=255}--Le}},this.decodeAndBlitFrameRGBA=function(B,ee){var Z=this.frameInfo(B),de=Z.width*Z.height,ge=new Uint8Array(de);zd(t,Z.data_offset,ge,de);var ke=Z.palette_offset,ve=Z.transparent_index;ve===null&&(ve=256);var Se=Z.width,Ee=n-Se,Le=Se,I=4*(Z.y*n+Z.x),V=4*((Z.y+Z.height)*n+Z.x),R=I,q=4*Ee;Z.interlaced===!0&&(q+=4*n*7);for(var O=8,S=0,j=ge.length;S<j;++S){var C=ge[S];if(Le===0&&(Le=Se,(R+=q)>=V&&(q=4*Ee+4*n*(O-1),R=I+(Se+Ee)*(O<<1),O>>=1)),C===ve)R+=4;else{var J=t[ke+3*C],te=t[ke+3*C+1],_e=t[ke+3*C+2];ee[R++]=J,ee[R++]=te,ee[R++]=_e,ee[R++]=255}--Le}}}function zd(t,e,n,r){for(var a=t[e++],s=1<<a,u=s+1,o=u+1,c=a+1,h=(1<<c)-1,f=0,m=0,w=0,v=t[e++],y=new Int32Array(4096),k=null;;){for(;f<16&&v!==0;)m|=t[e++]<<f,f+=8,v===1?v=t[e++]:--v;if(f<c)break;var L=m&h;if(m>>=c,f-=c,L!==s){if(L===u)break;for(var x=L<o?L:k,P=0,H=x;H>s;)H=y[H]>>8,++P;var M=H;if(w+P+(x!==L?1:0)>r)return void $t.log("Warning, gif stream longer than expected.");n[w++]=M;var oe=w+=P;for(x!==L&&(n[w++]=M),H=x;P--;)H=y[H],n[--oe]=255&H,H>>=8;k!==null&&o<4096&&(y[o++]=k<<8|M,o>=h+1&&c<12&&(++c,h=h<<1|1)),k=L}else o=u+1,h=(1<<(c=a+1))-1,k=null}return w!==r&&$t.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function eu(t){var e,n,r,a,s,u=Math.floor,o=new Array(64),c=new Array(64),h=new Array(64),f=new Array(64),m=new Array(65535),w=new Array(65535),v=new Array(64),y=new Array(64),k=[],L=0,x=7,P=new Array(64),H=new Array(64),M=new Array(64),oe=new Array(256),fe=new Array(2048),pe=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],re=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],$=[0,1,2,3,4,5,6,7,8,9,10,11],ce=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],F=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],B=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ee=[0,1,2,3,4,5,6,7,8,9,10,11],Z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],de=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ge(I,V){for(var R=0,q=0,O=new Array,S=1;S<=16;S++){for(var j=1;j<=I[S];j++)O[V[q]]=[],O[V[q]][0]=R,O[V[q]][1]=S,q++,R++;R*=2}return O}function ke(I){for(var V=I[0],R=I[1]-1;R>=0;)V&1<<R&&(L|=1<<x),R--,--x<0&&(L==255?(ve(255),ve(0)):ve(L),x=7,L=0)}function ve(I){k.push(I)}function Se(I){ve(I>>8&255),ve(255&I)}function Ee(I,V,R,q,O){for(var S,j=O[0],C=O[240],J=function(ae,Oe){var Be,Ue,Ve,At,lt,et,ut,ct,ze,dt,De=0;for(ze=0;ze<8;++ze){Be=ae[De],Ue=ae[De+1],Ve=ae[De+2],At=ae[De+3],lt=ae[De+4],et=ae[De+5],ut=ae[De+6];var kt=Be+(ct=ae[De+7]),xt=Be-ct,ht=Ue+ut,yt=Ue-ut,zt=Ve+et,nt=Ve-et,Ht=At+lt,it=At-lt,gt=kt+Ht,Qt=kt-Ht,Lt=ht+zt,rt=ht-zt;ae[De]=gt+Lt,ae[De+4]=gt-Lt;var Rt=.707106781*(rt+Qt);ae[De+2]=Qt+Rt,ae[De+6]=Qt-Rt;var Ha=.382683433*((gt=it+nt)-(rt=yt+xt)),Fn=.5411961*gt+Ha,Kr=1.306562965*rt+Ha,Rr=.707106781*(Lt=nt+yt),at=xt+Rr,Yr=xt-Rr;ae[De+5]=Yr+Fn,ae[De+3]=Yr-Fn,ae[De+1]=at+Kr,ae[De+7]=at-Kr,De+=8}for(De=0,ze=0;ze<8;++ze){Be=ae[De],Ue=ae[De+8],Ve=ae[De+16],At=ae[De+24],lt=ae[De+32],et=ae[De+40],ut=ae[De+48];var Qr=Be+(ct=ae[De+56]),or=Be-ct,lr=Ue+ut,nn=Ue-ut,An=Ve+et,Nn=Ve-et,Va=At+lt,wa=At-lt,br=Qr+Va,Fr=Qr-Va,yr=lr+An,wr=lr-An;ae[De]=br+yr,ae[De+32]=br-yr;var ur=.707106781*(wr+Fr);ae[De+16]=Fr+ur,ae[De+48]=Fr-ur;var Wa=.382683433*((br=wa+Nn)-(wr=nn+or)),Tr=.5411961*br+Wa,Ga=1.306562965*wr+Wa,bs=.707106781*(yr=Nn+nn),ys=or+bs,ws=or-bs;ae[De+40]=ws+Tr,ae[De+24]=ws-Tr,ae[De+8]=ys+Ga,ae[De+56]=ys-Ga,De++}for(ze=0;ze<64;++ze)dt=ae[ze]*Oe[ze],v[ze]=dt>0?dt+.5|0:dt-.5|0;return v}(I,V),te=0;te<64;++te)y[pe[te]]=J[te];var _e=y[0]-R;R=y[0],_e==0?ke(q[0]):(ke(q[w[S=32767+_e]]),ke(m[S]));for(var be=63;be>0&&y[be]==0;)be--;if(be==0)return ke(j),R;for(var Q,_=1;_<=be;){for(var se=_;y[_]==0&&_<=be;)++_;var z=_-se;if(z>=16){Q=z>>4;for(var Y=1;Y<=Q;++Y)ke(C);z&=15}S=32767+y[_],ke(O[(z<<4)+w[S]]),ke(m[S]),_++}return be!=63&&ke(j),R}function Le(I){I=Math.min(Math.max(I,1),100),s!=I&&(function(V){for(var R=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],q=0;q<64;q++){var O=u((R[q]*V+50)/100);O=Math.min(Math.max(O,1),255),o[pe[q]]=O}for(var S=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],j=0;j<64;j++){var C=u((S[j]*V+50)/100);C=Math.min(Math.max(C,1),255),c[pe[j]]=C}for(var J=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],te=0,_e=0;_e<8;_e++)for(var be=0;be<8;be++)h[te]=1/(o[pe[te]]*J[_e]*J[be]*8),f[te]=1/(c[pe[te]]*J[_e]*J[be]*8),te++}(I<50?Math.floor(5e3/I):Math.floor(200-2*I)),s=I)}this.encode=function(I,V){V&&Le(V),k=new Array,L=0,x=7,Se(65496),Se(65504),Se(16),ve(74),ve(70),ve(73),ve(70),ve(0),ve(1),ve(1),ve(0),Se(1),Se(1),ve(0),ve(0),function(){Se(65499),Se(132),ve(0);for(var Ue=0;Ue<64;Ue++)ve(o[Ue]);ve(1);for(var Ve=0;Ve<64;Ve++)ve(c[Ve])}(),function(Ue,Ve){Se(65472),Se(17),ve(8),Se(Ve),Se(Ue),ve(3),ve(1),ve(17),ve(0),ve(2),ve(17),ve(1),ve(3),ve(17),ve(1)}(I.width,I.height),function(){Se(65476),Se(418),ve(0);for(var Ue=0;Ue<16;Ue++)ve(re[Ue+1]);for(var Ve=0;Ve<=11;Ve++)ve($[Ve]);ve(16);for(var At=0;At<16;At++)ve(ce[At+1]);for(var lt=0;lt<=161;lt++)ve(F[lt]);ve(1);for(var et=0;et<16;et++)ve(B[et+1]);for(var ut=0;ut<=11;ut++)ve(ee[ut]);ve(17);for(var ct=0;ct<16;ct++)ve(Z[ct+1]);for(var ze=0;ze<=161;ze++)ve(de[ze])}(),Se(65498),Se(12),ve(3),ve(1),ve(0),ve(2),ve(17),ve(3),ve(17),ve(0),ve(63),ve(0);var R=0,q=0,O=0;L=0,x=7,this.encode.displayName="_encode_";for(var S,j,C,J,te,_e,be,Q,_,se=I.data,z=I.width,Y=I.height,ae=4*z,Oe=0;Oe<Y;){for(S=0;S<ae;){for(te=ae*Oe+S,be=-1,Q=0,_=0;_<64;_++)_e=te+(Q=_>>3)*ae+(be=4*(7&_)),Oe+Q>=Y&&(_e-=ae*(Oe+1+Q-Y)),S+be>=ae&&(_e-=S+be-ae+4),j=se[_e++],C=se[_e++],J=se[_e++],P[_]=(fe[j]+fe[C+256|0]+fe[J+512|0]>>16)-128,H[_]=(fe[j+768|0]+fe[C+1024|0]+fe[J+1280|0]>>16)-128,M[_]=(fe[j+1280|0]+fe[C+1536|0]+fe[J+1792|0]>>16)-128;R=Ee(P,h,R,e,r),q=Ee(H,f,q,n,a),O=Ee(M,f,O,n,a),S+=32}Oe+=8}if(x>=0){var Be=[];Be[1]=x+1,Be[0]=(1<<x+1)-1,ke(Be)}return Se(65497),new Uint8Array(k)},t=t||50,function(){for(var I=String.fromCharCode,V=0;V<256;V++)oe[V]=I(V)}(),e=ge(re,$),n=ge(B,ee),r=ge(ce,F),a=ge(Z,de),function(){for(var I=1,V=2,R=1;R<=15;R++){for(var q=I;q<V;q++)w[32767+q]=R,m[32767+q]=[],m[32767+q][1]=R,m[32767+q][0]=q;for(var O=-(V-1);O<=-I;O++)w[32767+O]=R,m[32767+O]=[],m[32767+O][1]=R,m[32767+O][0]=V-1+O;I<<=1,V<<=1}}(),function(){for(var I=0;I<256;I++)fe[I]=19595*I,fe[I+256|0]=38470*I,fe[I+512|0]=7471*I+32768,fe[I+768|0]=-11059*I,fe[I+1024|0]=-21709*I,fe[I+1280|0]=32768*I+8421375,fe[I+1536|0]=-27439*I,fe[I+1792|0]=-5329*I}(),Le(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Lr(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Hd(t){function e($){if(!$)throw Error("assert :P")}function n($,ce,F){for(var B=0;4>B;B++)if($[ce+B]!=F.charCodeAt(B))return!0;return!1}function r($,ce,F,B,ee){for(var Z=0;Z<ee;Z++)$[ce+Z]=F[B+Z]}function a($,ce,F,B){for(var ee=0;ee<B;ee++)$[ce+ee]=F}function s($){return new Int32Array($)}function u($,ce){for(var F=[],B=0;B<$;B++)F.push(new ce);return F}function o($,ce){var F=[];return function B(ee,Z,de){for(var ge=de[Z],ke=0;ke<ge&&(ee.push(de.length>Z+1?[]:new ce),!(de.length<Z+1));ke++)B(ee[ke],Z+1,de)}(F,0,$),F}var c=function(){var $=this;function ce(i,l){for(var g=1<<l-1>>>0;i&g;)g>>>=1;return g?(i&g-1)+g:i}function F(i,l,g,b,N){e(!(b%g));do i[l+(b-=g)]=N;while(0<b)}function B(i,l,g,b,N){if(e(2328>=N),512>=N)var E=s(512);else if((E=s(N))==null)return 0;return function(T,D,U,W,ue,xe){var G,he,ye=D,Ne=1<<U,we=s(16),Ce=s(16);for(e(ue!=0),e(W!=null),e(T!=null),e(0<U),he=0;he<ue;++he){if(15<W[he])return 0;++we[W[he]]}if(we[0]==ue)return 0;for(Ce[1]=0,G=1;15>G;++G){if(we[G]>1<<G)return 0;Ce[G+1]=Ce[G]+we[G]}for(he=0;he<ue;++he)G=W[he],0<W[he]&&(xe[Ce[G]++]=he);if(Ce[15]==1)return(W=new ee).g=0,W.value=xe[0],F(T,ye,1,Ne,W),Ne;var Ie,qe=-1,Te=Ne-1,Qe=0,He=1,wt=1,Je=1<<U;for(he=0,G=1,ue=2;G<=U;++G,ue<<=1){if(He+=wt<<=1,0>(wt-=we[G]))return 0;for(;0<we[G];--we[G])(W=new ee).g=G,W.value=xe[he++],F(T,ye+Qe,ue,Je,W),Qe=ce(Qe,G)}for(G=U+1,ue=2;15>=G;++G,ue<<=1){if(He+=wt<<=1,0>(wt-=we[G]))return 0;for(;0<we[G];--we[G]){if(W=new ee,(Qe&Te)!=qe){for(ye+=Je,Ie=1<<(qe=G)-U;15>qe&&!(0>=(Ie-=we[qe]));)++qe,Ie<<=1;Ne+=Je=1<<(Ie=qe-U),T[D+(qe=Qe&Te)].g=Ie+U,T[D+qe].value=ye-D-qe}W.g=G-U,W.value=xe[he++],F(T,ye+(Qe>>U),ue,Je,W),Qe=ce(Qe,G)}}return He!=2*Ce[15]-1?0:Ne}(i,l,g,b,N,E)}function ee(){this.value=this.g=0}function Z(){this.value=this.g=0}function de(){this.G=u(5,ee),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=u(as,Z)}function ge(i,l,g,b){e(i!=null),e(l!=null),e(2147483648>b),i.Ca=254,i.I=0,i.b=-8,i.Ka=0,i.oa=l,i.pa=g,i.Jd=l,i.Yc=g+b,i.Zc=4<=b?g+b-4+1:g,j(i)}function ke(i,l){for(var g=0;0<l--;)g|=J(i,128)<<l;return g}function ve(i,l){var g=ke(i,l);return C(i)?-g:g}function Se(i,l,g,b){var N,E=0;for(e(i!=null),e(l!=null),e(4294967288>b),i.Sb=b,i.Ra=0,i.u=0,i.h=0,4<b&&(b=4),N=0;N<b;++N)E+=l[g+N]<<8*N;i.Ra=E,i.bb=b,i.oa=l,i.pa=g}function Ee(i){for(;8<=i.u&&i.bb<i.Sb;)i.Ra>>>=8,i.Ra+=i.oa[i.pa+i.bb]<<Sa-8>>>0,++i.bb,i.u-=8;q(i)&&(i.h=1,i.u=0)}function Le(i,l){if(e(0<=l),!i.h&&l<=Jn){var g=R(i)&Gn[l];return i.u+=l,Ee(i),g}return i.h=1,i.u=0}function I(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function V(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function R(i){return i.Ra>>>(i.u&Sa-1)>>>0}function q(i){return e(i.bb<=i.Sb),i.h||i.bb==i.Sb&&i.u>Sa}function O(i,l){i.u=l,i.h=q(i)}function S(i){i.u>=la&&(e(i.u>=la),Ee(i))}function j(i){e(i!=null&&i.oa!=null),i.pa<i.Zc?(i.I=(i.oa[i.pa++]|i.I<<8)>>>0,i.b+=8):(e(i!=null&&i.oa!=null),i.pa<i.Yc?(i.b+=8,i.I=i.oa[i.pa++]|i.I<<8):i.Ka?i.b=0:(i.I<<=8,i.b+=8,i.Ka=1))}function C(i){return ke(i,1)}function J(i,l){var g=i.Ca;0>i.b&&j(i);var b=i.b,N=g*l>>>8,E=(i.I>>>b>N)+0;for(E?(g-=N,i.I-=N+1<<b>>>0):g=N+1,b=g,N=0;256<=b;)N+=8,b>>=8;return b=7^N+Aa[b],i.b-=b,i.Ca=(g<<b)-1,E}function te(i,l,g){i[l+0]=g>>24&255,i[l+1]=g>>16&255,i[l+2]=g>>8&255,i[l+3]=255&g}function _e(i,l){return i[l+0]|i[l+1]<<8}function be(i,l){return _e(i,l)|i[l+2]<<16}function Q(i,l){return _e(i,l)|_e(i,l+2)<<16}function _(i,l){var g=1<<l;return e(i!=null),e(0<l),i.X=s(g),i.X==null?0:(i.Mb=32-l,i.Xa=l,1)}function se(i,l){e(i!=null),e(l!=null),e(i.Xa==l.Xa),r(l.X,0,i.X,0,1<<l.Xa)}function z(){this.X=[],this.Xa=this.Mb=0}function Y(i,l,g,b){e(g!=null),e(b!=null);var N=g[0],E=b[0];return N==0&&(N=(i*E+l/2)/l),E==0&&(E=(l*N+i/2)/i),0>=N||0>=E?0:(g[0]=N,b[0]=E,1)}function ae(i,l){return i+(1<<l)-1>>>l}function Oe(i,l){return((4278255360&i)+(4278255360&l)>>>0&4278255360)+((16711935&i)+(16711935&l)>>>0&16711935)>>>0}function Be(i,l){$[l]=function(g,b,N,E,T,D,U){var W;for(W=0;W<T;++W){var ue=$[i](D[U+W-1],N,E+W);D[U+W]=Oe(g[b+W],ue)}}}function Ue(){this.ud=this.hd=this.jd=0}function Ve(i,l){return((4278124286&(i^l))>>>1)+(i&l)>>>0}function At(i){return 0<=i&&256>i?i:0>i?0:255<i?255:void 0}function lt(i,l){return At(i+(i-l+.5>>1))}function et(i,l,g){return Math.abs(l-g)-Math.abs(i-g)}function ut(i,l,g,b,N,E,T){for(b=E[T-1],g=0;g<N;++g)E[T+g]=b=Oe(i[l+g],b)}function ct(i,l,g,b,N){var E;for(E=0;E<g;++E){var T=i[l+E],D=T>>8&255,U=16711935&(U=(U=16711935&T)+((D<<16)+D));b[N+E]=(4278255360&T)+U>>>0}}function ze(i,l){l.jd=255&i,l.hd=i>>8&255,l.ud=i>>16&255}function dt(i,l,g,b,N,E){var T;for(T=0;T<b;++T){var D=l[g+T],U=D>>>8,W=D,ue=255&(ue=(ue=D>>>16)+((i.jd<<24>>24)*(U<<24>>24)>>>5));W=255&(W=(W+=(i.hd<<24>>24)*(U<<24>>24)>>>5)+((i.ud<<24>>24)*(ue<<24>>24)>>>5)),N[E+T]=(4278255360&D)+(ue<<16)+W}}function De(i,l,g,b,N){$[l]=function(E,T,D,U,W,ue,xe,G,he){for(U=xe;U<G;++U)for(xe=0;xe<he;++xe)W[ue++]=N(D[b(E[T++])])},$[i]=function(E,T,D,U,W,ue,xe){var G=8>>E.b,he=E.Ea,ye=E.K[0],Ne=E.w;if(8>G)for(E=(1<<E.b)-1,Ne=(1<<G)-1;T<D;++T){var we,Ce=0;for(we=0;we<he;++we)we&E||(Ce=b(U[W++])),ue[xe++]=N(ye[Ce&Ne]),Ce>>=G}else $["VP8LMapColor"+g](U,W,ye,Ne,ue,xe,T,D,he)}}function kt(i,l,g,b,N){for(g=l+g;l<g;){var E=i[l++];b[N++]=E>>16&255,b[N++]=E>>8&255,b[N++]=255&E}}function xt(i,l,g,b,N){for(g=l+g;l<g;){var E=i[l++];b[N++]=E>>16&255,b[N++]=E>>8&255,b[N++]=255&E,b[N++]=E>>24&255}}function ht(i,l,g,b,N){for(g=l+g;l<g;){var E=(T=i[l++])>>16&240|T>>12&15,T=240&T|T>>28&15;b[N++]=E,b[N++]=T}}function yt(i,l,g,b,N){for(g=l+g;l<g;){var E=(T=i[l++])>>16&248|T>>13&7,T=T>>5&224|T>>3&31;b[N++]=E,b[N++]=T}}function zt(i,l,g,b,N){for(g=l+g;l<g;){var E=i[l++];b[N++]=255&E,b[N++]=E>>8&255,b[N++]=E>>16&255}}function nt(i,l,g,b,N,E){if(E==0)for(g=l+g;l<g;)te(b,((E=i[l++])[0]>>24|E[1]>>8&65280|E[2]<<8&16711680|E[3]<<24)>>>0),N+=32;else r(b,N,i,l,g)}function Ht(i,l){$[l][0]=$[i+"0"],$[l][1]=$[i+"1"],$[l][2]=$[i+"2"],$[l][3]=$[i+"3"],$[l][4]=$[i+"4"],$[l][5]=$[i+"5"],$[l][6]=$[i+"6"],$[l][7]=$[i+"7"],$[l][8]=$[i+"8"],$[l][9]=$[i+"9"],$[l][10]=$[i+"10"],$[l][11]=$[i+"11"],$[l][12]=$[i+"12"],$[l][13]=$[i+"13"],$[l][14]=$[i+"0"],$[l][15]=$[i+"0"]}function it(i){return i==vl||i==gl||i==uo||i==ml}function gt(){this.eb=[],this.size=this.A=this.fb=0}function Qt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Lt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new gt,this.f.kb=new Qt,this.sd=null}function rt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Rt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ha(i){return alert("todo:WebPSamplerProcessPlane"),i.T}function Fn(i,l){var g=i.T,b=l.ba.f.RGBA,N=b.eb,E=b.fb+i.ka*b.A,T=vr[l.ba.S],D=i.y,U=i.O,W=i.f,ue=i.N,xe=i.ea,G=i.W,he=l.cc,ye=l.dc,Ne=l.Mc,we=l.Nc,Ce=i.ka,Ie=i.ka+i.T,qe=i.U,Te=qe+1>>1;for(Ce==0?T(D,U,null,null,W,ue,xe,G,W,ue,xe,G,N,E,null,null,qe):(T(l.ec,l.fc,D,U,he,ye,Ne,we,W,ue,xe,G,N,E-b.A,N,E,qe),++g);Ce+2<Ie;Ce+=2)he=W,ye=ue,Ne=xe,we=G,ue+=i.Rc,G+=i.Rc,E+=2*b.A,T(D,(U+=2*i.fa)-i.fa,D,U,he,ye,Ne,we,W,ue,xe,G,N,E-b.A,N,E,qe);return U+=i.fa,i.j+Ie<i.o?(r(l.ec,l.fc,D,U,qe),r(l.cc,l.dc,W,ue,Te),r(l.Mc,l.Nc,xe,G,Te),g--):1&Ie||T(D,U,null,null,W,ue,xe,G,W,ue,xe,G,N,E+b.A,null,null,qe),g}function Kr(i,l,g){var b=i.F,N=[i.J];if(b!=null){var E=i.U,T=l.ba.S,D=T==lo||T==uo;l=l.ba.f.RGBA;var U=[0],W=i.ka;U[0]=i.T,i.Kb&&(W==0?--U[0]:(--W,N[0]-=i.width),i.j+i.ka+i.T==i.o&&(U[0]=i.o-i.j-W));var ue=l.eb;W=l.fb+W*l.A,i=qu(b,N[0],i.width,E,U,ue,W+(D?0:3),l.A),e(g==U),i&&it(T)&&mi(ue,W,D,E,U,l.A)}return 0}function Rr(i){var l=i.ma,g=l.ba.S,b=11>g,N=g==io||g==oo||g==lo||g==pl||g==12||it(g);if(l.memory=null,l.Ib=null,l.Jb=null,l.Nd=null,!ui(l.Oa,i,N?11:12))return 0;if(N&&it(g)&&ii(),i.da)alert("todo:use_scaling");else{if(b){if(l.Ib=Ha,i.Kb){if(g=i.U+1>>1,l.memory=s(i.U+2*g),l.memory==null)return 0;l.ec=l.memory,l.fc=0,l.cc=l.ec,l.dc=l.fc+i.U,l.Mc=l.cc,l.Nc=l.dc+g,l.Ib=Fn,ii()}}else alert("todo:EmitYUV");N&&(l.Jb=Kr,b&&kr())}if(b&&!Qu){for(i=0;256>i;++i)xh[i]=89858*(i-128)+ho>>co,Lh[i]=-22014*(i-128)+ho,Ah[i]=-45773*(i-128),Sh[i]=113618*(i-128)+ho>>co;for(i=yi;i<wl;++i)l=76283*(i-16)+ho>>co,Nh[i-yi]=qr(l,255),Ch[i-yi]=qr(l+8>>4,15);Qu=1}return 1}function at(i){var l=i.ma,g=i.U,b=i.T;return e(!(1&i.ka)),0>=g||0>=b?0:(g=l.Ib(i,l),l.Jb!=null&&l.Jb(i,l,g),l.Dc+=g,1)}function Yr(i){i.ma.memory=null}function Qr(i,l,g,b){return Le(i,8)!=47?0:(l[0]=Le(i,14)+1,g[0]=Le(i,14)+1,b[0]=Le(i,1),Le(i,3)!=0?0:!i.h)}function or(i,l){if(4>i)return i+1;var g=i-2>>1;return(2+(1&i)<<g)+Le(l,g)+1}function lr(i,l){return 120<l?l-120:1<=(g=((g=uh[l-1])>>4)*i+(8-(15&g)))?g:1;var g}function nn(i,l,g){var b=R(g),N=i[l+=255&b].g-8;return 0<N&&(O(g,g.u+8),b=R(g),l+=i[l].value,l+=b&(1<<N)-1),O(g,g.u+i[l].g),i[l].value}function An(i,l,g){return g.g+=i.g,g.value+=i.value<<l>>>0,e(8>=g.g),i.g}function Nn(i,l,g){var b=i.xc;return e((l=b==0?0:i.vc[i.md*(g>>b)+(l>>b)])<i.Wb),i.Ya[l]}function Va(i,l,g,b){var N=i.ab,E=i.c*l,T=i.C;l=T+l;var D=g,U=b;for(b=i.Ta,g=i.Ua;0<N--;){var W=i.gc[N],ue=T,xe=l,G=D,he=U,ye=(U=b,D=g,W.Ea);switch(e(ue<xe),e(xe<=W.nc),W.hc){case 2:on(G,he,(xe-ue)*ye,U,D);break;case 0:var Ne=ue,we=xe,Ce=U,Ie=D,qe=(Je=W).Ea;Ne==0&&(di(G,he,null,null,1,Ce,Ie),ut(G,he+1,0,0,qe-1,Ce,Ie+1),he+=qe,Ie+=qe,++Ne);for(var Te=1<<Je.b,Qe=Te-1,He=ae(qe,Je.b),wt=Je.K,Je=Je.w+(Ne>>Je.b)*He;Ne<we;){var Nt=wt,kn=Je,_t=1;for(Cs(G,he,Ce,Ie-qe,1,Ce,Ie);_t<qe;){var Ke=(_t&~Qe)+Te;Ke>qe&&(Ke=qe),(0,fi[Nt[kn++]>>8&15])(G,he+ +_t,Ce,Ie+_t-qe,Ke-_t,Ce,Ie+_t),_t=Ke}he+=qe,Ie+=qe,++Ne&Qe||(Je+=He)}xe!=W.nc&&r(U,D-ye,U,D+(xe-ue-1)*ye,ye);break;case 1:for(ye=G,we=he,qe=(G=W.Ea)-(Ie=G&~(Ce=(he=1<<W.b)-1)),Ne=ae(G,W.b),Te=W.K,W=W.w+(ue>>W.b)*Ne;ue<xe;){for(Qe=Te,He=W,wt=new Ue,Je=we+Ie,Nt=we+G;we<Je;)ze(Qe[He++],wt),pi(wt,ye,we,he,U,D),we+=he,D+=he;we<Nt&&(ze(Qe[He++],wt),pi(wt,ye,we,qe,U,D),we+=qe,D+=qe),++ue&Ce||(W+=Ne)}break;case 3:if(G==U&&he==D&&0<W.b){for(we=U,G=ye=D+(xe-ue)*ye-(Ie=(xe-ue)*ae(W.Ea,W.b)),he=U,Ce=D,Ne=[],Ie=(qe=Ie)-1;0<=Ie;--Ie)Ne[Ie]=he[Ce+Ie];for(Ie=qe-1;0<=Ie;--Ie)we[G+Ie]=Ne[Ie];no(W,ue,xe,U,ye,U,D)}else no(W,ue,xe,G,he,U,D)}D=b,U=g}U!=g&&r(b,g,D,U,E)}function wa(i,l){var g=i.V,b=i.Ba+i.c*i.C,N=l-i.C;if(e(l<=i.l.o),e(16>=N),0<N){var E=i.l,T=i.Ta,D=i.Ua,U=E.width;if(Va(i,N,g,b),N=D=[D],e((g=i.C)<(b=l)),e(E.v<E.va),b>E.o&&(b=E.o),g<E.j){var W=E.j-g;g=E.j,N[0]+=W*U}if(g>=b?g=0:(N[0]+=4*E.v,E.ka=g-E.j,E.U=E.va-E.v,E.T=b-g,g=1),g){if(D=D[0],11>(g=i.ca).S){var ue=g.f.RGBA,xe=(b=g.S,N=E.U,E=E.T,W=ue.eb,ue.A),G=E;for(ue=ue.fb+i.Ma*ue.A;0<G--;){var he=T,ye=D,Ne=N,we=W,Ce=ue;switch(b){case so:vi(he,ye,Ne,we,Ce);break;case io:La(he,ye,Ne,we,Ce);break;case vl:La(he,ye,Ne,we,Ce),mi(we,Ce,0,Ne,1,0);break;case Uu:ss(he,ye,Ne,we,Ce);break;case oo:nt(he,ye,Ne,we,Ce,1);break;case gl:nt(he,ye,Ne,we,Ce,1),mi(we,Ce,0,Ne,1,0);break;case lo:nt(he,ye,Ne,we,Ce,0);break;case uo:nt(he,ye,Ne,we,Ce,0),mi(we,Ce,1,Ne,1,0);break;case pl:Na(he,ye,Ne,we,Ce);break;case ml:Na(he,ye,Ne,we,Ce),Tu(we,Ce,Ne,1,0);break;case zu:Ca(he,ye,Ne,we,Ce);break;default:e(0)}D+=U,ue+=xe}i.Ma+=E}else alert("todo:EmitRescaledRowsYUVA");e(i.Ma<=g.height)}}i.C=l,e(i.C<=i.i)}function br(i){var l;if(0<i.ua)return 0;for(l=0;l<i.Wb;++l){var g=i.Ya[l].G,b=i.Ya[l].H;if(0<g[1][b[1]+0].g||0<g[2][b[2]+0].g||0<g[3][b[3]+0].g)return 0}return 1}function Fr(i,l,g,b,N,E){if(i.Z!=0){var T=i.qd,D=i.rd;for(e(Ea[i.Z]!=null);l<g;++l)Ea[i.Z](T,D,b,N,b,N,E),T=b,D=N,N+=E;i.qd=T,i.rd=D}}function yr(i,l){var g=i.l.ma,b=g.Z==0||g.Z==1?i.l.j:i.C;if(b=i.C<b?b:i.C,e(l<=i.l.o),l>b){var N=i.l.width,E=g.ca,T=g.tb+N*b,D=i.V,U=i.Ba+i.c*b,W=i.gc;e(i.ab==1),e(W[0].hc==3),jr(W[0],b,l,D,U,E,T),Fr(g,b,l,E,T,N)}i.C=i.Ma=l}function wr(i,l,g,b,N,E,T){var D=i.$/b,U=i.$%b,W=i.m,ue=i.s,xe=g+i.$,G=xe;N=g+b*N;var he=g+b*E,ye=280+ue.ua,Ne=i.Pb?D:16777216,we=0<ue.ua?ue.Wa:null,Ce=ue.wc,Ie=xe<he?Nn(ue,U,D):null;e(i.C<E),e(he<=N);var qe=!1;e:for(;;){for(;qe||xe<he;){var Te=0;if(D>=Ne){var Qe=xe-g;e((Ne=i).Pb),Ne.wd=Ne.m,Ne.xd=Qe,0<Ne.s.ua&&se(Ne.s.Wa,Ne.s.vb),Ne=D+dh}if(U&Ce||(Ie=Nn(ue,U,D)),e(Ie!=null),Ie.Qb&&(l[xe]=Ie.qb,qe=!0),!qe)if(S(W),Ie.jc){Te=W,Qe=l;var He=xe,wt=Ie.pd[R(Te)&as-1];e(Ie.jc),256>wt.g?(O(Te,Te.u+wt.g),Qe[He]=wt.value,Te=0):(O(Te,Te.u+wt.g-256),e(256<=wt.value),Te=wt.value),Te==0&&(qe=!0)}else Te=nn(Ie.G[0],Ie.H[0],W);if(W.h)break;if(qe||256>Te){if(!qe)if(Ie.nd)l[xe]=(Ie.qb|Te<<8)>>>0;else{if(S(W),qe=nn(Ie.G[1],Ie.H[1],W),S(W),Qe=nn(Ie.G[2],Ie.H[2],W),He=nn(Ie.G[3],Ie.H[3],W),W.h)break;l[xe]=(He<<24|qe<<16|Te<<8|Qe)>>>0}if(qe=!1,++xe,++U>=b&&(U=0,++D,T!=null&&D<=E&&!(D%16)&&T(i,D),we!=null))for(;G<xe;)Te=l[G++],we.X[(506832829*Te&4294967295)>>>we.Mb]=Te}else if(280>Te){if(Te=or(Te-256,W),Qe=nn(Ie.G[4],Ie.H[4],W),S(W),Qe=lr(b,Qe=or(Qe,W)),W.h)break;if(xe-g<Qe||N-xe<Te)break e;for(He=0;He<Te;++He)l[xe+He]=l[xe+He-Qe];for(xe+=Te,U+=Te;U>=b;)U-=b,++D,T!=null&&D<=E&&!(D%16)&&T(i,D);if(e(xe<=N),U&Ce&&(Ie=Nn(ue,U,D)),we!=null)for(;G<xe;)Te=l[G++],we.X[(506832829*Te&4294967295)>>>we.Mb]=Te}else{if(!(Te<ye))break e;for(qe=Te-280,e(we!=null);G<xe;)Te=l[G++],we.X[(506832829*Te&4294967295)>>>we.Mb]=Te;Te=xe,e(!(qe>>>(Qe=we).Xa)),l[Te]=Qe.X[qe],qe=!0}qe||e(W.h==q(W))}if(i.Pb&&W.h&&xe<N)e(i.m.h),i.a=5,i.m=i.wd,i.$=i.xd,0<i.s.ua&&se(i.s.vb,i.s.Wa);else{if(W.h)break e;T?.(i,D>E?E:D),i.a=0,i.$=xe-g}return 1}return i.a=3,0}function ur(i){e(i!=null),i.vc=null,i.yc=null,i.Ya=null;var l=i.Wa;l!=null&&(l.X=null),i.vb=null,e(i!=null)}function Wa(){var i=new ft;return i==null?null:(i.a=0,i.xb=Wu,Ht("Predictor","VP8LPredictors"),Ht("Predictor","VP8LPredictors_C"),Ht("PredictorAdd","VP8LPredictorsAdd"),Ht("PredictorAdd","VP8LPredictorsAdd_C"),on=ct,pi=dt,vi=kt,La=xt,Na=ht,Ca=yt,ss=zt,$.VP8LMapColor32b=Br,$.VP8LMapColor8b=hi,i)}function Tr(i,l,g,b,N){var E=1,T=[i],D=[l],U=b.m,W=b.s,ue=null,xe=0;e:for(;;){if(g)for(;E&&Le(U,1);){var G=T,he=D,ye=b,Ne=1,we=ye.m,Ce=ye.gc[ye.ab],Ie=Le(we,2);if(ye.Oc&1<<Ie)E=0;else{switch(ye.Oc|=1<<Ie,Ce.hc=Ie,Ce.Ea=G[0],Ce.nc=he[0],Ce.K=[null],++ye.ab,e(4>=ye.ab),Ie){case 0:case 1:Ce.b=Le(we,3)+2,Ne=Tr(ae(Ce.Ea,Ce.b),ae(Ce.nc,Ce.b),0,ye,Ce.K),Ce.K=Ce.K[0];break;case 3:var qe,Te=Le(we,8)+1,Qe=16<Te?0:4<Te?1:2<Te?2:3;if(G[0]=ae(Ce.Ea,Qe),Ce.b=Qe,qe=Ne=Tr(Te,1,0,ye,Ce.K)){var He,wt=Te,Je=Ce,Nt=1<<(8>>Je.b),kn=s(Nt);if(kn==null)qe=0;else{var _t=Je.K[0],Ke=Je.w;for(kn[0]=Je.K[0][0],He=1;He<1*wt;++He)kn[He]=Oe(_t[Ke+He],kn[He-1]);for(;He<4*Nt;++He)kn[He]=0;Je.K[0]=null,Je.K[0]=kn,qe=1}}Ne=qe;break;case 2:break;default:e(0)}E=Ne}}if(T=T[0],D=D[0],E&&Le(U,1)&&!(E=1<=(xe=Le(U,4))&&11>=xe)){b.a=3;break e}var $e;if($e=E)t:{var un,mt,Ct,Jt=b,In=T,Dn=D,rn=xe,Tn=g,$n=Jt.m,xn=Jt.s,Et=[null],Mt=1,an=0,Ot=ch[rn];n:for(;;){if(Tn&&Le($n,1)){var En=Le($n,3)+2,Sr=ae(In,En),cn=ae(Dn,En),zn=Sr*cn;if(!Tr(Sr,cn,0,Jt,Et))break n;for(Et=Et[0],xn.xc=En,un=0;un<zn;++un){var Dt=Et[un]>>8&65535;Et[un]=Dt,Dt>=Mt&&(Mt=Dt+1)}}if($n.h)break n;for(mt=0;5>mt;++mt){var Sn=Hu[mt];!mt&&0<rn&&(Sn+=1<<rn),an<Sn&&(an=Sn)}var Yn=u(Mt*Ot,ee),Un=Mt,Qn=u(Un,de);if(Qn==null)var Xn=null;else e(65536>=Un),Xn=Qn;var Hn=s(an);if(Xn==null||Hn==null||Yn==null){Jt.a=1;break n}var Zn=Yn;for(un=Ct=0;un<Mt;++un){var Wt=Xn[un],er=Wt.G,Ar=Wt.H,os=0,da=1,Rn=0;for(mt=0;5>mt;++mt){Sn=Hu[mt],er[mt]=Zn,Ar[mt]=Ct,!mt&&0<rn&&(Sn+=1<<rn);a:{var po,_l=Sn,vo=Jt,wi=Hn,Eh=Zn,Rh=Ct,kl=0,Ra=vo.m,Fh=Le(Ra,1);if(a(wi,0,0,_l),Fh){var Th=Le(Ra,1)+1,qh=Le(Ra,1),ec=Le(Ra,qh==0?1:8);wi[ec]=1,Th==2&&(wi[ec=Le(Ra,8)]=1);var go=1}else{var tc=s(19),nc=Le(Ra,4)+4;if(19<nc){vo.a=3;var mo=0;break a}for(po=0;po<nc;++po)tc[lh[po]]=Le(Ra,3);var xl=void 0,_i=void 0,rc=vo,Mh=tc,bo=_l,ac=wi,Sl=0,Fa=rc.m,sc=8,ic=u(128,ee);r:for(;B(ic,0,7,Mh,19);){if(Le(Fa,1)){var Oh=2+2*Le(Fa,3);if((xl=2+Le(Fa,Oh))>bo)break r}else xl=bo;for(_i=0;_i<bo&&xl--;){S(Fa);var oc=ic[0+(127&R(Fa))];O(Fa,Fa.u+oc.g);var Is=oc.value;if(16>Is)ac[_i++]=Is,Is!=0&&(sc=Is);else{var Bh=Is==16,lc=Is-16,jh=ih[lc],uc=Le(Fa,sh[lc])+jh;if(_i+uc>bo)break r;for(var Dh=Bh?sc:0;0<uc--;)ac[_i++]=Dh}}Sl=1;break r}Sl||(rc.a=3),go=Sl}(go=go&&!Ra.h)&&(kl=B(Eh,Rh,8,wi,_l)),go&&kl!=0?mo=kl:(vo.a=3,mo=0)}if(mo==0)break n;if(da&&oh[mt]==1&&(da=Zn[Ct].g==0),os+=Zn[Ct].g,Ct+=mo,3>=mt){var ki,Al=Hn[0];for(ki=1;ki<Sn;++ki)Hn[ki]>Al&&(Al=Hn[ki]);Rn+=Al}}if(Wt.nd=da,Wt.Qb=0,da&&(Wt.qb=(er[3][Ar[3]+0].value<<24|er[1][Ar[1]+0].value<<16|er[2][Ar[2]+0].value)>>>0,os==0&&256>er[0][Ar[0]+0].value&&(Wt.Qb=1,Wt.qb+=er[0][Ar[0]+0].value<<8)),Wt.jc=!Wt.Qb&&6>Rn,Wt.jc){var yo,ha=Wt;for(yo=0;yo<as;++yo){var Ta=yo,qa=ha.pd[Ta],wo=ha.G[0][ha.H[0]+Ta];256<=wo.value?(qa.g=wo.g+256,qa.value=wo.value):(qa.g=0,qa.value=0,Ta>>=An(wo,8,qa),Ta>>=An(ha.G[1][ha.H[1]+Ta],16,qa),Ta>>=An(ha.G[2][ha.H[2]+Ta],0,qa),An(ha.G[3][ha.H[3]+Ta],24,qa))}}}xn.vc=Et,xn.Wb=Mt,xn.Ya=Xn,xn.yc=Yn,$e=1;break t}$e=0}if(!(E=$e)){b.a=3;break e}if(0<xe){if(W.ua=1<<xe,!_(W.Wa,xe)){b.a=1,E=0;break e}}else W.ua=0;var Ll=b,cc=T,$h=D,Nl=Ll.s,Cl=Nl.xc;if(Ll.c=cc,Ll.i=$h,Nl.md=ae(cc,Cl),Nl.wc=Cl==0?-1:(1<<Cl)-1,g){b.xb=bh;break e}if((ue=s(T*D))==null){b.a=1,E=0;break e}E=(E=wr(b,ue,0,T,D,D,null))&&!U.h;break e}return E?(N!=null?N[0]=ue:(e(ue==null),e(g)),b.$=0,g||ur(W)):ur(W),E}function Ga(i,l){var g=i.c*i.i,b=g+l+16*l;return e(i.c<=l),i.V=s(b),i.V==null?(i.Ta=null,i.Ua=0,i.a=1,0):(i.Ta=i.V,i.Ua=i.Ba+g+l,1)}function bs(i,l){var g=i.C,b=l-g,N=i.V,E=i.Ba+i.c*g;for(e(l<=i.l.o);0<b;){var T=16<b?16:b,D=i.l.ma,U=i.l.width,W=U*T,ue=D.ca,xe=D.tb+U*g,G=i.Ta,he=i.Ua;Va(i,T,N,E),Mu(G,he,ue,xe,W),Fr(D,g,g+T,ue,xe,U),b-=T,N+=T*i.c,g+=T}e(g==l),i.C=i.Ma=l}function ys(){this.ub=this.yd=this.td=this.Rb=0}function ws(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Qo(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Ks(){this.Yb=function(){var i=[];return function l(g,b,N){for(var E=N[b],T=0;T<E&&(g.push(N.length>b+1?[]:0),!(N.length<b+1));T++)l(g[T],b+1,N)}(i,0,[3,11]),i}()}function Bi(){this.jb=s(3),this.Wc=o([4,8],Ks),this.Xc=o([4,17],Ks)}function ji(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function cr(){this.ld=this.La=this.dd=this.tc=0}function Ys(){this.Na=this.la=0}function Di(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Qs(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function $i(){this.uc=this.M=this.Nb=0,this.wa=Array(new cr),this.Y=0,this.ya=Array(new Qs),this.aa=0,this.l=new _s}function Ui(){this.y=s(16),this.f=s(8),this.ea=s(8)}function zi(){this.cb=this.a=0,this.sc="",this.m=new I,this.Od=new ys,this.Kc=new ws,this.ed=new ji,this.Qa=new Qo,this.Ic=this.$c=this.Aa=0,this.D=new $i,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=u(8,I),this.ia=0,this.pb=u(4,Di),this.Pa=new Bi,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ui),this.Hd=0,this.rb=Array(new Ys),this.sb=0,this.wa=Array(new cr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Qs),this.L=this.aa=0,this.gd=o([4,2],cr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function qr(i,l){return 0>i?0:i>l?l:i}function _s(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Xo(){var i=new zi;return i!=null&&(i.a=0,i.sc="OK",i.cb=0,i.Xb=0,bi||(bi=ks)),i}function pn(i,l,g){return i.a==0&&(i.a=l,i.sc=g,i.cb=0),0}function Hi(i,l,g){return 3<=g&&i[l+0]==157&&i[l+1]==1&&i[l+2]==42}function Mr(i,l){if(i==null)return 0;if(i.a=0,i.sc="OK",l==null)return pn(i,2,"null VP8Io passed to VP8GetHeaders()");var g=l.data,b=l.w,N=l.ha;if(4>N)return pn(i,7,"Truncated header.");var E=g[b+0]|g[b+1]<<8|g[b+2]<<16,T=i.Od;if(T.Rb=!(1&E),T.td=E>>1&7,T.yd=E>>4&1,T.ub=E>>5,3<T.td)return pn(i,3,"Incorrect keyframe parameters.");if(!T.yd)return pn(i,4,"Frame not displayable.");b+=3,N-=3;var D=i.Kc;if(T.Rb){if(7>N)return pn(i,7,"cannot parse picture header");if(!Hi(g,b,N))return pn(i,3,"Bad code word");D.c=16383&(g[b+4]<<8|g[b+3]),D.Td=g[b+4]>>6,D.i=16383&(g[b+6]<<8|g[b+5]),D.Ud=g[b+6]>>6,b+=7,N-=7,i.za=D.c+15>>4,i.Ub=D.i+15>>4,l.width=D.c,l.height=D.i,l.Da=0,l.j=0,l.v=0,l.va=l.width,l.o=l.height,l.da=0,l.ib=l.width,l.hb=l.height,l.U=l.width,l.T=l.height,a((E=i.Pa).jb,0,255,E.jb.length),e((E=i.Qa)!=null),E.Cb=0,E.Bb=0,E.Fb=1,a(E.Zb,0,0,E.Zb.length),a(E.Lb,0,0,E.Lb)}if(T.ub>N)return pn(i,7,"bad partition length");ge(E=i.m,g,b,T.ub),b+=T.ub,N-=T.ub,T.Rb&&(D.Ld=C(E),D.Kd=C(E)),D=i.Qa;var U,W=i.Pa;if(e(E!=null),e(D!=null),D.Cb=C(E),D.Cb){if(D.Bb=C(E),C(E)){for(D.Fb=C(E),U=0;4>U;++U)D.Zb[U]=C(E)?ve(E,7):0;for(U=0;4>U;++U)D.Lb[U]=C(E)?ve(E,6):0}if(D.Bb)for(U=0;3>U;++U)W.jb[U]=C(E)?ke(E,8):255}else D.Bb=0;if(E.Ka)return pn(i,3,"cannot parse segment header");if((D=i.ed).zd=C(E),D.Tb=ke(E,6),D.wb=ke(E,3),D.Pc=C(E),D.Pc&&C(E)){for(W=0;4>W;++W)C(E)&&(D.vd[W]=ve(E,6));for(W=0;4>W;++W)C(E)&&(D.od[W]=ve(E,6))}if(i.L=D.Tb==0?0:D.zd?1:2,E.Ka)return pn(i,3,"cannot parse filter header");var ue=N;if(N=U=b,b=U+ue,D=ue,i.Xb=(1<<ke(i.m,2))-1,ue<3*(W=i.Xb))g=7;else{for(U+=3*W,D-=3*W,ue=0;ue<W;++ue){var xe=g[N+0]|g[N+1]<<8|g[N+2]<<16;xe>D&&(xe=D),ge(i.Jc[+ue],g,U,xe),U+=xe,D-=xe,N+=3}ge(i.Jc[+W],g,U,D),g=U<b?0:5}if(g!=0)return pn(i,g,"cannot parse partitions");for(g=ke(U=i.m,7),N=C(U)?ve(U,4):0,b=C(U)?ve(U,4):0,D=C(U)?ve(U,4):0,W=C(U)?ve(U,4):0,U=C(U)?ve(U,4):0,ue=i.Qa,xe=0;4>xe;++xe){if(ue.Cb){var G=ue.Zb[xe];ue.Fb||(G+=g)}else{if(0<xe){i.pb[xe]=i.pb[0];continue}G=g}var he=i.pb[xe];he.Sc[0]=bl[qr(G+N,127)],he.Sc[1]=yl[qr(G+0,127)],he.Eb[0]=2*bl[qr(G+b,127)],he.Eb[1]=101581*yl[qr(G+D,127)]>>16,8>he.Eb[1]&&(he.Eb[1]=8),he.Qc[0]=bl[qr(G+W,117)],he.Qc[1]=yl[qr(G+U,127)],he.lc=G+U}if(!T.Rb)return pn(i,4,"Not a key frame.");for(C(E),T=i.Pa,g=0;4>g;++g){for(N=0;8>N;++N)for(b=0;3>b;++b)for(D=0;11>D;++D)W=J(E,gh[g][N][b][D])?ke(E,8):ph[g][N][b][D],T.Wc[g][N].Yb[b][D]=W;for(N=0;17>N;++N)T.Xc[g][N]=T.Wc[g][mh[N]]}return i.kc=C(E),i.kc&&(i.Bd=ke(E,8)),i.cb=1}function ks(i,l,g,b,N,E,T){var D=l[N].Yb[g];for(g=0;16>N;++N){if(!J(i,D[g+0]))return N;for(;!J(i,D[g+1]);)if(D=l[++N].Yb[0],g=0,N==16)return 16;var U=l[N+1].Yb;if(J(i,D[g+2])){var W=i,ue=0;if(J(W,(G=D)[(xe=g)+3]))if(J(W,G[xe+6])){for(D=0,xe=2*(ue=J(W,G[xe+8]))+(G=J(W,G[xe+9+ue])),ue=0,G=hh[xe];G[D];++D)ue+=ue+J(W,G[D]);ue+=3+(8<<xe)}else J(W,G[xe+7])?(ue=7+2*J(W,165),ue+=J(W,145)):ue=5+J(W,159);else ue=J(W,G[xe+4])?3+J(W,G[xe+5]):2;D=U[2]}else ue=1,D=U[1];U=T+fh[N],0>(W=i).b&&j(W);var xe,G=W.b,he=(xe=W.Ca>>1)-(W.I>>G)>>31;--W.b,W.Ca+=he,W.Ca|=1,W.I-=(xe+1&he)<<G,E[U]=((ue^he)-he)*b[(0<N)+0]}return 16}function Vi(i){var l=i.rb[i.sb-1];l.la=0,l.Na=0,a(i.zc,0,0,i.zc.length),i.ja=0}function dr(i,l,g,b,N){N=i[l+g+32*b]+(N>>3),i[l+g+32*b]=-256&N?0>N?0:255:N}function yn(i,l,g,b,N,E){dr(i,l,0,g,b+N),dr(i,l,1,g,b+E),dr(i,l,2,g,b-E),dr(i,l,3,g,b-N)}function Xr(i){return(20091*i>>16)+i}function Wi(i,l,g,b){var N,E=0,T=s(16);for(N=0;4>N;++N){var D=i[l+0]+i[l+8],U=i[l+0]-i[l+8],W=(35468*i[l+4]>>16)-Xr(i[l+12]),ue=Xr(i[l+4])+(35468*i[l+12]>>16);T[E+0]=D+ue,T[E+1]=U+W,T[E+2]=U-W,T[E+3]=D-ue,E+=4,l++}for(N=E=0;4>N;++N)D=(i=T[E+0]+4)+T[E+8],U=i-T[E+8],W=(35468*T[E+4]>>16)-Xr(T[E+12]),dr(g,b,0,0,D+(ue=Xr(T[E+4])+(35468*T[E+12]>>16))),dr(g,b,1,0,U+W),dr(g,b,2,0,U-W),dr(g,b,3,0,D-ue),E++,b+=32}function Zo(i,l,g,b){var N=i[l+0]+4,E=35468*i[l+4]>>16,T=Xr(i[l+4]),D=35468*i[l+1]>>16;yn(g,b,0,N+T,i=Xr(i[l+1]),D),yn(g,b,1,N+E,i,D),yn(g,b,2,N-E,i,D),yn(g,b,3,N-T,i,D)}function el(i,l,g,b,N){Wi(i,l,g,b),N&&Wi(i,l+16,g,b+4)}function Or(i,l,g,b){is(i,l+0,g,b,1),is(i,l+32,g,b+128,1)}function Gi(i,l,g,b){var N;for(i=i[l+0]+4,N=0;4>N;++N)for(l=0;4>l;++l)dr(g,b,l,N,i)}function Ji(i,l,g,b){i[l+0]&&Ft(i,l+0,g,b),i[l+16]&&Ft(i,l+16,g,b+4),i[l+32]&&Ft(i,l+32,g,b+128),i[l+48]&&Ft(i,l+48,g,b+128+4)}function xs(i,l,g,b){var N,E=s(16);for(N=0;4>N;++N){var T=i[l+0+N]+i[l+12+N],D=i[l+4+N]+i[l+8+N],U=i[l+4+N]-i[l+8+N],W=i[l+0+N]-i[l+12+N];E[0+N]=T+D,E[8+N]=T-D,E[4+N]=W+U,E[12+N]=W-U}for(N=0;4>N;++N)T=(i=E[0+4*N]+3)+E[3+4*N],D=E[1+4*N]+E[2+4*N],U=E[1+4*N]-E[2+4*N],W=i-E[3+4*N],g[b+0]=T+D>>3,g[b+16]=W+U>>3,g[b+32]=T-D>>3,g[b+48]=W-U>>3,b+=64}function Ja(i,l,g){var b,N=l-32,E=Kn,T=255-i[N-1];for(b=0;b<g;++b){var D,U=E,W=T+i[l-1];for(D=0;D<g;++D)i[l+D]=U[W+i[N+D]];l+=32}}function tl(i,l){Ja(i,l,4)}function nl(i,l){Ja(i,l,8)}function rl(i,l){Ja(i,l,16)}function Xs(i,l){var g;for(g=0;16>g;++g)r(i,l+32*g,i,l-32,16)}function Ki(i,l){var g;for(g=16;0<g;--g)a(i,l,i[l-1],16),l+=32}function _r(i,l,g){var b;for(b=0;16>b;++b)a(l,g+32*b,i,16)}function al(i,l){var g,b=16;for(g=0;16>g;++g)b+=i[l-1+32*g]+i[l+g-32];_r(b>>5,i,l)}function Ka(i,l){var g,b=8;for(g=0;16>g;++g)b+=i[l-1+32*g];_r(b>>4,i,l)}function Zs(i,l){var g,b=8;for(g=0;16>g;++g)b+=i[l+g-32];_r(b>>4,i,l)}function sl(i,l){_r(128,i,l)}function pt(i,l,g){return i+2*l+g+2>>2}function il(i,l){var g,b=l-32;for(b=new Uint8Array([pt(i[b-1],i[b+0],i[b+1]),pt(i[b+0],i[b+1],i[b+2]),pt(i[b+1],i[b+2],i[b+3]),pt(i[b+2],i[b+3],i[b+4])]),g=0;4>g;++g)r(i,l+32*g,b,0,b.length)}function ol(i,l){var g=i[l-1],b=i[l-1+32],N=i[l-1+64],E=i[l-1+96];te(i,l+0,16843009*pt(i[l-1-32],g,b)),te(i,l+32,16843009*pt(g,b,N)),te(i,l+64,16843009*pt(b,N,E)),te(i,l+96,16843009*pt(N,E,E))}function ll(i,l){var g,b=4;for(g=0;4>g;++g)b+=i[l+g-32]+i[l-1+32*g];for(b>>=3,g=0;4>g;++g)a(i,l+32*g,b,4)}function Zr(i,l){var g=i[l-1+0],b=i[l-1+32],N=i[l-1+64],E=i[l-1-32],T=i[l+0-32],D=i[l+1-32],U=i[l+2-32],W=i[l+3-32];i[l+0+96]=pt(b,N,i[l-1+96]),i[l+1+96]=i[l+0+64]=pt(g,b,N),i[l+2+96]=i[l+1+64]=i[l+0+32]=pt(E,g,b),i[l+3+96]=i[l+2+64]=i[l+1+32]=i[l+0+0]=pt(T,E,g),i[l+3+64]=i[l+2+32]=i[l+1+0]=pt(D,T,E),i[l+3+32]=i[l+2+0]=pt(U,D,T),i[l+3+0]=pt(W,U,D)}function ea(i,l){var g=i[l+1-32],b=i[l+2-32],N=i[l+3-32],E=i[l+4-32],T=i[l+5-32],D=i[l+6-32],U=i[l+7-32];i[l+0+0]=pt(i[l+0-32],g,b),i[l+1+0]=i[l+0+32]=pt(g,b,N),i[l+2+0]=i[l+1+32]=i[l+0+64]=pt(b,N,E),i[l+3+0]=i[l+2+32]=i[l+1+64]=i[l+0+96]=pt(N,E,T),i[l+3+32]=i[l+2+64]=i[l+1+96]=pt(E,T,D),i[l+3+64]=i[l+2+96]=pt(T,D,U),i[l+3+96]=pt(D,U,U)}function ul(i,l){var g=i[l-1+0],b=i[l-1+32],N=i[l-1+64],E=i[l-1-32],T=i[l+0-32],D=i[l+1-32],U=i[l+2-32],W=i[l+3-32];i[l+0+0]=i[l+1+64]=E+T+1>>1,i[l+1+0]=i[l+2+64]=T+D+1>>1,i[l+2+0]=i[l+3+64]=D+U+1>>1,i[l+3+0]=U+W+1>>1,i[l+0+96]=pt(N,b,g),i[l+0+64]=pt(b,g,E),i[l+0+32]=i[l+1+96]=pt(g,E,T),i[l+1+32]=i[l+2+96]=pt(E,T,D),i[l+2+32]=i[l+3+96]=pt(T,D,U),i[l+3+32]=pt(D,U,W)}function cl(i,l){var g=i[l+0-32],b=i[l+1-32],N=i[l+2-32],E=i[l+3-32],T=i[l+4-32],D=i[l+5-32],U=i[l+6-32],W=i[l+7-32];i[l+0+0]=g+b+1>>1,i[l+1+0]=i[l+0+64]=b+N+1>>1,i[l+2+0]=i[l+1+64]=N+E+1>>1,i[l+3+0]=i[l+2+64]=E+T+1>>1,i[l+0+32]=pt(g,b,N),i[l+1+32]=i[l+0+96]=pt(b,N,E),i[l+2+32]=i[l+1+96]=pt(N,E,T),i[l+3+32]=i[l+2+96]=pt(E,T,D),i[l+3+64]=pt(T,D,U),i[l+3+96]=pt(D,U,W)}function Ss(i,l){var g=i[l-1+0],b=i[l-1+32],N=i[l-1+64],E=i[l-1+96];i[l+0+0]=g+b+1>>1,i[l+2+0]=i[l+0+32]=b+N+1>>1,i[l+2+32]=i[l+0+64]=N+E+1>>1,i[l+1+0]=pt(g,b,N),i[l+3+0]=i[l+1+32]=pt(b,N,E),i[l+3+32]=i[l+1+64]=pt(N,E,E),i[l+3+64]=i[l+2+64]=i[l+0+96]=i[l+1+96]=i[l+2+96]=i[l+3+96]=E}function ei(i,l){var g=i[l-1+0],b=i[l-1+32],N=i[l-1+64],E=i[l-1+96],T=i[l-1-32],D=i[l+0-32],U=i[l+1-32],W=i[l+2-32];i[l+0+0]=i[l+2+32]=g+T+1>>1,i[l+0+32]=i[l+2+64]=b+g+1>>1,i[l+0+64]=i[l+2+96]=N+b+1>>1,i[l+0+96]=E+N+1>>1,i[l+3+0]=pt(D,U,W),i[l+2+0]=pt(T,D,U),i[l+1+0]=i[l+3+32]=pt(g,T,D),i[l+1+32]=i[l+3+64]=pt(b,g,T),i[l+1+64]=i[l+3+96]=pt(N,b,g),i[l+1+96]=pt(E,N,b)}function Ya(i,l){var g;for(g=0;8>g;++g)r(i,l+32*g,i,l-32,8)}function dl(i,l){var g;for(g=0;8>g;++g)a(i,l,i[l-1],8),l+=32}function ta(i,l,g){var b;for(b=0;8>b;++b)a(l,g+32*b,i,8)}function hl(i,l){var g,b=8;for(g=0;8>g;++g)b+=i[l+g-32]+i[l-1+32*g];ta(b>>4,i,l)}function ti(i,l){var g,b=4;for(g=0;8>g;++g)b+=i[l+g-32];ta(b>>3,i,l)}function ni(i,l){var g,b=4;for(g=0;8>g;++g)b+=i[l-1+32*g];ta(b>>3,i,l)}function Yi(i,l){ta(128,i,l)}function na(i,l,g){var b=i[l-g],N=i[l+0],E=3*(N-b)+fl[1020+i[l-2*g]-i[l+g]],T=ao[112+(E+4>>3)];i[l-g]=Kn[255+b+ao[112+(E+3>>3)]],i[l+0]=Kn[255+N-T]}function ri(i,l,g,b){var N=i[l+0],E=i[l+g];return pr[255+i[l-2*g]-i[l-g]]>b||pr[255+E-N]>b}function As(i,l,g,b){return 4*pr[255+i[l-g]-i[l+0]]+pr[255+i[l-2*g]-i[l+g]]<=b}function ai(i,l,g,b,N){var E=i[l-3*g],T=i[l-2*g],D=i[l-g],U=i[l+0],W=i[l+g],ue=i[l+2*g],xe=i[l+3*g];return 4*pr[255+D-U]+pr[255+T-W]>b?0:pr[255+i[l-4*g]-E]<=N&&pr[255+E-T]<=N&&pr[255+T-D]<=N&&pr[255+xe-ue]<=N&&pr[255+ue-W]<=N&&pr[255+W-U]<=N}function Qa(i,l,g,b){var N=2*b+1;for(b=0;16>b;++b)As(i,l+b,g,N)&&na(i,l+b,g)}function si(i,l,g,b){var N=2*b+1;for(b=0;16>b;++b)As(i,l+b*g,1,N)&&na(i,l+b*g,1)}function Qi(i,l,g,b){var N;for(N=3;0<N;--N)Qa(i,l+=4*g,g,b)}function Xi(i,l,g,b){var N;for(N=3;0<N;--N)si(i,l+=4,g,b)}function ra(i,l,g,b,N,E,T,D){for(E=2*E+1;0<N--;){if(ai(i,l,g,E,T))if(ri(i,l,g,D))na(i,l,g);else{var U=i,W=l,ue=g,xe=U[W-2*ue],G=U[W-ue],he=U[W+0],ye=U[W+ue],Ne=U[W+2*ue],we=27*(Ie=fl[1020+3*(he-G)+fl[1020+xe-ye]])+63>>7,Ce=18*Ie+63>>7,Ie=9*Ie+63>>7;U[W-3*ue]=Kn[255+U[W-3*ue]+Ie],U[W-2*ue]=Kn[255+xe+Ce],U[W-ue]=Kn[255+G+we],U[W+0]=Kn[255+he-we],U[W+ue]=Kn[255+ye-Ce],U[W+2*ue]=Kn[255+Ne-Ie]}l+=b}}function aa(i,l,g,b,N,E,T,D){for(E=2*E+1;0<N--;){if(ai(i,l,g,E,T))if(ri(i,l,g,D))na(i,l,g);else{var U=i,W=l,ue=g,xe=U[W-ue],G=U[W+0],he=U[W+ue],ye=ao[112+(4+(Ne=3*(G-xe))>>3)],Ne=ao[112+(Ne+3>>3)],we=ye+1>>1;U[W-2*ue]=Kn[255+U[W-2*ue]+we],U[W-ue]=Kn[255+xe+Ne],U[W+0]=Kn[255+G-ye],U[W+ue]=Kn[255+he-we]}l+=b}}function Zi(i,l,g,b,N,E){ra(i,l,g,1,16,b,N,E)}function Xa(i,l,g,b,N,E){ra(i,l,1,g,16,b,N,E)}function eo(i,l,g,b,N,E){var T;for(T=3;0<T;--T)aa(i,l+=4*g,g,1,16,b,N,E)}function p(i,l,g,b,N,E){var T;for(T=3;0<T;--T)aa(i,l+=4,1,g,16,b,N,E)}function A(i,l,g,b,N,E,T,D){ra(i,l,N,1,8,E,T,D),ra(g,b,N,1,8,E,T,D)}function K(i,l,g,b,N,E,T,D){ra(i,l,1,N,8,E,T,D),ra(g,b,1,N,8,E,T,D)}function ie(i,l,g,b,N,E,T,D){aa(i,l+4*N,N,1,8,E,T,D),aa(g,b+4*N,N,1,8,E,T,D)}function me(i,l,g,b,N,E,T,D){aa(i,l+4,1,N,8,E,T,D),aa(g,b+4,1,N,8,E,T,D)}function Pe(){this.ba=new Lt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Rt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Fe(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ge(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ye(){this.ua=0,this.Wa=new z,this.vb=new z,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new de,this.yc=new ee}function ft(){this.xb=this.a=0,this.l=new _s,this.ca=new Lt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new V,this.Pb=0,this.wd=new V,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ye,this.ab=0,this.gc=u(4,Ge),this.Oc=0}function bt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new _s,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function It(i,l,g,b,N,E,T){for(i=i==null?0:i[l+0],l=0;l<T;++l)N[E+l]=i+g[b+l]&255,i=N[E+l]}function Zt(i,l,g,b,N,E,T){var D;if(i==null)It(null,null,g,b,N,E,T);else for(D=0;D<T;++D)N[E+D]=i[l+D]+g[b+D]&255}function vn(i,l,g,b,N,E,T){if(i==null)It(null,null,g,b,N,E,T);else{var D,U=i[l+0],W=U,ue=U;for(D=0;D<T;++D)W=ue+(U=i[l+D])-W,ue=g[b+D]+(-256&W?0>W?0:255:W)&255,W=U,N[E+D]=ue}}function Vt(i,l,g,b){var N=l.width,E=l.o;if(e(i!=null&&l!=null),0>g||0>=b||g+b>E)return null;if(!i.Cc){if(i.ga==null){var T;if(i.ga=new bt,(T=i.ga==null)||(T=l.width*l.o,e(i.Gb.length==0),i.Gb=s(T),i.Uc=0,i.Gb==null?T=0:(i.mb=i.Gb,i.nb=i.Uc,i.rc=null,T=1),T=!T),!T){T=i.ga;var D=i.Fa,U=i.P,W=i.qc,ue=i.mb,xe=i.nb,G=U+1,he=W-1,ye=T.l;if(e(D!=null&&ue!=null&&l!=null),Ea[0]=null,Ea[1]=It,Ea[2]=Zt,Ea[3]=vn,T.ca=ue,T.tb=xe,T.c=l.width,T.i=l.height,e(0<T.c&&0<T.i),1>=W)l=0;else if(T.$a=3&D[U+0],T.Z=D[U+0]>>2&3,T.Lc=D[U+0]>>4&3,U=D[U+0]>>6&3,0>T.$a||1<T.$a||4<=T.Z||1<T.Lc||U)l=0;else if(ye.put=at,ye.ac=Rr,ye.bc=Yr,ye.ma=T,ye.width=l.width,ye.height=l.height,ye.Da=l.Da,ye.v=l.v,ye.va=l.va,ye.j=l.j,ye.o=l.o,T.$a)e:{e(T.$a==1),l=Wa();t:for(;;){if(l==null){l=0;break e}if(e(T!=null),T.mc=l,l.c=T.c,l.i=T.i,l.l=T.l,l.l.ma=T,l.l.width=T.c,l.l.height=T.i,l.a=0,Se(l.m,D,G,he),!Tr(T.c,T.i,1,l,null)||(l.ab==1&&l.gc[0].hc==3&&br(l.s)?(T.ic=1,D=l.c*l.i,l.Ta=null,l.Ua=0,l.V=s(D),l.Ba=0,l.V==null?(l.a=1,l=0):l=1):(T.ic=0,l=Ga(l,T.c)),!l))break t;l=1;break e}T.mc=null,l=0}else l=he>=T.c*T.i;T=!l}if(T)return null;i.ga.Lc!=1?i.Ga=0:b=E-g}e(i.ga!=null),e(g+b<=E);e:{if(l=(D=i.ga).c,E=D.l.o,D.$a==0){if(G=i.rc,he=i.Vc,ye=i.Fa,U=i.P+1+g*l,W=i.mb,ue=i.nb+g*l,e(U<=i.P+i.qc),D.Z!=0)for(e(Ea[D.Z]!=null),T=0;T<b;++T)Ea[D.Z](G,he,ye,U,W,ue,l),G=W,he=ue,ue+=l,U+=l;else for(T=0;T<b;++T)r(W,ue,ye,U,l),G=W,he=ue,ue+=l,U+=l;i.rc=G,i.Vc=he}else{if(e(D.mc!=null),l=g+b,e((T=D.mc)!=null),e(l<=T.i),T.C>=l)l=1;else if(D.ic||kr(),D.ic){D=T.V,G=T.Ba,he=T.c;var Ne=T.i,we=(ye=1,U=T.$/he,W=T.$%he,ue=T.m,xe=T.s,T.$),Ce=he*Ne,Ie=he*l,qe=xe.wc,Te=we<Ie?Nn(xe,W,U):null;e(we<=Ce),e(l<=Ne),e(br(xe));t:for(;;){for(;!ue.h&&we<Ie;){if(W&qe||(Te=Nn(xe,W,U)),e(Te!=null),S(ue),256>(Ne=nn(Te.G[0],Te.H[0],ue)))D[G+we]=Ne,++we,++W>=he&&(W=0,++U<=l&&!(U%16)&&yr(T,U));else{if(!(280>Ne)){ye=0;break t}Ne=or(Ne-256,ue);var Qe,He=nn(Te.G[4],Te.H[4],ue);if(S(ue),!(we>=(He=lr(he,He=or(He,ue)))&&Ce-we>=Ne)){ye=0;break t}for(Qe=0;Qe<Ne;++Qe)D[G+we+Qe]=D[G+we+Qe-He];for(we+=Ne,W+=Ne;W>=he;)W-=he,++U<=l&&!(U%16)&&yr(T,U);we<Ie&&W&qe&&(Te=Nn(xe,W,U))}e(ue.h==q(ue))}yr(T,U>l?l:U);break t}!ye||ue.h&&we<Ce?(ye=0,T.a=ue.h?5:3):T.$=we,l=ye}else l=wr(T,T.V,T.Ba,T.c,T.i,l,bs);if(!l){b=0;break e}}g+b>=E&&(i.Cc=1),b=1}if(!b)return null;if(i.Cc&&((b=i.ga)!=null&&(b.mc=null),i.ga=null,0<i.Ga))return alert("todo:WebPDequantizeLevels"),null}return i.nb+g*N}function wn(i,l,g,b,N,E){for(;0<N--;){var T,D=i,U=l+(g?1:0),W=i,ue=l+(g?0:3);for(T=0;T<b;++T){var xe=W[ue+4*T];xe!=255&&(xe*=32897,D[U+4*T+0]=D[U+4*T+0]*xe>>23,D[U+4*T+1]=D[U+4*T+1]*xe>>23,D[U+4*T+2]=D[U+4*T+2]*xe>>23)}l+=E}}function gn(i,l,g,b,N){for(;0<b--;){var E;for(E=0;E<g;++E){var T=i[l+2*E+0],D=15&(W=i[l+2*E+1]),U=4369*D,W=(240&W|W>>4)*U>>16;i[l+2*E+0]=(240&T|T>>4)*U>>16&240|(15&T|T<<4)*U>>16>>4&15,i[l+2*E+1]=240&W|D}l+=N}}function Cn(i,l,g,b,N,E,T,D){var U,W,ue=255;for(W=0;W<N;++W){for(U=0;U<b;++U){var xe=i[l+U];E[T+4*U]=xe,ue&=xe}l+=g,T+=D}return ue!=255}function sa(i,l,g,b,N){var E;for(E=0;E<N;++E)g[b+E]=i[l+E]>>8}function kr(){mi=wn,Tu=gn,qu=Cn,Mu=sa}function ia(i,l,g){$[i]=function(b,N,E,T,D,U,W,ue,xe,G,he,ye,Ne,we,Ce,Ie,qe){var Te,Qe=qe-1>>1,He=D[U+0]|W[ue+0]<<16,wt=xe[G+0]|he[ye+0]<<16;e(b!=null);var Je=3*He+wt+131074>>2;for(l(b[N+0],255&Je,Je>>16,Ne,we),E!=null&&(Je=3*wt+He+131074>>2,l(E[T+0],255&Je,Je>>16,Ce,Ie)),Te=1;Te<=Qe;++Te){var Nt=D[U+Te]|W[ue+Te]<<16,kn=xe[G+Te]|he[ye+Te]<<16,_t=He+Nt+wt+kn+524296,Ke=_t+2*(Nt+wt)>>3;Je=Ke+He>>1,He=(_t=_t+2*(He+kn)>>3)+Nt>>1,l(b[N+2*Te-1],255&Je,Je>>16,Ne,we+(2*Te-1)*g),l(b[N+2*Te-0],255&He,He>>16,Ne,we+(2*Te-0)*g),E!=null&&(Je=_t+wt>>1,He=Ke+kn>>1,l(E[T+2*Te-1],255&Je,Je>>16,Ce,Ie+(2*Te-1)*g),l(E[T+2*Te+0],255&He,He>>16,Ce,Ie+(2*Te+0)*g)),He=Nt,wt=kn}1&qe||(Je=3*He+wt+131074>>2,l(b[N+qe-1],255&Je,Je>>16,Ne,we+(qe-1)*g),E!=null&&(Je=3*wt+He+131074>>2,l(E[T+qe-1],255&Je,Je>>16,Ce,Ie+(qe-1)*g)))}}function ii(){vr[so]=yh,vr[io]=Gu,vr[Uu]=wh,vr[oo]=Ju,vr[lo]=Ku,vr[pl]=Yu,vr[zu]=_h,vr[vl]=Gu,vr[gl]=Ju,vr[uo]=Ku,vr[ml]=Yu}function Ls(i){return i&-16384?0>i?0:255:i>>kh}function _a(i,l){return Ls((19077*i>>8)+(26149*l>>8)-14234)}function Za(i,l,g){return Ls((19077*i>>8)-(6419*l>>8)-(13320*g>>8)+8708)}function es(i,l){return Ls((19077*i>>8)+(33050*l>>8)-17685)}function ka(i,l,g,b,N){b[N+0]=_a(i,g),b[N+1]=Za(i,l,g),b[N+2]=es(i,l)}function Pn(i,l,g,b,N){b[N+0]=es(i,l),b[N+1]=Za(i,l,g),b[N+2]=_a(i,g)}function ts(i,l,g,b,N){var E=Za(i,l,g);l=E<<3&224|es(i,l)>>3,b[N+0]=248&_a(i,g)|E>>5,b[N+1]=l}function ns(i,l,g,b,N){var E=240&es(i,l)|15;b[N+0]=240&_a(i,g)|Za(i,l,g)>>4,b[N+1]=E}function oi(i,l,g,b,N){b[N+0]=255,ka(i,l,g,b,N+1)}function li(i,l,g,b,N){Pn(i,l,g,b,N),b[N+3]=255}function jn(i,l,g,b,N){ka(i,l,g,b,N),b[N+3]=255}function oa(i,l,g){$[i]=function(b,N,E,T,D,U,W,ue,xe){for(var G=ue+(-2&xe)*g;ue!=G;)l(b[N+0],E[T+0],D[U+0],W,ue),l(b[N+1],E[T+0],D[U+0],W,ue+g),N+=2,++T,++U,ue+=2*g;1&xe&&l(b[N+0],E[T+0],D[U+0],W,ue)}}function Ns(i,l,g){return g==0?i==0?l==0?6:5:l==0?4:0:g}function to(i,l,g,b,N){switch(i>>>30){case 3:is(l,g,b,N,0);break;case 2:fr(l,g,b,N);break;case 1:Ft(l,g,b,N)}}function hr(i,l){var g,b,N=l.M,E=l.Nb,T=i.oc,D=i.pc+40,U=i.oc,W=i.pc+584,ue=i.oc,xe=i.pc+600;for(g=0;16>g;++g)T[D+32*g-1]=129;for(g=0;8>g;++g)U[W+32*g-1]=129,ue[xe+32*g-1]=129;for(0<N?T[D-1-32]=U[W-1-32]=ue[xe-1-32]=129:(a(T,D-32-1,127,21),a(U,W-32-1,127,9),a(ue,xe-32-1,127,9)),b=0;b<i.za;++b){var G=l.ya[l.aa+b];if(0<b){for(g=-1;16>g;++g)r(T,D+32*g-4,T,D+32*g+12,4);for(g=-1;8>g;++g)r(U,W+32*g-4,U,W+32*g+4,4),r(ue,xe+32*g-4,ue,xe+32*g+4,4)}var he=i.Gd,ye=i.Hd+b,Ne=G.ad,we=G.Hc;if(0<N&&(r(T,D-32,he[ye].y,0,16),r(U,W-32,he[ye].f,0,8),r(ue,xe-32,he[ye].ea,0,8)),G.Za){var Ce=T,Ie=D-32+16;for(0<N&&(b>=i.za-1?a(Ce,Ie,he[ye].y[15],4):r(Ce,Ie,he[ye+1].y,0,4)),g=0;4>g;g++)Ce[Ie+128+g]=Ce[Ie+256+g]=Ce[Ie+384+g]=Ce[Ie+0+g];for(g=0;16>g;++g,we<<=2)Ce=T,Ie=D+Xu[g],xr[G.Ob[g]](Ce,Ie),to(we,Ne,16*+g,Ce,Ie)}else if(Ce=Ns(b,N,G.Ob[0]),Ia[Ce](T,D),we!=0)for(g=0;16>g;++g,we<<=2)to(we,Ne,16*+g,T,D+Xu[g]);for(g=G.Gc,Ce=Ns(b,N,G.Dd),ca[Ce](U,W),ca[Ce](ue,xe),we=Ne,Ce=U,Ie=W,255&(G=0|g)&&(170&G?Dr(we,256,Ce,Ie):jt(we,256,Ce,Ie)),G=ue,we=xe,255&(g>>=8)&&(170&g?Dr(Ne,320,G,we):jt(Ne,320,G,we)),N<i.Ub-1&&(r(he[ye].y,0,T,D+480,16),r(he[ye].f,0,U,W+224,8),r(he[ye].ea,0,ue,xe+224,8)),g=8*E*i.B,he=i.sa,ye=i.ta+16*b+16*E*i.R,Ne=i.qa,G=i.ra+8*b+g,we=i.Ha,Ce=i.Ia+8*b+g,g=0;16>g;++g)r(he,ye+g*i.R,T,D+32*g,16);for(g=0;8>g;++g)r(Ne,G+g*i.B,U,W+32*g,8),r(we,Ce+g*i.B,ue,xe+32*g,8)}}function rs(i,l,g,b,N,E,T,D,U){var W=[0],ue=[0],xe=0,G=U!=null?U.kd:0,he=U??new Fe;if(i==null||12>g)return 7;he.data=i,he.w=l,he.ha=g,l=[l],g=[g],he.gb=[he.gb];e:{var ye=l,Ne=g,we=he.gb;if(e(i!=null),e(Ne!=null),e(we!=null),we[0]=0,12<=Ne[0]&&!n(i,ye[0],"RIFF")){if(n(i,ye[0]+8,"WEBP")){we=3;break e}var Ce=Q(i,ye[0]+4);if(12>Ce||4294967286<Ce){we=3;break e}if(G&&Ce>Ne[0]-8){we=7;break e}we[0]=Ce,ye[0]+=12,Ne[0]-=12}we=0}if(we!=0)return we;for(Ce=0<he.gb[0],g=g[0];;){e:{var Ie=i;Ne=l,we=g;var qe=W,Te=ue,Qe=ye=[0];if((Je=xe=[xe])[0]=0,8>we[0])we=7;else{if(!n(Ie,Ne[0],"VP8X")){if(Q(Ie,Ne[0]+4)!=10){we=3;break e}if(18>we[0]){we=7;break e}var He=Q(Ie,Ne[0]+8),wt=1+be(Ie,Ne[0]+12);if(2147483648<=wt*(Ie=1+be(Ie,Ne[0]+15))){we=3;break e}Qe!=null&&(Qe[0]=He),qe!=null&&(qe[0]=wt),Te!=null&&(Te[0]=Ie),Ne[0]+=18,we[0]-=18,Je[0]=1}we=0}}if(xe=xe[0],ye=ye[0],we!=0)return we;if(Ne=!!(2&ye),!Ce&&xe)return 3;if(E!=null&&(E[0]=!!(16&ye)),T!=null&&(T[0]=Ne),D!=null&&(D[0]=0),T=W[0],ye=ue[0],xe&&Ne&&U==null){we=0;break}if(4>g){we=7;break}if(Ce&&xe||!Ce&&!xe&&!n(i,l[0],"ALPH")){g=[g],he.na=[he.na],he.P=[he.P],he.Sa=[he.Sa];e:{He=i,we=l,Ce=g;var Je=he.gb;qe=he.na,Te=he.P,Qe=he.Sa,wt=22,e(He!=null),e(Ce!=null),Ie=we[0];var Nt=Ce[0];for(e(qe!=null),e(Qe!=null),qe[0]=null,Te[0]=null,Qe[0]=0;;){if(we[0]=Ie,Ce[0]=Nt,8>Nt){we=7;break e}var kn=Q(He,Ie+4);if(4294967286<kn){we=3;break e}var _t=8+kn+1&-2;if(wt+=_t,0<Je&&wt>Je){we=3;break e}if(!n(He,Ie,"VP8 ")||!n(He,Ie,"VP8L")){we=0;break e}if(Nt[0]<_t){we=7;break e}n(He,Ie,"ALPH")||(qe[0]=He,Te[0]=Ie+8,Qe[0]=kn),Ie+=_t,Nt-=_t}}if(g=g[0],he.na=he.na[0],he.P=he.P[0],he.Sa=he.Sa[0],we!=0)break}g=[g],he.Ja=[he.Ja],he.xa=[he.xa];e:if(Je=i,we=l,Ce=g,qe=he.gb[0],Te=he.Ja,Qe=he.xa,He=we[0],Ie=!n(Je,He,"VP8 "),wt=!n(Je,He,"VP8L"),e(Je!=null),e(Ce!=null),e(Te!=null),e(Qe!=null),8>Ce[0])we=7;else{if(Ie||wt){if(Je=Q(Je,He+4),12<=qe&&Je>qe-12){we=3;break e}if(G&&Je>Ce[0]-8){we=7;break e}Te[0]=Je,we[0]+=8,Ce[0]-=8,Qe[0]=wt}else Qe[0]=5<=Ce[0]&&Je[He+0]==47&&!(Je[He+4]>>5),Te[0]=Ce[0];we=0}if(g=g[0],he.Ja=he.Ja[0],he.xa=he.xa[0],l=l[0],we!=0)break;if(4294967286<he.Ja)return 3;if(D==null||Ne||(D[0]=he.xa?2:1),T=[T],ye=[ye],he.xa){if(5>g){we=7;break}D=T,G=ye,Ne=E,i==null||5>g?i=0:5<=g&&i[l+0]==47&&!(i[l+4]>>5)?(Ce=[0],Je=[0],qe=[0],Se(Te=new V,i,l,g),Qr(Te,Ce,Je,qe)?(D!=null&&(D[0]=Ce[0]),G!=null&&(G[0]=Je[0]),Ne!=null&&(Ne[0]=qe[0]),i=1):i=0):i=0}else{if(10>g){we=7;break}D=ye,i==null||10>g||!Hi(i,l+3,g-3)?i=0:(G=i[l+0]|i[l+1]<<8|i[l+2]<<16,Ne=16383&(i[l+7]<<8|i[l+6]),i=16383&(i[l+9]<<8|i[l+8]),1&G||3<(G>>1&7)||!(G>>4&1)||G>>5>=he.Ja||!Ne||!i?i=0:(T&&(T[0]=Ne),D&&(D[0]=i),i=1))}if(!i||(T=T[0],ye=ye[0],xe&&(W[0]!=T||ue[0]!=ye)))return 3;U!=null&&(U[0]=he,U.offset=l-U.w,e(4294967286>l-U.w),e(U.offset==U.ha-g));break}return we==0||we==7&&xe&&U==null?(E!=null&&(E[0]|=he.na!=null&&0<he.na.length),b!=null&&(b[0]=T),N!=null&&(N[0]=ye),0):we}function ui(i,l,g){var b=l.width,N=l.height,E=0,T=0,D=b,U=N;if(l.Da=i!=null&&0<i.Da,l.Da&&(D=i.cd,U=i.bd,E=i.v,T=i.j,11>g||(E&=-2,T&=-2),0>E||0>T||0>=D||0>=U||E+D>b||T+U>N))return 0;if(l.v=E,l.j=T,l.va=E+D,l.o=T+U,l.U=D,l.T=U,l.da=i!=null&&0<i.da,l.da){if(!Y(D,U,g=[i.ib],E=[i.hb]))return 0;l.ib=g[0],l.hb=E[0]}return l.ob=i!=null&&i.ob,l.Kb=i==null||!i.Sd,l.da&&(l.ob=l.ib<3*b/4&&l.hb<3*N/4,l.Kb=0),1}function ci(i){if(i==null)return 2;if(11>i.S){var l=i.f.RGBA;l.fb+=(i.height-1)*l.A,l.A=-l.A}else l=i.f.kb,i=i.height,l.O+=(i-1)*l.fa,l.fa=-l.fa,l.N+=(i-1>>1)*l.Ab,l.Ab=-l.Ab,l.W+=(i-1>>1)*l.Db,l.Db=-l.Db,l.F!=null&&(l.J+=(i-1)*l.lb,l.lb=-l.lb);return 0}function xa(i,l,g,b){if(b==null||0>=i||0>=l)return 2;if(g!=null){if(g.Da){var N=g.cd,E=g.bd,T=-2&g.v,D=-2&g.j;if(0>T||0>D||0>=N||0>=E||T+N>i||D+E>l)return 2;i=N,l=E}if(g.da){if(!Y(i,l,N=[g.ib],E=[g.hb]))return 2;i=N[0],l=E[0]}}b.width=i,b.height=l;e:{var U=b.width,W=b.height;if(i=b.S,0>=U||0>=W||!(i>=so&&13>i))i=2;else{if(0>=b.Rd&&b.sd==null){T=E=N=l=0;var ue=(D=U*Zu[i])*W;if(11>i||(E=(W+1)/2*(l=(U+1)/2),i==12&&(T=(N=U)*W)),(W=s(ue+2*E+T))==null){i=1;break e}b.sd=W,11>i?((U=b.f.RGBA).eb=W,U.fb=0,U.A=D,U.size=ue):((U=b.f.kb).y=W,U.O=0,U.fa=D,U.Fd=ue,U.f=W,U.N=0+ue,U.Ab=l,U.Cd=E,U.ea=W,U.W=0+ue+E,U.Db=l,U.Ed=E,i==12&&(U.F=W,U.J=0+ue+2*E),U.Tc=T,U.lb=N)}if(l=1,N=b.S,E=b.width,T=b.height,N>=so&&13>N)if(11>N)i=b.f.RGBA,l&=(D=Math.abs(i.A))*(T-1)+E<=i.size,l&=D>=E*Zu[N],l&=i.eb!=null;else{i=b.f.kb,D=(E+1)/2,ue=(T+1)/2,U=Math.abs(i.fa),W=Math.abs(i.Ab);var xe=Math.abs(i.Db),G=Math.abs(i.lb),he=G*(T-1)+E;l&=U*(T-1)+E<=i.Fd,l&=W*(ue-1)+D<=i.Cd,l=(l&=xe*(ue-1)+D<=i.Ed)&U>=E&W>=D&xe>=D,l&=i.y!=null,l&=i.f!=null,l&=i.ea!=null,N==12&&(l&=G>=E,l&=he<=i.Tc,l&=i.F!=null)}else l=0;i=l?0:2}}return i!=0||g!=null&&g.fd&&(i=ci(b)),i}var as=64,Gn=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Jn=24,Sa=32,la=8,Aa=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Be("Predictor0","PredictorAdd0"),$.Predictor0=function(){return 4278190080},$.Predictor1=function(i){return i},$.Predictor2=function(i,l,g){return l[g+0]},$.Predictor3=function(i,l,g){return l[g+1]},$.Predictor4=function(i,l,g){return l[g-1]},$.Predictor5=function(i,l,g){return Ve(Ve(i,l[g+1]),l[g+0])},$.Predictor6=function(i,l,g){return Ve(i,l[g-1])},$.Predictor7=function(i,l,g){return Ve(i,l[g+0])},$.Predictor8=function(i,l,g){return Ve(l[g-1],l[g+0])},$.Predictor9=function(i,l,g){return Ve(l[g+0],l[g+1])},$.Predictor10=function(i,l,g){return Ve(Ve(i,l[g-1]),Ve(l[g+0],l[g+1]))},$.Predictor11=function(i,l,g){var b=l[g+0];return 0>=et(b>>24&255,i>>24&255,(l=l[g-1])>>24&255)+et(b>>16&255,i>>16&255,l>>16&255)+et(b>>8&255,i>>8&255,l>>8&255)+et(255&b,255&i,255&l)?b:i},$.Predictor12=function(i,l,g){var b=l[g+0];return(At((i>>24&255)+(b>>24&255)-((l=l[g-1])>>24&255))<<24|At((i>>16&255)+(b>>16&255)-(l>>16&255))<<16|At((i>>8&255)+(b>>8&255)-(l>>8&255))<<8|At((255&i)+(255&b)-(255&l)))>>>0},$.Predictor13=function(i,l,g){var b=l[g-1];return(lt((i=Ve(i,l[g+0]))>>24&255,b>>24&255)<<24|lt(i>>16&255,b>>16&255)<<16|lt(i>>8&255,b>>8&255)<<8|lt(255&i,255&b))>>>0};var di=$.PredictorAdd0;$.PredictorAdd1=ut,Be("Predictor2","PredictorAdd2"),Be("Predictor3","PredictorAdd3"),Be("Predictor4","PredictorAdd4"),Be("Predictor5","PredictorAdd5"),Be("Predictor6","PredictorAdd6"),Be("Predictor7","PredictorAdd7"),Be("Predictor8","PredictorAdd8"),Be("Predictor9","PredictorAdd9"),Be("Predictor10","PredictorAdd10"),Be("Predictor11","PredictorAdd11"),Be("Predictor12","PredictorAdd12"),Be("Predictor13","PredictorAdd13");var Cs=$.PredictorAdd2;De("ColorIndexInverseTransform","MapARGB","32b",function(i){return i>>8&255},function(i){return i}),De("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(i){return i},function(i){return i>>8&255});var on,no=$.ColorIndexInverseTransform,Br=$.MapARGB,jr=$.VP8LColorIndexInverseTransformAlpha,hi=$.MapAlpha,fi=$.VP8LPredictorsAdd=[];fi.length=16,($.VP8LPredictors=[]).length=16,($.VP8LPredictorsAdd_C=[]).length=16,($.VP8LPredictors_C=[]).length=16;var pi,vi,La,Na,Ca,ss,Pa,is,fr,Dr,Ft,jt,ln,_n,ua,gi,Ps,ro,Cu,Pu,Iu,Eu,Ru,Fu,mi,Tu,qu,Mu,Ou=s(511),Bu=s(2041),ju=s(225),Du=s(767),$u=0,fl=Bu,ao=ju,Kn=Du,pr=Ou,so=0,io=1,Uu=2,oo=3,lo=4,pl=5,zu=6,vl=7,gl=8,uo=9,ml=10,sh=[2,3,7],ih=[3,3,11],Hu=[280,256,256,256,40],oh=[0,1,1,1,0],lh=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],uh=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],ch=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],dh=8,bl=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],yl=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],bi=null,hh=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],fh=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Vu=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ph=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],vh=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],gh=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],mh=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ia=[],xr=[],ca=[],bh=1,Wu=2,Ea=[],vr=[];ia("UpsampleRgbLinePair",ka,3),ia("UpsampleBgrLinePair",Pn,3),ia("UpsampleRgbaLinePair",jn,4),ia("UpsampleBgraLinePair",li,4),ia("UpsampleArgbLinePair",oi,4),ia("UpsampleRgba4444LinePair",ns,2),ia("UpsampleRgb565LinePair",ts,2);var yh=$.UpsampleRgbLinePair,wh=$.UpsampleBgrLinePair,Gu=$.UpsampleRgbaLinePair,Ju=$.UpsampleBgraLinePair,Ku=$.UpsampleArgbLinePair,Yu=$.UpsampleRgba4444LinePair,_h=$.UpsampleRgb565LinePair,co=16,ho=1<<co-1,yi=-227,wl=482,kh=6,Qu=0,xh=s(256),Sh=s(256),Ah=s(256),Lh=s(256),Nh=s(wl-yi),Ch=s(wl-yi);oa("YuvToRgbRow",ka,3),oa("YuvToBgrRow",Pn,3),oa("YuvToRgbaRow",jn,4),oa("YuvToBgraRow",li,4),oa("YuvToArgbRow",oi,4),oa("YuvToRgba4444Row",ns,2),oa("YuvToRgb565Row",ts,2);var Xu=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],fo=[0,2,8],Ph=[8,7,6,4,4,2,2,2,1,1,1,1],Ih=1;this.WebPDecodeRGBA=function(i,l,g,b,N){var E=io,T=new Pe,D=new Lt;T.ba=D,D.S=E,D.width=[D.width],D.height=[D.height];var U=D.width,W=D.height,ue=new rt;if(ue==null||i==null)var xe=2;else e(ue!=null),xe=rs(i,l,g,ue.width,ue.height,ue.Pd,ue.Qd,ue.format,null);if(xe!=0?U=0:(U!=null&&(U[0]=ue.width[0]),W!=null&&(W[0]=ue.height[0]),U=1),U){D.width=D.width[0],D.height=D.height[0],b!=null&&(b[0]=D.width),N!=null&&(N[0]=D.height);e:{if(b=new _s,(N=new Fe).data=i,N.w=l,N.ha=g,N.kd=1,l=[0],e(N!=null),((i=rs(N.data,N.w,N.ha,null,null,null,l,null,N))==0||i==7)&&l[0]&&(i=4),(l=i)==0){if(e(T!=null),b.data=N.data,b.w=N.w+N.offset,b.ha=N.ha-N.offset,b.put=at,b.ac=Rr,b.bc=Yr,b.ma=T,N.xa){if((i=Wa())==null){T=1;break e}if(function(G,he){var ye=[0],Ne=[0],we=[0];t:for(;;){if(G==null)return 0;if(he==null)return G.a=2,0;if(G.l=he,G.a=0,Se(G.m,he.data,he.w,he.ha),!Qr(G.m,ye,Ne,we)){G.a=3;break t}if(G.xb=Wu,he.width=ye[0],he.height=Ne[0],!Tr(ye[0],Ne[0],1,G,null))break t;return 1}return e(G.a!=0),0}(i,b)){if(b=(l=xa(b.width,b.height,T.Oa,T.ba))==0){t:{b=i;n:for(;;){if(b==null){b=0;break t}if(e(b.s.yc!=null),e(b.s.Ya!=null),e(0<b.s.Wb),e((g=b.l)!=null),e((N=g.ma)!=null),b.xb!=0){if(b.ca=N.ba,b.tb=N.tb,e(b.ca!=null),!ui(N.Oa,g,oo)){b.a=2;break n}if(!Ga(b,g.width)||g.da)break n;if((g.da||it(b.ca.S))&&kr(),11>b.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),b.ca.f.kb.F!=null&&kr()),b.Pb&&0<b.s.ua&&b.s.vb.X==null&&!_(b.s.vb,b.s.Wa.Xa)){b.a=1;break n}b.xb=0}if(!wr(b,b.V,b.Ba,b.c,b.i,g.o,wa))break n;N.Dc=b.Ma,b=1;break t}e(b.a!=0),b=0}b=!b}b&&(l=i.a)}else l=i.a}else{if((i=new Xo)==null){T=1;break e}if(i.Fa=N.na,i.P=N.P,i.qc=N.Sa,Mr(i,b)){if((l=xa(b.width,b.height,T.Oa,T.ba))==0){if(i.Aa=0,g=T.Oa,e((N=i)!=null),g!=null){if(0<(U=0>(U=g.Md)?0:100<U?255:255*U/100)){for(W=ue=0;4>W;++W)12>(xe=N.pb[W]).lc&&(xe.ia=U*Ph[0>xe.lc?0:xe.lc]>>3),ue|=xe.ia;ue&&(alert("todo:VP8InitRandom"),N.ia=1)}N.Ga=g.Id,100<N.Ga?N.Ga=100:0>N.Ga&&(N.Ga=0)}(function(G,he){if(G==null)return 0;if(he==null)return pn(G,2,"NULL VP8Io parameter in VP8Decode().");if(!G.cb&&!Mr(G,he))return 0;if(e(G.cb),he.ac==null||he.ac(he)){he.ob&&(G.L=0);var ye=fo[G.L];if(G.L==2?(G.yb=0,G.zb=0):(G.yb=he.v-ye>>4,G.zb=he.j-ye>>4,0>G.yb&&(G.yb=0),0>G.zb&&(G.zb=0)),G.Va=he.o+15+ye>>4,G.Hb=he.va+15+ye>>4,G.Hb>G.za&&(G.Hb=G.za),G.Va>G.Ub&&(G.Va=G.Ub),0<G.L){var Ne=G.ed;for(ye=0;4>ye;++ye){var we;if(G.Qa.Cb){var Ce=G.Qa.Lb[ye];G.Qa.Fb||(Ce+=Ne.Tb)}else Ce=Ne.Tb;for(we=0;1>=we;++we){var Ie=G.gd[ye][we],qe=Ce;if(Ne.Pc&&(qe+=Ne.vd[0],we&&(qe+=Ne.od[0])),0<(qe=0>qe?0:63<qe?63:qe)){var Te=qe;0<Ne.wb&&(Te=4<Ne.wb?Te>>2:Te>>1)>9-Ne.wb&&(Te=9-Ne.wb),1>Te&&(Te=1),Ie.dd=Te,Ie.tc=2*qe+Te,Ie.ld=40<=qe?2:15<=qe?1:0}else Ie.tc=0;Ie.La=we}}}ye=0}else pn(G,6,"Frame setup failed"),ye=G.a;if(ye=ye==0){if(ye){G.$c=0,0<G.Aa||(G.Ic=Ih);t:{ye=G.Ic,Ne=4*(Te=G.za);var Qe=32*Te,He=Te+1,wt=0<G.L?Te*(0<G.Aa?2:1):0,Je=(G.Aa==2?2:1)*Te;if((Ie=Ne+832+(we=3*(16*ye+fo[G.L])/2*Qe)+(Ce=G.Fa!=null&&0<G.Fa.length?G.Kc.c*G.Kc.i:0))!=Ie)ye=0;else{if(Ie>G.Vb){if(G.Vb=0,G.Ec=s(Ie),G.Fc=0,G.Ec==null){ye=pn(G,1,"no memory during frame initialization.");break t}G.Vb=Ie}Ie=G.Ec,qe=G.Fc,G.Ac=Ie,G.Bc=qe,qe+=Ne,G.Gd=u(Qe,Ui),G.Hd=0,G.rb=u(He+1,Ys),G.sb=1,G.wa=wt?u(wt,cr):null,G.Y=0,G.D.Nb=0,G.D.wa=G.wa,G.D.Y=G.Y,0<G.Aa&&(G.D.Y+=Te),e(!0),G.oc=Ie,G.pc=qe,qe+=832,G.ya=u(Je,Qs),G.aa=0,G.D.ya=G.ya,G.D.aa=G.aa,G.Aa==2&&(G.D.aa+=Te),G.R=16*Te,G.B=8*Te,Te=(Qe=fo[G.L])*G.R,Qe=Qe/2*G.B,G.sa=Ie,G.ta=qe+Te,G.qa=G.sa,G.ra=G.ta+16*ye*G.R+Qe,G.Ha=G.qa,G.Ia=G.ra+8*ye*G.B+Qe,G.$c=0,qe+=we,G.mb=Ce?Ie:null,G.nb=Ce?qe:null,e(qe+Ce<=G.Fc+G.Vb),Vi(G),a(G.Ac,G.Bc,0,Ne),ye=1}}if(ye){if(he.ka=0,he.y=G.sa,he.O=G.ta,he.f=G.qa,he.N=G.ra,he.ea=G.Ha,he.Vd=G.Ia,he.fa=G.R,he.Rc=G.B,he.F=null,he.J=0,!$u){for(ye=-255;255>=ye;++ye)Ou[255+ye]=0>ye?-ye:ye;for(ye=-1020;1020>=ye;++ye)Bu[1020+ye]=-128>ye?-128:127<ye?127:ye;for(ye=-112;112>=ye;++ye)ju[112+ye]=-16>ye?-16:15<ye?15:ye;for(ye=-255;510>=ye;++ye)Du[255+ye]=0>ye?0:255<ye?255:ye;$u=1}Pa=xs,is=el,Dr=Or,Ft=Gi,jt=Ji,fr=Zo,ln=Zi,_n=Xa,ua=A,gi=K,Ps=eo,ro=p,Cu=ie,Pu=me,Iu=Qa,Eu=si,Ru=Qi,Fu=Xi,xr[0]=ll,xr[1]=tl,xr[2]=il,xr[3]=ol,xr[4]=Zr,xr[5]=ul,xr[6]=ea,xr[7]=cl,xr[8]=ei,xr[9]=Ss,Ia[0]=al,Ia[1]=rl,Ia[2]=Xs,Ia[3]=Ki,Ia[4]=Ka,Ia[5]=Zs,Ia[6]=sl,ca[0]=hl,ca[1]=nl,ca[2]=Ya,ca[3]=dl,ca[4]=ni,ca[5]=ti,ca[6]=Yi,ye=1}else ye=0}ye&&(ye=function(Nt,kn){for(Nt.M=0;Nt.M<Nt.Va;++Nt.M){var _t,Ke=Nt.Jc[Nt.M&Nt.Xb],$e=Nt.m,un=Nt;for(_t=0;_t<un.za;++_t){var mt=$e,Ct=un,Jt=Ct.Ac,In=Ct.Bc+4*_t,Dn=Ct.zc,rn=Ct.ya[Ct.aa+_t];if(Ct.Qa.Bb?rn.$b=J(mt,Ct.Pa.jb[0])?2+J(mt,Ct.Pa.jb[2]):J(mt,Ct.Pa.jb[1]):rn.$b=0,Ct.kc&&(rn.Ad=J(mt,Ct.Bd)),rn.Za=!J(mt,145)+0,rn.Za){var Tn=rn.Ob,$n=0;for(Ct=0;4>Ct;++Ct){var xn,Et=Dn[0+Ct];for(xn=0;4>xn;++xn){Et=vh[Jt[In+xn]][Et];for(var Mt=Vu[J(mt,Et[0])];0<Mt;)Mt=Vu[2*Mt+J(mt,Et[Mt])];Et=-Mt,Jt[In+xn]=Et}r(Tn,$n,Jt,In,4),$n+=4,Dn[0+Ct]=Et}}else Et=J(mt,156)?J(mt,128)?1:3:J(mt,163)?2:0,rn.Ob[0]=Et,a(Jt,In,Et,4),a(Dn,0,Et,4);rn.Dd=J(mt,142)?J(mt,114)?J(mt,183)?1:3:2:0}if(un.m.Ka)return pn(Nt,7,"Premature end-of-partition0 encountered.");for(;Nt.ja<Nt.za;++Nt.ja){if(un=Ke,mt=($e=Nt).rb[$e.sb-1],Jt=$e.rb[$e.sb+$e.ja],_t=$e.ya[$e.aa+$e.ja],In=$e.kc?_t.Ad:0)mt.la=Jt.la=0,_t.Za||(mt.Na=Jt.Na=0),_t.Hc=0,_t.Gc=0,_t.ia=0;else{var an,Ot;if(mt=Jt,Jt=un,In=$e.Pa.Xc,Dn=$e.ya[$e.aa+$e.ja],rn=$e.pb[Dn.$b],Ct=Dn.ad,Tn=0,$n=$e.rb[$e.sb-1],Et=xn=0,a(Ct,Tn,0,384),Dn.Za)var En=0,Sr=In[3];else{Mt=s(16);var cn=mt.Na+$n.Na;if(cn=bi(Jt,In[1],cn,rn.Eb,0,Mt,0),mt.Na=$n.Na=(0<cn)+0,1<cn)Pa(Mt,0,Ct,Tn);else{var zn=Mt[0]+3>>3;for(Mt=0;256>Mt;Mt+=16)Ct[Tn+Mt]=zn}En=1,Sr=In[0]}var Dt=15&mt.la,Sn=15&$n.la;for(Mt=0;4>Mt;++Mt){var Yn=1&Sn;for(zn=Ot=0;4>zn;++zn)Dt=Dt>>1|(Yn=(cn=bi(Jt,Sr,cn=Yn+(1&Dt),rn.Sc,En,Ct,Tn))>En)<<7,Ot=Ot<<2|(3<cn?3:1<cn?2:Ct[Tn+0]!=0),Tn+=16;Dt>>=4,Sn=Sn>>1|Yn<<7,xn=(xn<<8|Ot)>>>0}for(Sr=Dt,En=Sn>>4,an=0;4>an;an+=2){for(Ot=0,Dt=mt.la>>4+an,Sn=$n.la>>4+an,Mt=0;2>Mt;++Mt){for(Yn=1&Sn,zn=0;2>zn;++zn)cn=Yn+(1&Dt),Dt=Dt>>1|(Yn=0<(cn=bi(Jt,In[2],cn,rn.Qc,0,Ct,Tn)))<<3,Ot=Ot<<2|(3<cn?3:1<cn?2:Ct[Tn+0]!=0),Tn+=16;Dt>>=2,Sn=Sn>>1|Yn<<5}Et|=Ot<<4*an,Sr|=Dt<<4<<an,En|=(240&Sn)<<an}mt.la=Sr,$n.la=En,Dn.Hc=xn,Dn.Gc=Et,Dn.ia=43690&Et?0:rn.ia,In=!(xn|Et)}if(0<$e.L&&($e.wa[$e.Y+$e.ja]=$e.gd[_t.$b][_t.Za],$e.wa[$e.Y+$e.ja].La|=!In),un.Ka)return pn(Nt,7,"Premature end-of-file encountered.")}if(Vi(Nt),$e=kn,un=1,_t=(Ke=Nt).D,mt=0<Ke.L&&Ke.M>=Ke.zb&&Ke.M<=Ke.Va,Ke.Aa==0)t:{if(_t.M=Ke.M,_t.uc=mt,hr(Ke,_t),un=1,_t=(Ot=Ke.D).Nb,mt=(Et=fo[Ke.L])*Ke.R,Jt=Et/2*Ke.B,Mt=16*_t*Ke.R,zn=8*_t*Ke.B,In=Ke.sa,Dn=Ke.ta-mt+Mt,rn=Ke.qa,Ct=Ke.ra-Jt+zn,Tn=Ke.Ha,$n=Ke.Ia-Jt+zn,Sn=(Dt=Ot.M)==0,xn=Dt>=Ke.Va-1,Ke.Aa==2&&hr(Ke,Ot),Ot.uc)for(Yn=(cn=Ke).D.M,e(cn.D.uc),Ot=cn.yb;Ot<cn.Hb;++Ot){En=Ot,Sr=Yn;var Un=(Qn=(Rn=cn).D).Nb;an=Rn.R;var Qn=Qn.wa[Qn.Y+En],Xn=Rn.sa,Hn=Rn.ta+16*Un*an+16*En,Zn=Qn.dd,Wt=Qn.tc;if(Wt!=0)if(e(3<=Wt),Rn.L==1)0<En&&Eu(Xn,Hn,an,Wt+4),Qn.La&&Fu(Xn,Hn,an,Wt),0<Sr&&Iu(Xn,Hn,an,Wt+4),Qn.La&&Ru(Xn,Hn,an,Wt);else{var er=Rn.B,Ar=Rn.qa,os=Rn.ra+8*Un*er+8*En,da=Rn.Ha,Rn=Rn.Ia+8*Un*er+8*En;Un=Qn.ld,0<En&&(_n(Xn,Hn,an,Wt+4,Zn,Un),gi(Ar,os,da,Rn,er,Wt+4,Zn,Un)),Qn.La&&(ro(Xn,Hn,an,Wt,Zn,Un),Pu(Ar,os,da,Rn,er,Wt,Zn,Un)),0<Sr&&(ln(Xn,Hn,an,Wt+4,Zn,Un),ua(Ar,os,da,Rn,er,Wt+4,Zn,Un)),Qn.La&&(Ps(Xn,Hn,an,Wt,Zn,Un),Cu(Ar,os,da,Rn,er,Wt,Zn,Un))}}if(Ke.ia&&alert("todo:DitherRow"),$e.put!=null){if(Ot=16*Dt,Dt=16*(Dt+1),Sn?($e.y=Ke.sa,$e.O=Ke.ta+Mt,$e.f=Ke.qa,$e.N=Ke.ra+zn,$e.ea=Ke.Ha,$e.W=Ke.Ia+zn):(Ot-=Et,$e.y=In,$e.O=Dn,$e.f=rn,$e.N=Ct,$e.ea=Tn,$e.W=$n),xn||(Dt-=Et),Dt>$e.o&&(Dt=$e.o),$e.F=null,$e.J=null,Ke.Fa!=null&&0<Ke.Fa.length&&Ot<Dt&&($e.J=Vt(Ke,$e,Ot,Dt-Ot),$e.F=Ke.mb,$e.F==null&&$e.F.length==0)){un=pn(Ke,3,"Could not decode alpha data.");break t}Ot<$e.j&&(Et=$e.j-Ot,Ot=$e.j,e(!(1&Et)),$e.O+=Ke.R*Et,$e.N+=Ke.B*(Et>>1),$e.W+=Ke.B*(Et>>1),$e.F!=null&&($e.J+=$e.width*Et)),Ot<Dt&&($e.O+=$e.v,$e.N+=$e.v>>1,$e.W+=$e.v>>1,$e.F!=null&&($e.J+=$e.v),$e.ka=Ot-$e.j,$e.U=$e.va-$e.v,$e.T=Dt-Ot,un=$e.put($e))}_t+1!=Ke.Ic||xn||(r(Ke.sa,Ke.ta-mt,In,Dn+16*Ke.R,mt),r(Ke.qa,Ke.ra-Jt,rn,Ct+8*Ke.B,Jt),r(Ke.Ha,Ke.Ia-Jt,Tn,$n+8*Ke.B,Jt))}if(!un)return pn(Nt,6,"Output aborted.")}return 1}(G,he)),he.bc!=null&&he.bc(he),ye&=1}return ye?(G.cb=0,ye):0})(i,b)||(l=i.a)}}else l=i.a}l==0&&T.Oa!=null&&T.Oa.fd&&(l=ci(T.ba))}T=l}E=T!=0?null:11>E?D.f.RGBA.eb:D.f.kb.y}else E=null;return E};var Zu=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function h($,ce){for(var F="",B=0;B<4;B++)F+=String.fromCharCode($[ce++]);return F}function f($,ce){return $[ce+0]|$[ce+1]<<8}function m($,ce){return($[ce+0]|$[ce+1]<<8|$[ce+2]<<16)>>>0}function w($,ce){return($[ce+0]|$[ce+1]<<8|$[ce+2]<<16|$[ce+3]<<24)>>>0}new c;var v=[0],y=[0],k=[],L=new c,x=t,P=function($,ce){var F={},B=0,ee=!1,Z=0,de=0;if(F.frames=[],!function(I,V){for(var R=0;R<4;R++)if(I[V+R]!="RIFF".charCodeAt(R))return!0;return!1}($,ce)){for(w($,ce+=4),ce+=8;ce<$.length;){var ge=h($,ce),ke=w($,ce+=4);ce+=4;var ve=ke+(1&ke);switch(ge){case"VP8 ":case"VP8L":F.frames[B]===void 0&&(F.frames[B]={}),(Le=F.frames[B]).src_off=ee?de:ce-8,Le.src_size=Z+ke+8,B++,ee&&(ee=!1,Z=0,de=0);break;case"VP8X":(Le=F.header={}).feature_flags=$[ce];var Se=ce+4;Le.canvas_width=1+m($,Se),Se+=3,Le.canvas_height=1+m($,Se),Se+=3;break;case"ALPH":ee=!0,Z=ve+8,de=ce-8;break;case"ANIM":(Le=F.header).bgcolor=w($,ce),Se=ce+4,Le.loop_count=f($,Se),Se+=2;break;case"ANMF":var Ee,Le;(Le=F.frames[B]={}).offset_x=2*m($,ce),ce+=3,Le.offset_y=2*m($,ce),ce+=3,Le.width=1+m($,ce),ce+=3,Le.height=1+m($,ce),ce+=3,Le.duration=m($,ce),ce+=3,Ee=$[ce++],Le.dispose=1&Ee,Le.blend=Ee>>1&1}ge!="ANMF"&&(ce+=ve)}return F}}(x,0);P.response=x,P.rgbaoutput=!0,P.dataurl=!1;var H=P.header?P.header:null,M=P.frames?P.frames:null;if(H){H.loop_counter=H.loop_count,v=[H.canvas_height],y=[H.canvas_width];for(var oe=0;oe<M.length&&M[oe].blend!=0;oe++);}var fe=M[0],pe=L.WebPDecodeRGBA(x,fe.src_off,fe.src_size,y,v);fe.rgba=pe,fe.imgwidth=y[0],fe.imgheight=v[0];for(var re=0;re<y[0]*v[0]*4;re++)k[re]=pe[re];return this.width=y,this.height=v,this.data=k,this}(function(t){var e,n,r,a,s,u,o,c,h,f=function(I){return I=I||{},this.isStrokeTransparent=I.isStrokeTransparent||!1,this.strokeOpacity=I.strokeOpacity||1,this.strokeStyle=I.strokeStyle||"#000000",this.fillStyle=I.fillStyle||"#000000",this.isFillTransparent=I.isFillTransparent||!1,this.fillOpacity=I.fillOpacity||1,this.font=I.font||"10px sans-serif",this.textBaseline=I.textBaseline||"alphabetic",this.textAlign=I.textAlign||"left",this.lineWidth=I.lineWidth||1,this.lineJoin=I.lineJoin||"miter",this.lineCap=I.lineCap||"butt",this.path=I.path||[],this.transform=I.transform!==void 0?I.transform.clone():new c,this.globalCompositeOperation=I.globalCompositeOperation||"normal",this.globalAlpha=I.globalAlpha||1,this.clip_path=I.clip_path||[],this.currentPoint=I.currentPoint||new u,this.miterLimit=I.miterLimit||10,this.lastPoint=I.lastPoint||new u,this.lineDashOffset=I.lineDashOffset||0,this.lineDash=I.lineDash||[],this.margin=I.margin||[0,0,0,0],this.prevPageLastElemOffset=I.prevPageLastElemOffset||0,this.ignoreClearRect=typeof I.ignoreClearRect!="boolean"||I.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new m(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,u=this.internal.Point,o=this.internal.Rectangle,c=this.internal.Matrix,h=new f}]);var m=function(I){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var V=I;Object.defineProperty(this,"pdf",{get:function(){return V}});var R=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return R},set:function(_){R=!!_}});var q=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return q},set:function(_){q=!!_}});var O=0;Object.defineProperty(this,"posX",{get:function(){return O},set:function(_){isNaN(_)||(O=_)}});var S=0;Object.defineProperty(this,"posY",{get:function(){return S},set:function(_){isNaN(_)||(S=_)}}),Object.defineProperty(this,"margin",{get:function(){return h.margin},set:function(_){var se;typeof _=="number"?se=[_,_,_,_]:((se=new Array(4))[0]=_[0],se[1]=_.length>=2?_[1]:se[0],se[2]=_.length>=3?_[2]:se[0],se[3]=_.length>=4?_[3]:se[1]),h.margin=se}});var j=!1;Object.defineProperty(this,"autoPaging",{get:function(){return j},set:function(_){j=_}});var C=0;Object.defineProperty(this,"lastBreak",{get:function(){return C},set:function(_){C=_}});var J=[];Object.defineProperty(this,"pageBreaks",{get:function(){return J},set:function(_){J=_}}),Object.defineProperty(this,"ctx",{get:function(){return h},set:function(_){_ instanceof f&&(h=_)}}),Object.defineProperty(this,"path",{get:function(){return h.path},set:function(_){h.path=_}});var te=[];Object.defineProperty(this,"ctxStack",{get:function(){return te},set:function(_){te=_}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(_){var se;se=w(_),this.ctx.fillStyle=se.style,this.ctx.isFillTransparent=se.a===0,this.ctx.fillOpacity=se.a,this.pdf.setFillColor(se.r,se.g,se.b,{a:se.a}),this.pdf.setTextColor(se.r,se.g,se.b,{a:se.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(_){var se=w(_);this.ctx.strokeStyle=se.style,this.ctx.isStrokeTransparent=se.a===0,this.ctx.strokeOpacity=se.a,se.a===0?this.pdf.setDrawColor(255,255,255):(se.a,this.pdf.setDrawColor(se.r,se.g,se.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(_){["butt","round","square"].indexOf(_)!==-1&&(this.ctx.lineCap=_,this.pdf.setLineCap(_))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(_){isNaN(_)||(this.ctx.lineWidth=_,this.pdf.setLineWidth(_))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(_){["bevel","round","miter"].indexOf(_)!==-1&&(this.ctx.lineJoin=_,this.pdf.setLineJoin(_))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(_){isNaN(_)||(this.ctx.miterLimit=_,this.pdf.setMiterLimit(_))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(_){this.ctx.textBaseline=_}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(_){["right","end","center","left","start"].indexOf(_)!==-1&&(this.ctx.textAlign=_)}});var _e=null,be=null,Q=null;Object.defineProperty(this,"fontFaces",{get:function(){return Q},set:function(_){_e=null,be=null,Q=_}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(_){var se;if(this.ctx.font=_,(se=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(_))!==null){var z=se[1];se[2];var Y=se[3],ae=se[4];se[5];var Oe=se[6],Be=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ae)[2];ae=Math.floor(Be==="px"?parseFloat(ae)*this.pdf.internal.scaleFactor:Be==="em"?parseFloat(ae)*this.pdf.getFontSize():parseFloat(ae)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ae);var Ue=function(De){var kt,xt,ht=[],yt=De.trim();if(yt==="")return Xl;if(yt in Pd)return[Pd[yt]];for(;yt!=="";){switch(xt=null,kt=(yt=Ed(yt)).charAt(0)){case'"':case"'":xt=Q5(yt.substring(1),kt);break;default:xt=X5(yt)}if(xt===null||(ht.push(xt[0]),(yt=Ed(xt[1]))!==""&&yt.charAt(0)!==","))return Xl;yt=yt.replace(/^,/,"")}return ht}(Oe);if(this.fontFaces){var Ve=function(De,kt){var xt=De.getFontList(),ht=JSON.stringify(xt);if(_e===null||be!==ht){var yt=function(zt){var nt=[];return Object.keys(zt).forEach(function(Ht){zt[Ht].forEach(function(it){var gt=null;switch(it){case"bold":gt={family:Ht,weight:"bold"};break;case"italic":gt={family:Ht,style:"italic"};break;case"bolditalic":gt={family:Ht,weight:"bold",style:"italic"};break;case"":case"normal":gt={family:Ht}}gt!==null&&(gt.ref={name:Ht,style:it},nt.push(gt))})}),nt}(xt);_e=function(zt){for(var nt={},Ht=0;Ht<zt.length;++Ht){var it=Ql(zt[Ht]),gt=it.family,Qt=it.stretch,Lt=it.style,rt=it.weight;nt[gt]=nt[gt]||{},nt[gt][Qt]=nt[gt][Qt]||{},nt[gt][Qt][Lt]=nt[gt][Qt][Lt]||{},nt[gt][Qt][Lt][rt]=it}return nt}(yt.concat(kt)),be=ht}return _e}(this.pdf,this.fontFaces),At=Ue.map(function(De){return{family:De,stretch:"normal",weight:Y,style:z}}),lt=function(De,kt,xt){for(var ht=(xt=xt||{}).defaultFontFamily||"times",yt=Object.assign({},Y5,xt.genericFontFamilies||{}),zt=null,nt=null,Ht=0;Ht<kt.length;++Ht)if(yt[(zt=Ql(kt[Ht])).family]&&(zt.family=yt[zt.family]),De.hasOwnProperty(zt.family)){nt=De[zt.family];break}if(!(nt=nt||De[ht]))throw new Error("Could not find a font-family for the rule '"+Id(zt)+"' and default family '"+ht+"'.");if(nt=function(it,gt){if(gt[it])return gt[it];var Qt=bu[it],Lt=Qt<=bu.normal?-1:1,rt=Cd(gt,X1,Qt,Lt);if(!rt)throw new Error("Could not find a matching font-stretch value for "+it);return rt}(zt.stretch,nt),nt=function(it,gt){if(gt[it])return gt[it];for(var Qt=Q1[it],Lt=0;Lt<Qt.length;++Lt)if(gt[Qt[Lt]])return gt[Qt[Lt]];throw new Error("Could not find a matching font-style for "+it)}(zt.style,nt),!(nt=function(it,gt){if(gt[it])return gt[it];if(it===400&&gt[500])return gt[500];if(it===500&&gt[400])return gt[400];var Qt=K5[it],Lt=Cd(gt,Z1,Qt,it<400?-1:1);if(!Lt)throw new Error("Could not find a matching font-weight for value "+it);return Lt}(zt.weight,nt)))throw new Error("Failed to resolve a font for the rule '"+Id(zt)+"'.");return nt}(Ve,At);this.pdf.setFont(lt.ref.name,lt.ref.style)}else{var et="";(Y==="bold"||parseInt(Y,10)>=700||z==="bold")&&(et="bold"),z==="italic"&&(et+="italic"),et.length===0&&(et="normal");for(var ut="",ct={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ze=0;ze<Ue.length;ze++){if(this.pdf.internal.getFont(Ue[ze],et,{noFallback:!0,disableWarning:!0})!==void 0){ut=Ue[ze];break}if(et==="bolditalic"&&this.pdf.internal.getFont(Ue[ze],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ut=Ue[ze],et="bold";else if(this.pdf.internal.getFont(Ue[ze],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ut=Ue[ze],et="normal";break}}if(ut===""){for(var dt=0;dt<Ue.length;dt++)if(ct[Ue[dt]]){ut=ct[Ue[dt]];break}}ut=ut===""?"Times":ut,this.pdf.setFont(ut,et)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(_){this.ctx.globalCompositeOperation=_}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(_){this.ctx.globalAlpha=_}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(_){this.ctx.lineDashOffset=_,Le.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(_){this.ctx.lineDash=_,Le.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(_){this.ctx.ignoreClearRect=!!_}})};m.prototype.setLineDash=function(I){this.lineDash=I},m.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},m.prototype.fill=function(){M.call(this,"fill",!1)},m.prototype.stroke=function(){M.call(this,"stroke",!1)},m.prototype.beginPath=function(){this.path=[{type:"begin"}]},m.prototype.moveTo=function(I,V){if(isNaN(I)||isNaN(V))throw $t.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var R=this.ctx.transform.applyToPoint(new u(I,V));this.path.push({type:"mt",x:R.x,y:R.y}),this.ctx.lastPoint=new u(I,V)},m.prototype.closePath=function(){var I=new u(0,0),V=0;for(V=this.path.length-1;V!==-1;V--)if(this.path[V].type==="begin"&&Bt(this.path[V+1])==="object"&&typeof this.path[V+1].x=="number"){I=new u(this.path[V+1].x,this.path[V+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new u(I.x,I.y)},m.prototype.lineTo=function(I,V){if(isNaN(I)||isNaN(V))throw $t.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var R=this.ctx.transform.applyToPoint(new u(I,V));this.path.push({type:"lt",x:R.x,y:R.y}),this.ctx.lastPoint=new u(R.x,R.y)},m.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),M.call(this,null,!0)},m.prototype.quadraticCurveTo=function(I,V,R,q){if(isNaN(R)||isNaN(q)||isNaN(I)||isNaN(V))throw $t.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var O=this.ctx.transform.applyToPoint(new u(R,q)),S=this.ctx.transform.applyToPoint(new u(I,V));this.path.push({type:"qct",x1:S.x,y1:S.y,x:O.x,y:O.y}),this.ctx.lastPoint=new u(O.x,O.y)},m.prototype.bezierCurveTo=function(I,V,R,q,O,S){if(isNaN(O)||isNaN(S)||isNaN(I)||isNaN(V)||isNaN(R)||isNaN(q))throw $t.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var j=this.ctx.transform.applyToPoint(new u(O,S)),C=this.ctx.transform.applyToPoint(new u(I,V)),J=this.ctx.transform.applyToPoint(new u(R,q));this.path.push({type:"bct",x1:C.x,y1:C.y,x2:J.x,y2:J.y,x:j.x,y:j.y}),this.ctx.lastPoint=new u(j.x,j.y)},m.prototype.arc=function(I,V,R,q,O,S){if(isNaN(I)||isNaN(V)||isNaN(R)||isNaN(q)||isNaN(O))throw $t.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(S=!!S,!this.ctx.transform.isIdentity){var j=this.ctx.transform.applyToPoint(new u(I,V));I=j.x,V=j.y;var C=this.ctx.transform.applyToPoint(new u(0,R)),J=this.ctx.transform.applyToPoint(new u(0,0));R=Math.sqrt(Math.pow(C.x-J.x,2)+Math.pow(C.y-J.y,2))}Math.abs(O-q)>=2*Math.PI&&(q=0,O=2*Math.PI),this.path.push({type:"arc",x:I,y:V,radius:R,startAngle:q,endAngle:O,counterclockwise:S})},m.prototype.arcTo=function(I,V,R,q,O){throw new Error("arcTo not implemented.")},m.prototype.rect=function(I,V,R,q){if(isNaN(I)||isNaN(V)||isNaN(R)||isNaN(q))throw $t.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(I,V),this.lineTo(I+R,V),this.lineTo(I+R,V+q),this.lineTo(I,V+q),this.lineTo(I,V),this.lineTo(I+R,V),this.lineTo(I,V)},m.prototype.fillRect=function(I,V,R,q){if(isNaN(I)||isNaN(V)||isNaN(R)||isNaN(q))throw $t.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!v.call(this)){var O={};this.lineCap!=="butt"&&(O.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(O.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(I,V,R,q),this.fill(),O.hasOwnProperty("lineCap")&&(this.lineCap=O.lineCap),O.hasOwnProperty("lineJoin")&&(this.lineJoin=O.lineJoin)}},m.prototype.strokeRect=function(I,V,R,q){if(isNaN(I)||isNaN(V)||isNaN(R)||isNaN(q))throw $t.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(I,V,R,q),this.stroke())},m.prototype.clearRect=function(I,V,R,q){if(isNaN(I)||isNaN(V)||isNaN(R)||isNaN(q))throw $t.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(I,V,R,q))},m.prototype.save=function(I){I=typeof I!="boolean"||I;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,R=0;R<this.pdf.internal.getNumberOfPages();R++)this.pdf.setPage(R+1),this.pdf.internal.out("q");if(this.pdf.setPage(V),I){this.ctx.fontSize=this.pdf.internal.getFontSize();var q=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=q}},m.prototype.restore=function(I){I=typeof I!="boolean"||I;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,R=0;R<this.pdf.internal.getNumberOfPages();R++)this.pdf.setPage(R+1),this.pdf.internal.out("Q");this.pdf.setPage(V),I&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},m.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var w=function(I){var V,R,q,O;if(I.isCanvasGradient===!0&&(I=I.getColor()),!I)return{r:0,g:0,b:0,a:0,style:I};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(I))V=0,R=0,q=0,O=0;else{var S=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(I);if(S!==null)V=parseInt(S[1]),R=parseInt(S[2]),q=parseInt(S[3]),O=1;else if((S=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(I))!==null)V=parseInt(S[1]),R=parseInt(S[2]),q=parseInt(S[3]),O=parseFloat(S[4]);else{if(O=1,typeof I=="string"&&I.charAt(0)!=="#"){var j=new H1(I);I=j.ok?j.toHex():"#000000"}I.length===4?(V=I.substring(1,2),V+=V,R=I.substring(2,3),R+=R,q=I.substring(3,4),q+=q):(V=I.substring(1,3),R=I.substring(3,5),q=I.substring(5,7)),V=parseInt(V,16),R=parseInt(R,16),q=parseInt(q,16)}}return{r:V,g:R,b:q,a:O,style:I}},v=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};m.prototype.fillText=function(I,V,R,q){if(isNaN(V)||isNaN(R)||typeof I!="string")throw $t.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(q=isNaN(q)?void 0:q,!v.call(this)){var O=ve(this.ctx.transform.rotation),S=this.ctx.transform.scaleX;B.call(this,{text:I,x:V,y:R,scale:S,angle:O,align:this.textAlign,maxWidth:q})}},m.prototype.strokeText=function(I,V,R,q){if(isNaN(V)||isNaN(R)||typeof I!="string")throw $t.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){q=isNaN(q)?void 0:q;var O=ve(this.ctx.transform.rotation),S=this.ctx.transform.scaleX;B.call(this,{text:I,x:V,y:R,scale:S,renderingMode:"stroke",angle:O,align:this.textAlign,maxWidth:q})}},m.prototype.measureText=function(I){if(typeof I!="string")throw $t.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var V=this.pdf,R=this.pdf.internal.scaleFactor,q=V.internal.getFontSize(),O=V.getStringUnitWidth(I)*q/V.internal.scaleFactor;return new function(S){var j=(S=S||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return j}}),this}({width:O*=Math.round(96*R/72*1e4)/1e4})},m.prototype.scale=function(I,V){if(isNaN(I)||isNaN(V))throw $t.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var R=new c(I,0,0,V,0,0);this.ctx.transform=this.ctx.transform.multiply(R)},m.prototype.rotate=function(I){if(isNaN(I))throw $t.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var V=new c(Math.cos(I),Math.sin(I),-Math.sin(I),Math.cos(I),0,0);this.ctx.transform=this.ctx.transform.multiply(V)},m.prototype.translate=function(I,V){if(isNaN(I)||isNaN(V))throw $t.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var R=new c(1,0,0,1,I,V);this.ctx.transform=this.ctx.transform.multiply(R)},m.prototype.transform=function(I,V,R,q,O,S){if(isNaN(I)||isNaN(V)||isNaN(R)||isNaN(q)||isNaN(O)||isNaN(S))throw $t.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var j=new c(I,V,R,q,O,S);this.ctx.transform=this.ctx.transform.multiply(j)},m.prototype.setTransform=function(I,V,R,q,O,S){I=isNaN(I)?1:I,V=isNaN(V)?0:V,R=isNaN(R)?0:R,q=isNaN(q)?1:q,O=isNaN(O)?0:O,S=isNaN(S)?0:S,this.ctx.transform=new c(I,V,R,q,O,S)};var k=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};m.prototype.drawImage=function(I,V,R,q,O,S,j,C,J){var te=this.pdf.getImageProperties(I),_e=1,be=1,Q=1,_=1;q!==void 0&&C!==void 0&&(Q=C/q,_=J/O,_e=te.width/q*C/q,be=te.height/O*J/O),S===void 0&&(S=V,j=R,V=0,R=0),q!==void 0&&C===void 0&&(C=q,J=O),q===void 0&&C===void 0&&(C=te.width,J=te.height);var se=this.ctx.transform.decompose(),z=ve(se.rotate.shx),Y=new c,ae=(Y=(Y=(Y=Y.multiply(se.translate)).multiply(se.skew)).multiply(se.scale)).applyToRectangle(new o(S-V*Q,j-R*_,q*_e,O*be));if(this.autoPaging){for(var Oe,Be=L.call(this,ae),Ue=[],Ve=0;Ve<Be.length;Ve+=1)Ue.indexOf(Be[Ve])===-1&&Ue.push(Be[Ve]);H(Ue);for(var At=Ue[0],lt=Ue[Ue.length-1],et=At;et<lt+1;et++){this.pdf.setPage(et);var ut=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ct=et===1?this.posY+this.margin[0]:this.margin[0],ze=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],dt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],De=et===1?0:ze+(et-2)*dt;if(this.ctx.clip_path.length!==0){var kt=this.path;Oe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(Oe,this.posX+this.margin[3],-De+ct+this.ctx.prevPageLastElemOffset),oe.call(this,"fill",!0),this.path=kt}var xt=JSON.parse(JSON.stringify(ae));xt=P([xt],this.posX+this.margin[3],-De+ct+this.ctx.prevPageLastElemOffset)[0];var ht=(et>At||et<lt)&&k.call(this);ht&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ut,dt,null).clip().discardPath()),this.pdf.addImage(I,"JPEG",xt.x,xt.y,xt.w,xt.h,null,null,z),ht&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(I,"JPEG",ae.x,ae.y,ae.w,ae.h,null,null,z)};var L=function(I,V,R){var q=[];V=V||this.pdf.internal.pageSize.width,R=R||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var O=this.posY+this.ctx.prevPageLastElemOffset;switch(I.type){default:case"mt":case"lt":q.push(Math.floor((I.y+O)/R)+1);break;case"arc":q.push(Math.floor((I.y+O-I.radius)/R)+1),q.push(Math.floor((I.y+O+I.radius)/R)+1);break;case"qct":var S=Se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x,I.y);q.push(Math.floor((S.y+O)/R)+1),q.push(Math.floor((S.y+S.h+O)/R)+1);break;case"bct":var j=Ee(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x2,I.y2,I.x,I.y);q.push(Math.floor((j.y+O)/R)+1),q.push(Math.floor((j.y+j.h+O)/R)+1);break;case"rect":q.push(Math.floor((I.y+O)/R)+1),q.push(Math.floor((I.y+I.h+O)/R)+1)}for(var C=0;C<q.length;C+=1)for(;this.pdf.internal.getNumberOfPages()<q[C];)x.call(this);return q},x=function(){var I=this.fillStyle,V=this.strokeStyle,R=this.font,q=this.lineCap,O=this.lineWidth,S=this.lineJoin;this.pdf.addPage(),this.fillStyle=I,this.strokeStyle=V,this.font=R,this.lineCap=q,this.lineWidth=O,this.lineJoin=S},P=function(I,V,R){for(var q=0;q<I.length;q++)switch(I[q].type){case"bct":I[q].x2+=V,I[q].y2+=R;case"qct":I[q].x1+=V,I[q].y1+=R;default:I[q].x+=V,I[q].y+=R}return I},H=function(I){return I.sort(function(V,R){return V-R})},M=function(I,V){var R=this.fillStyle,q=this.strokeStyle,O=this.lineCap,S=this.lineWidth,j=Math.abs(S*this.ctx.transform.scaleX),C=this.lineJoin;if(this.autoPaging){for(var J,te,_e=JSON.parse(JSON.stringify(this.path)),be=JSON.parse(JSON.stringify(this.path)),Q=[],_=0;_<be.length;_++)if(be[_].x!==void 0)for(var se=L.call(this,be[_]),z=0;z<se.length;z+=1)Q.indexOf(se[z])===-1&&Q.push(se[z]);for(var Y=0;Y<Q.length;Y++)for(;this.pdf.internal.getNumberOfPages()<Q[Y];)x.call(this);H(Q);for(var ae=Q[0],Oe=Q[Q.length-1],Be=ae;Be<Oe+1;Be++){this.pdf.setPage(Be),this.fillStyle=R,this.strokeStyle=q,this.lineCap=O,this.lineWidth=j,this.lineJoin=C;var Ue=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ve=Be===1?this.posY+this.margin[0]:this.margin[0],At=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],lt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],et=Be===1?0:At+(Be-2)*lt;if(this.ctx.clip_path.length!==0){var ut=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(J,this.posX+this.margin[3],-et+Ve+this.ctx.prevPageLastElemOffset),oe.call(this,I,!0),this.path=ut}if(te=JSON.parse(JSON.stringify(_e)),this.path=P(te,this.posX+this.margin[3],-et+Ve+this.ctx.prevPageLastElemOffset),V===!1||Be===0){var ct=(Be>ae||Be<Oe)&&k.call(this);ct&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ue,lt,null).clip().discardPath()),oe.call(this,I,V),ct&&this.pdf.restoreGraphicsState()}this.lineWidth=S}this.path=_e}else this.lineWidth=j,oe.call(this,I,V),this.lineWidth=S},oe=function(I,V){if((I!=="stroke"||V||!y.call(this))&&(I==="stroke"||V||!v.call(this))){for(var R,q,O=[],S=this.path,j=0;j<S.length;j++){var C=S[j];switch(C.type){case"begin":O.push({begin:!0});break;case"close":O.push({close:!0});break;case"mt":O.push({start:C,deltas:[],abs:[]});break;case"lt":var J=O.length;if(S[j-1]&&!isNaN(S[j-1].x)&&(R=[C.x-S[j-1].x,C.y-S[j-1].y],J>0)){for(;J>=0;J--)if(O[J-1].close!==!0&&O[J-1].begin!==!0){O[J-1].deltas.push(R),O[J-1].abs.push(C);break}}break;case"bct":R=[C.x1-S[j-1].x,C.y1-S[j-1].y,C.x2-S[j-1].x,C.y2-S[j-1].y,C.x-S[j-1].x,C.y-S[j-1].y],O[O.length-1].deltas.push(R);break;case"qct":var te=S[j-1].x+2/3*(C.x1-S[j-1].x),_e=S[j-1].y+2/3*(C.y1-S[j-1].y),be=C.x+2/3*(C.x1-C.x),Q=C.y+2/3*(C.y1-C.y),_=C.x,se=C.y;R=[te-S[j-1].x,_e-S[j-1].y,be-S[j-1].x,Q-S[j-1].y,_-S[j-1].x,se-S[j-1].y],O[O.length-1].deltas.push(R);break;case"arc":O.push({deltas:[],abs:[],arc:!0}),Array.isArray(O[O.length-1].abs)&&O[O.length-1].abs.push(C)}}q=V?null:I==="stroke"?"stroke":"fill";for(var z=!1,Y=0;Y<O.length;Y++)if(O[Y].arc)for(var ae=O[Y].abs,Oe=0;Oe<ae.length;Oe++){var Be=ae[Oe];Be.type==="arc"?re.call(this,Be.x,Be.y,Be.radius,Be.startAngle,Be.endAngle,Be.counterclockwise,void 0,V,!z):ee.call(this,Be.x,Be.y),z=!0}else if(O[Y].close===!0)this.pdf.internal.out("h"),z=!1;else if(O[Y].begin!==!0){var Ue=O[Y].start.x,Ve=O[Y].start.y;Z.call(this,O[Y].deltas,Ue,Ve),z=!0}q&&$.call(this,q),V&&ce.call(this)}},fe=function(I){var V=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,R=V*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return I-R;case"top":return I+V-R;case"hanging":return I+V-2*R;case"middle":return I+V/2-R;default:return I}},pe=function(I){return I+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};m.prototype.createLinearGradient=function(){var I=function(){};return I.colorStops=[],I.addColorStop=function(V,R){this.colorStops.push([V,R])},I.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},I.isCanvasGradient=!0,I},m.prototype.createPattern=function(){return this.createLinearGradient()},m.prototype.createRadialGradient=function(){return this.createLinearGradient()};var re=function(I,V,R,q,O,S,j,C,J){for(var te=ge.call(this,R,q,O,S),_e=0;_e<te.length;_e++){var be=te[_e];_e===0&&(J?F.call(this,be.x1+I,be.y1+V):ee.call(this,be.x1+I,be.y1+V)),de.call(this,I,V,be.x2,be.y2,be.x3,be.y3,be.x4,be.y4)}C?ce.call(this):$.call(this,j)},$=function(I){switch(I){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},ce=function(){this.pdf.clip(),this.pdf.discardPath()},F=function(I,V){this.pdf.internal.out(n(I)+" "+r(V)+" m")},B=function(I){var V;switch(I.align){case"right":case"end":V="right";break;case"center":V="center";break;default:V="left"}var R,q,O,S=this.pdf.getTextDimensions(I.text),j=fe.call(this,I.y),C=pe.call(this,j)-S.h,J=this.ctx.transform.applyToPoint(new u(I.x,j));if(this.autoPaging){var te=this.ctx.transform.decompose(),_e=new c;_e=(_e=(_e=_e.multiply(te.translate)).multiply(te.skew)).multiply(te.scale);for(var be=this.ctx.transform.applyToRectangle(new o(I.x,j,S.w,S.h)),Q=_e.applyToRectangle(new o(I.x,C,S.w,S.h)),_=L.call(this,Q),se=[],z=0;z<_.length;z+=1)se.indexOf(_[z])===-1&&se.push(_[z]);H(se);for(var Y=se[0],ae=se[se.length-1],Oe=Y;Oe<ae+1;Oe++){this.pdf.setPage(Oe);var Be=Oe===1?this.posY+this.margin[0]:this.margin[0],Ue=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ve=this.pdf.internal.pageSize.height-this.margin[2],At=Ve-this.margin[0],lt=this.pdf.internal.pageSize.width-this.margin[1],et=lt-this.margin[3],ut=Oe===1?0:Ue+(Oe-2)*At;if(this.ctx.clip_path.length!==0){var ct=this.path;R=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(R,this.posX+this.margin[3],-1*ut+Be),oe.call(this,"fill",!0),this.path=ct}var ze=P([JSON.parse(JSON.stringify(Q))],this.posX+this.margin[3],-ut+Be+this.ctx.prevPageLastElemOffset)[0];I.scale>=.01&&(q=this.pdf.internal.getFontSize(),this.pdf.setFontSize(q*I.scale),O=this.lineWidth,this.lineWidth=O*I.scale);var dt=this.autoPaging!=="text";if(dt||ze.y+ze.h<=Ve){if(dt||ze.y>=Be&&ze.x<=lt){var De=dt?I.text:this.pdf.splitTextToSize(I.text,I.maxWidth||lt-ze.x)[0],kt=P([JSON.parse(JSON.stringify(be))],this.posX+this.margin[3],-ut+Be+this.ctx.prevPageLastElemOffset)[0],xt=dt&&(Oe>Y||Oe<ae)&&k.call(this);xt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],et,At,null).clip().discardPath()),this.pdf.text(De,kt.x,kt.y,{angle:I.angle,align:V,renderingMode:I.renderingMode}),xt&&this.pdf.restoreGraphicsState()}}else ze.y<Ve&&(this.ctx.prevPageLastElemOffset+=Ve-ze.y);I.scale>=.01&&(this.pdf.setFontSize(q),this.lineWidth=O)}}else I.scale>=.01&&(q=this.pdf.internal.getFontSize(),this.pdf.setFontSize(q*I.scale),O=this.lineWidth,this.lineWidth=O*I.scale),this.pdf.text(I.text,J.x+this.posX,J.y+this.posY,{angle:I.angle,align:V,renderingMode:I.renderingMode,maxWidth:I.maxWidth}),I.scale>=.01&&(this.pdf.setFontSize(q),this.lineWidth=O)},ee=function(I,V,R,q){R=R||0,q=q||0,this.pdf.internal.out(n(I+R)+" "+r(V+q)+" l")},Z=function(I,V,R){return this.pdf.lines(I,V,R,null,null)},de=function(I,V,R,q,O,S,j,C){this.pdf.internal.out([e(a(R+I)),e(s(q+V)),e(a(O+I)),e(s(S+V)),e(a(j+I)),e(s(C+V)),"c"].join(" "))},ge=function(I,V,R,q){for(var O=2*Math.PI,S=Math.PI/2;V>R;)V-=O;var j=Math.abs(R-V);j<O&&q&&(j=O-j);for(var C=[],J=q?-1:1,te=V;j>1e-5;){var _e=te+J*Math.min(j,S);C.push(ke.call(this,I,te,_e)),j-=Math.abs(_e-te),te=_e}return C},ke=function(I,V,R){var q=(R-V)/2,O=I*Math.cos(q),S=I*Math.sin(q),j=O,C=-S,J=j*j+C*C,te=J+j*O+C*S,_e=4/3*(Math.sqrt(2*J*te)-te)/(j*S-C*O),be=j-_e*C,Q=C+_e*j,_=be,se=-Q,z=q+V,Y=Math.cos(z),ae=Math.sin(z);return{x1:I*Math.cos(V),y1:I*Math.sin(V),x2:be*Y-Q*ae,y2:be*ae+Q*Y,x3:_*Y-se*ae,y3:_*ae+se*Y,x4:I*Math.cos(R),y4:I*Math.sin(R)}},ve=function(I){return 180*I/Math.PI},Se=function(I,V,R,q,O,S){var j=I+.5*(R-I),C=V+.5*(q-V),J=O+.5*(R-O),te=S+.5*(q-S),_e=Math.min(I,O,j,J),be=Math.max(I,O,j,J),Q=Math.min(V,S,C,te),_=Math.max(V,S,C,te);return new o(_e,Q,be-_e,_-Q)},Ee=function(I,V,R,q,O,S,j,C){var J,te,_e,be,Q,_,se,z,Y,ae,Oe,Be,Ue,Ve,At=R-I,lt=q-V,et=O-R,ut=S-q,ct=j-O,ze=C-S;for(te=0;te<41;te++)Y=(se=(_e=I+(J=te/40)*At)+J*((Q=R+J*et)-_e))+J*(Q+J*(O+J*ct-Q)-se),ae=(z=(be=V+J*lt)+J*((_=q+J*ut)-be))+J*(_+J*(S+J*ze-_)-z),te==0?(Oe=Y,Be=ae,Ue=Y,Ve=ae):(Oe=Math.min(Oe,Y),Be=Math.min(Be,ae),Ue=Math.max(Ue,Y),Ve=Math.max(Ve,ae));return new o(Math.round(Oe),Math.round(Be),Math.round(Ue-Oe),Math.round(Ve-Be))},Le=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var I,V,R=(I=this.ctx.lineDash,V=this.ctx.lineDashOffset,JSON.stringify({lineDash:I,lineDashOffset:V}));this.prevLineDash!==R&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=R)}}})(Xe.API),function(t){var e=function(u){var o,c,h,f,m,w,v,y,k,L;for(c=[],h=0,f=(u+=o="\0\0\0\0".slice(u.length%4||4)).length;f>h;h+=4)(m=(u.charCodeAt(h)<<24)+(u.charCodeAt(h+1)<<16)+(u.charCodeAt(h+2)<<8)+u.charCodeAt(h+3))!==0?(w=(m=((m=((m=((m=(m-(L=m%85))/85)-(k=m%85))/85)-(y=m%85))/85)-(v=m%85))/85)%85,c.push(w+33,v+33,y+33,k+33,L+33)):c.push(122);return function(x,P){for(var H=P;H>0;H--)x.pop()}(c,o.length),String.fromCharCode.apply(String,c)+"~>"},n=function(u){var o,c,h,f,m,w=String,v="length",y=255,k="charCodeAt",L="slice",x="replace";for(u[L](-2),u=u[L](0,-2)[x](/\s/g,"")[x]("z","!!!!!"),h=[],f=0,m=(u+=o="uuuuu"[L](u[v]%5||5))[v];m>f;f+=5)c=52200625*(u[k](f)-33)+614125*(u[k](f+1)-33)+7225*(u[k](f+2)-33)+85*(u[k](f+3)-33)+(u[k](f+4)-33),h.push(y&c>>24,y&c>>16,y&c>>8,y&c);return function(P,H){for(var M=H;M>0;M--)P.pop()}(h,o[v]),w.fromCharCode.apply(w,h)},r=function(u){return u.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(u){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((u=u.replace(/\s/g,"")).indexOf(">")!==-1&&(u=u.substr(0,u.indexOf(">"))),u.length%2&&(u+="0"),o.test(u)===!1)return"";for(var c="",h=0;h<u.length;h+=2)c+=String.fromCharCode("0x"+(u[h]+u[h+1]));return c},s=function(u){for(var o=new Uint8Array(u.length),c=u.length;c--;)o[c]=u.charCodeAt(c);return(o=du(o)).reduce(function(h,f){return h+String.fromCharCode(f)},"")};t.processDataByFilters=function(u,o){var c=0,h=u||"",f=[];for(typeof(o=o||[])=="string"&&(o=[o]),c=0;c<o.length;c+=1)switch(o[c]){case"ASCII85Decode":case"/ASCII85Decode":h=n(h),f.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":h=e(h),f.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":h=a(h),f.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":h=r(h),f.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":h=s(h),f.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[c]+'" is not implemented')}return{data:h,reverseChain:f.reverse().join(" ")}}}(Xe.API),function(t){t.loadFile=function(e,n,r){return function(a,s,u){s=s!==!1,u=typeof u=="function"?u:function(){};var o=void 0;try{o=function(c,h,f){var m=new XMLHttpRequest,w=0,v=function(y){var k=y.length,L=[],x=String.fromCharCode;for(w=0;w<k;w+=1)L.push(x(255&y.charCodeAt(w)));return L.join("")};if(m.open("GET",c,!h),m.overrideMimeType("text/plain; charset=x-user-defined"),h===!1&&(m.onload=function(){m.status===200?f(v(this.responseText)):f(void 0)}),m.send(null),h&&m.status===200)return v(m.responseText)}(a,s,u)}catch{}return o}(e,n,r)},t.loadImageFile=t.loadFile}(Xe.API),function(t){function e(){return(ot.html2canvas?Promise.resolve(ot.html2canvas):Fl(()=>import("./html2canvas.esm-BfxBtG_O.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(ot.DOMPurify?Promise.resolve(ot.DOMPurify):Fl(()=>import("./purify.es-B6FQ9oRL.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var c=Bt(o);return c==="undefined"?"undefined":c==="string"||o instanceof String?"string":c==="number"||o instanceof Number?"number":c==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":c==="object"?"object":"unknown"},a=function(o,c){var h=document.createElement(o);for(var f in c.className&&(h.className=c.className),c.innerHTML&&c.dompurify&&(h.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)h.style[f]=c.style[f];return h},s=function o(c,h){for(var f=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),m=c.firstChild;m;m=m.nextSibling)h!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||f.appendChild(o(m,h));return c.nodeType===1&&(c.nodeName==="CANVAS"?(f.width=c.width,f.height=c.height,f.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(f.value=c.value),f.addEventListener("load",function(){f.scrollTop=c.scrollTop,f.scrollLeft=c.scrollLeft},!0)),f},u=function o(c){var h=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),f=o.convert(Promise.resolve(),h);return(f=f.setProgress(1,o,1,[o])).set(c)};(u.prototype=Object.create(Promise.prototype)).constructor=u,u.convert=function(o,c){return o.__proto__=c||u.prototype,o},u.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},u.prototype.from=function(o,c){return this.then(function(){switch(c=c||function(h){switch(r(h)){case"string":return"string";case"element":return h.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o),c){case"string":return this.then(n).then(function(h){return this.set({src:a("div",{innerHTML:o,dompurify:h})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},u.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},u.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},u.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(c){var h=Object.assign({},this.opt.html2canvas);return delete h.onrendered,c(this.prop.container,h)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},u.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(c){var h=this.opt.jsPDF,f=this.opt.fontFaces,m=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,w=Object.assign({async:!0,allowTaint:!0,scale:m,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete w.onrendered,h.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,h.context2d.posX=this.opt.x,h.context2d.posY=this.opt.y,h.context2d.margin=this.opt.margin,h.context2d.fontFaces=f,f)for(var v=0;v<f.length;++v){var y=f[v],k=y.src.find(function(L){return L.format==="truetype"});k&&h.addFont(k.url,y.ref.name,y.ref.style)}return w.windowHeight=w.windowHeight||0,w.windowHeight=w.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):w.windowHeight,h.context2d.save(!0),c(this.prop.container,w)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},u.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},u.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},u.prototype.output=function(o,c,h){return(h=h||"pdf").toLowerCase()==="img"||h.toLowerCase()==="image"?this.outputImg(o,c):this.outputPdf(o,c)},u.prototype.outputPdf=function(o,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,c)})},u.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},u.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},u.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},u.prototype.set=function(o){if(r(o)!=="object")return this;var c=Object.keys(o||{}).map(function(h){if(h in u.template.prop)return function(){this.prop[h]=o[h]};switch(h){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[h]=o[h]}}},this);return this.then(function(){return this.thenList(c)})},u.prototype.get=function(o,c){return this.then(function(){var h=o in u.template.prop?this.prop[o]:this.opt[o];return c?c(h):h})},u.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},u.prototype.setPageSize=function(o){function c(h,f){return Math.floor(h*f/72*96)}return this.then(function(){(o=o||Xe.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:c(o.inner.width,o.k),height:c(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},u.prototype.setProgress=function(o,c,h,f){return o!=null&&(this.progress.val=o),c!=null&&(this.progress.state=c),h!=null&&(this.progress.n=h),f!=null&&(this.progress.stack=f),this.progress.ratio=this.progress.val/this.progress.state,this},u.prototype.updateProgress=function(o,c,h,f){return this.setProgress(o?this.progress.val+o:null,c||null,h?this.progress.n+h:null,f?this.progress.stack.concat(f):null)},u.prototype.then=function(o,c){var h=this;return this.thenCore(o,c,function(f,m){return h.updateProgress(null,null,1,[f]),Promise.prototype.then.call(this,function(w){return h.updateProgress(null,f),w}).then(f,m).then(function(w){return h.updateProgress(1),w})})},u.prototype.thenCore=function(o,c,h){h=h||Promise.prototype.then;var f=this;o&&(o=o.bind(f)),c&&(c=c.bind(f));var m=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?f:u.convert(Object.assign({},f),Promise.prototype),w=h.call(m,o,c);return u.convert(w,f.__proto__)},u.prototype.thenExternal=function(o,c){return Promise.prototype.then.call(this,o,c)},u.prototype.thenList=function(o){var c=this;return o.forEach(function(h){c=c.thenCore(h)}),c},u.prototype.catch=function(o){o&&(o=o.bind(this));var c=Promise.prototype.catch.call(this,o);return u.convert(c,this)},u.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},u.prototype.error=function(o){return this.then(function(){throw new Error(o)})},u.prototype.using=u.prototype.set,u.prototype.saveAs=u.prototype.save,u.prototype.export=u.prototype.output,u.prototype.run=u.prototype.then,Xe.getPageSize=function(o,c,h){if(Bt(o)==="object"){var f=o;o=f.orientation,c=f.unit||c,h=f.format||h}c=c||"mm",h=h||"a4",o=(""+(o||"P")).toLowerCase();var m,w=(""+h).toLowerCase(),v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":m=1;break;case"mm":m=72/25.4;break;case"cm":m=72/2.54;break;case"in":m=72;break;case"px":m=.75;break;case"pc":case"em":m=12;break;case"ex":m=6;break;default:throw"Invalid unit: "+c}var y,k=0,L=0;if(v.hasOwnProperty(w))k=v[w][1]/m,L=v[w][0]/m;else try{k=h[1],L=h[0]}catch{throw new Error("Invalid format: "+h)}if(o==="p"||o==="portrait")o="p",L>k&&(y=L,L=k,k=y);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",k>L&&(y=L,L=k,k=y)}return{width:L,height:k,unit:c,k:m,orientation:o}},t.html=function(o,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(Ql):null;var h=new u(c);return c.worker?h:h.from(o).doCallback()}}(Xe.API),Xe.API.addJS=function(t){return Fd=t,this.internal.events.subscribe("postPutResources",function(){Io=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Io+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Rd=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Fd+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Io!==void 0&&Rd!==void 0&&this.internal.out("/Names <</JavaScript "+Io+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=n.outline.render().split(/\r\n/),s=0;s<a.length;s++){var u=a[s],o=r.exec(u);if(o!=null){var c=o[1];n.internal.newObjectDeferredBegin(c,!1)}n.internal.write(u)}if(this.outline.createNamedDestinations){var h=this.internal.pages.length,f=[];for(s=0;s<h;s++){var m=n.internal.newObject();f.push(m);var w=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+w.objId+" 0 R /XYZ null null null]>> endobj")}var v=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<f.length;s++)n.internal.write("(page_"+(s+1)+")"+f[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+v+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,a,s){var u={title:a,options:s,children:[]};return r==null&&(r=this.root),r.children.push(u),u},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var a=0;a<r.children.length;a++)this.genIds_r(r.children[a])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var u=r.children[s];this.objStart(u),this.line("/Title "+this.makeString(u.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),u.children.length>0&&(this.line("/First "+this.makeRef(u.children[0])),this.line("/Last "+this.makeRef(u.children[u.children.length-1])));var o=this.count=this.count_r({count:0},u);if(o>0&&this.line("/Count "+o),u.options&&u.options.pageNumber){var c=n.internal.getPageInfo(u.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var h=0;h<r.children.length;h++)this.renderItems(r.children[h])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,a){for(var s=0;s<a.children.length;s++)r.count++,this.count_r(r,a.children[s]);return r.count}}])}(Xe.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,a,s,u,o){var c,h=this.decode.DCT_DECODE,f=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=u||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,c=function(m){for(var w,v=256*m.charCodeAt(4)+m.charCodeAt(5),y=m.length,k={width:0,height:0,numcomponents:1},L=4;L<y;L+=2){if(L+=v,e.indexOf(m.charCodeAt(L+1))!==-1){w=256*m.charCodeAt(L+5)+m.charCodeAt(L+6),k={width:256*m.charCodeAt(L+7)+m.charCodeAt(L+8),height:w,numcomponents:m.charCodeAt(L+9)};break}v=256*m.charCodeAt(L+2)+m.charCodeAt(L+3)}return k}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),c.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}f={data:n,width:c.width,height:c.height,colorSpace:o,bitsPerComponent:8,filter:h,index:r,alias:a}}return f}}(Xe.API),Xe.API.processPNG=function(t,e,n,r){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var a,s=q5(t,{checkCrc:!0}),u=s.width,o=s.height,c=s.channels,h=s.palette,f=s.depth;a=h&&c===1?function(re){for(var $=re.width,ce=re.height,F=re.data,B=re.palette,ee=re.depth,Z=!1,de=[],ge=[],ke=void 0,ve=!1,Se=0,Ee=0;Ee<B.length;Ee++){var Le=Oc(B[Ee],4),I=Le[0],V=Le[1],R=Le[2],q=Le[3];de.push(I,V,R),q!=null&&(q===0?(Se++,ge.length<1&&ge.push(Ee)):q<255&&(ve=!0))}if(ve||Se>1){Z=!0,ge=void 0;var O=$*ce;ke=new Uint8Array(O);for(var S=new DataView(F.buffer),j=0;j<O;j++){var C=Zl(S,j,ee),J=Oc(B[C],4)[3];ke[j]=J}}else Se===0&&(ge=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:Z?8:void 0,colorBytes:F,alphaBytes:ke,needSMask:Z,palette:de,mask:ge}}(s):c===2||c===4?function(re){for(var $=re.data,ce=re.width,F=re.height,B=re.channels,ee=re.depth,Z=B===2?"DeviceGray":"DeviceRGB",de=B-1,ge=ce*F,ke=de,ve=ge*ke,Se=1*ge,Ee=Math.ceil(ve*ee/8),Le=Math.ceil(Se*ee/8),I=new Uint8Array(Ee),V=new Uint8Array(Le),R=new DataView($.buffer),q=new DataView(I.buffer),O=new DataView(V.buffer),S=!1,j=0;j<ge;j++){for(var C=j*B,J=0;J<ke;J++)Ud(q,Zl(R,C+J,ee),j*ke+J,ee);var te=Zl(R,C+ke,ee);te<(1<<ee)-1&&(S=!0),Ud(O,te,1*j,ee)}return{colorSpace:Z,colorsPerPixel:de,sMaskBitsPerComponent:S?ee:void 0,colorBytes:I,alphaBytes:V,needSMask:S}}(s):function(re){var $=re.data,ce=re.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:ce,colorsPerPixel:ce==="DeviceGray"?1:3,colorBytes:$ instanceof Uint16Array?function(F){for(var B=F.length,ee=new Uint8Array(2*B),Z=new DataView(ee.buffer,ee.byteOffset,ee.byteLength),de=0;de<B;de++)Z.setUint16(2*de,F[de],!1);return ee}($):$,needSMask:!1}}(s);var m,w,v,y=a,k=y.colorSpace,L=y.colorsPerPixel,x=y.sMaskBitsPerComponent,P=y.colorBytes,H=y.alphaBytes,M=y.needSMask,oe=y.palette,fe=y.mask,pe=null;return r!==Xe.API.image_compression.NONE&&typeof du=="function"?(pe=function(re){var $;switch(re){case Xe.API.image_compression.FAST:$=11;break;case Xe.API.image_compression.MEDIUM:$=13;break;case Xe.API.image_compression.SLOW:$=14;break;default:$=12}return $}(r),m=this.decode.FLATE_DECODE,w="/Predictor ".concat(pe," /Colors ").concat(L," /BitsPerComponent ").concat(f," /Columns ").concat(u),t=Od(P,Math.ceil(u*L*f/8),L,f,r),M&&(v=Od(H,Math.ceil(u*x/8),1,x,r))):(m=void 0,w=void 0,t=P,M&&(v=H)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(v&&this.__addimage__.isArrayBuffer(v)||this.__addimage__.isArrayBufferView(v))&&(v=this.__addimage__.arrayBufferToBinaryString(v)),{alias:n,data:t,index:e,filter:m,decodeParameters:w,transparency:fe,palette:oe,sMask:v,predictor:pe,width:u,height:o,bitsPerComponent:f,sMaskBitsPerComponent:x,colorSpace:k}}},function(t){t.processGIF89A=function(e,n,r,a){var s=new nv(e),u=s.width,o=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var h={data:c,width:u,height:o},f=new eu(100).encode(h,100);return t.processJPEG.call(this,f,n,r,a)},t.processGIF87A=t.processGIF89A}(Xe.API),Lr.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Lr.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){$t.log("bit decode error:"+n)}},Lr.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,a=0;a<e;a++)for(var s=this.datav.getUint8(this.pos++,!0),u=r*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var c=this.palette[s>>7-o&1];this.data[u+4*o]=c.blue,this.data[u+4*o+1]=c.green,this.data[u+4*o+2]=c.red,this.data[u+4*o+3]=255}n!==0&&(this.pos+=4-n)}},Lr.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,a=0;a<t;a++){var s=this.datav.getUint8(this.pos++,!0),u=r*this.width*4+2*a*4,o=s>>4,c=15&s,h=this.palette[o];if(this.data[u]=h.blue,this.data[u+1]=h.green,this.data[u+2]=h.red,this.data[u+3]=255,2*a+1>=this.width)break;h=this.palette[c],this.data[u+4]=h.blue,this.data[u+4+1]=h.green,this.data[u+4+2]=h.red,this.data[u+4+3]=255}e!==0&&(this.pos+=4-e)}},Lr.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(a<this.palette.length){var u=this.palette[a];this.data[s]=u.red,this.data[s+1]=u.green,this.data[s+2]=u.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},Lr.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(s&e)/e*255|0,o=(s>>5&e)/e*255|0,c=(s>>10&e)/e*255|0,h=s>>15?255:0,f=r*this.width*4+4*a;this.data[f]=c,this.data[f+1]=o,this.data[f+2]=u,this.data[f+3]=h}this.pos+=t}},Lr.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(u&e)/e*255|0,c=(u>>5&n)/n*255|0,h=(u>>11)/e*255|0,f=a*this.width*4+4*s;this.data[f]=h,this.data[f+1]=c,this.data[f+2]=o,this.data[f+3]=255}this.pos+=t}},Lr.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*n;this.data[u]=s,this.data[u+1]=a,this.data[u+2]=r,this.data[u+3]=255}this.pos+=this.width%4}},Lr.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=r,this.data[o+3]=u}},Lr.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,a){var s=new Lr(e,!1),u=s.width,o=s.height,c={data:s.getData(),width:u,height:o},h=new eu(100).encode(c,100);return t.processJPEG.call(this,h,n,r,a)}}(Xe.API),Hd.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,a){var s=new Hd(e),u=s.width,o=s.height,c={data:s.getData(),width:u,height:o},h=new eu(100).encode(c,100);return t.processJPEG.call(this,h,n,r,a)}}(Xe.API),Xe.API.processRGBA=function(t,e,n){for(var r=t.data,a=r.length,s=new Uint8Array(a/4*3),u=new Uint8Array(a/4),o=0,c=0,h=0;h<a;h+=4){var f=r[h],m=r[h+1],w=r[h+2],v=r[h+3];s[o++]=f,s[o++]=m,s[o++]=w,u[c++]=v}var y=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(u),data:y,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Xe.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Fs=Xe.API,Eo=Fs.getCharWidthsArray=function(t,e){var n,r,a=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),u=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:a.metadata.Unicode.widths,c=o.fof?o.fof:1,h=e.kerning?e.kerning:a.metadata.Unicode.kerning,f=h.fof?h.fof:1,m=e.doKerning!==!1,w=0,v=t.length,y=0,k=o[0]||c,L=[];for(n=0;n<v;n++)r=t.charCodeAt(n),typeof a.metadata.widthOfString=="function"?L.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(r))+u*(1e3/s)||0)/1e3):(w=m&&Bt(h[r])==="object"&&!isNaN(parseInt(h[r][y],10))?h[r][y]/f:0,L.push((o[r]||k)/c+w)),y=r;return L},Td=Fs.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return Fs.processArabic&&(t=Fs.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,a)/n:Eo.apply(this,arguments).reduce(function(s,u){return s+u},0)},qd=function(t,e,n,r){for(var a=[],s=0,u=t.length,o=0;s!==u&&o+e[s]<n;)o+=e[s],s++;a.push(t.slice(0,s));var c=s;for(o=0;s!==u;)o+e[s]>r&&(a.push(t.slice(c,s)),o=0,c=s),o+=e[s],s++;return c!==s&&a.push(t.slice(c,s)),a},Md=function(t,e,n){n||(n={});var r,a,s,u,o,c,h,f=[],m=[f],w=n.textIndent||0,v=0,y=0,k=t.split(" "),L=Eo.apply(this,[" ",n])[0];if(c=n.lineIndent===-1?k[0].length+2:n.lineIndent||0){var x=Array(c).join(" "),P=[];k.map(function(M){(M=M.split(/\s*\n/)).length>1?P=P.concat(M.map(function(oe,fe){return(fe&&oe.length?`
`:"")+oe})):P.push(M[0])}),k=P,c=Td.apply(this,[x,n])}for(s=0,u=k.length;s<u;s++){var H=0;if(r=k[s],c&&r[0]==`
`&&(r=r.substr(1),H=1),w+v+(y=(a=Eo.apply(this,[r,n])).reduce(function(M,oe){return M+oe},0))>e||H){if(y>e){for(o=qd.apply(this,[r,a,e-(w+v),e]),f.push(o.shift()),f=[o.pop()];o.length;)m.push([o.shift()]);y=a.slice(r.length-(f[0]?f[0].length:0)).reduce(function(M,oe){return M+oe},0)}else f=[r];m.push(f),w=y+c,v=L}else f.push(r),w+=v+y,v=L}return h=c?function(M,oe){return(oe?x:"")+M.join(" ")}:function(M){return M.join(" ")},m.map(h)},Fs.splitTextToSize=function(t,e,n){var r,a=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var m=this.internal.getFont(f.fontName,f.fontStyle),w="Unicode";return m.metadata[w]?{widths:m.metadata[w].widths||{0:1},kerning:m.metadata[w].kerning||{}}:{font:m.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var u=1*this.internal.scaleFactor*e/a;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=n.lineIndent;var o,c,h=[];for(o=0,c=r.length;o<c;o++)h=h.concat(Md.apply(this,[r[o],u,s]));return h},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",n="klmnopqrstuvwxyz",r={},a={},s=0;s<16;s++)r[n[s]]=e[s],a[e[s]]=n[s];var u=function(w){return"0x"+parseInt(w,10).toString(16)},o=t.__fontmetrics__.compress=function(w){var v,y,k,L,x=["{"];for(var P in w){if(v=w[P],isNaN(parseInt(P,10))?y="'"+P+"'":(P=parseInt(P,10),y=(y=u(P).slice(2)).slice(0,-1)+a[y.slice(-1)]),typeof v=="number")v<0?(k=u(v).slice(3),L="-"):(k=u(v).slice(2),L=""),k=L+k.slice(0,-1)+a[k.slice(-1)];else{if(Bt(v)!=="object")throw new Error("Don't know what to do with value type "+Bt(v)+".");k=o(v)}x.push(y+k)}return x.push("}"),x.join("")},c=t.__fontmetrics__.uncompress=function(w){if(typeof w!="string")throw new Error("Invalid argument passed to uncompress.");for(var v,y,k,L,x={},P=1,H=x,M=[],oe="",fe="",pe=w.length-1,re=1;re<pe;re+=1)(L=w[re])=="'"?v?(k=v.join(""),v=void 0):v=[]:v?v.push(L):L=="{"?(M.push([H,k]),H={},k=void 0):L=="}"?((y=M.pop())[0][y[1]]=H,k=void 0,H=y[0]):L=="-"?P=-1:k===void 0?r.hasOwnProperty(L)?(oe+=r[L],k=parseInt(oe,16)*P,P=1,oe=""):oe+=L:r.hasOwnProperty(L)?(fe+=r[L],H[k]=parseInt(fe,16)*P,P=1,k=void 0,fe=""):fe+=L;return x},h={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},f={Unicode:{Courier:h,"Courier-Bold":h,"Courier-BoldOblique":h,"Courier-Oblique":h,Helvetica:h,"Helvetica-Bold":h,"Helvetica-BoldOblique":h,"Helvetica-Oblique":h,"Times-Roman":h,"Times-Bold":h,"Times-BoldItalic":h,"Times-Italic":h}},m={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(w){var v=w.font,y=m.Unicode[v.postScriptName];y&&(v.metadata.Unicode={},v.metadata.Unicode.widths=y.widths,v.metadata.Unicode.kerning=y.kerning);var k=f.Unicode[v.postScriptName];k&&(v.metadata.Unicode.encoding=k,v.encoding=k.codePages[0])}])}(Xe.API),function(t){var e=function(n){for(var r=n.length,a=new Uint8Array(r),s=0;s<r;s++)a[s]=n.charCodeAt(s);return a};t.API.events.push(["addFont",function(n){var r=void 0,a=n.font,s=n.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(r=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(u,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(qo(o)),u.metadata=t.API.TTFFont.open(o),u.metadata.Unicode=u.metadata.Unicode||{encoding:{},kerning:{},widths:[]},u.metadata.glyIdsUsed=[0]})(a,r)}}])}(Xe),Xe.API.addSvgAsImage=function(t,e,n,r,a,s,u,o){if(isNaN(e)||isNaN(n))throw $t.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(a))throw $t.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=r,c.height=a;var h=c.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,c.width,c.height);var f={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return(ot.canvg?Promise.resolve(ot.canvg):Fl(()=>import("./index.es-CfFo9EZr.js"),__vite__mapDeps([0,1]))).catch(function(w){return Promise.reject(new Error("Could not load canvg: "+w))}).then(function(w){return w.default?w.default:w}).then(function(w){return w.fromString(h,t,f)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(w){return w.render(f)}).then(function(){m.addImage(c.toDataURL("image/jpeg",1),e,n,r,a,u,o)})},Xe.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var a=0;a<this.internal.pages[r].length;a++)this.internal.pages[r][a]=this.internal.pages[r][a].replace(e,n);return this},Xe.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,a,s,u={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(u),c=[],h=0,f=0,m=0;function w(y,k){var L,x=!1;for(L=0;L<y.length;L+=1)y[L]===k&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(u)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var v=o.length;for(m=0;m<v;m+=1)n[o[m]].value=n[o[m]].defaultValue,n[o[m]].explicitSet=!1}if(Bt(t)==="object"){for(a in t)if(s=t[a],w(o,a)&&s!==void 0){if(n[a].type==="boolean"&&typeof s=="boolean")n[a].value=s;else if(n[a].type==="name"&&w(n[a].valueSet,s))n[a].value=s;else if(n[a].type==="integer"&&Number.isInteger(s))n[a].value=s;else if(n[a].type==="array"){for(h=0;h<s.length;h+=1)if(r=!0,s[h].length===1&&typeof s[h][0]=="number")c.push(String(s[h]-1));else if(s[h].length>1){for(f=0;f<s[h].length;f+=1)typeof s[h][f]!="number"&&(r=!1);r===!0&&c.push([s[h][0]-1,s[h][1]-1].join(" "))}n[a].value="["+c.join(" ")+"]"}else n[a].value=n[a].defaultValue;n[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var y,k=[];for(y in n)n[y].explicitSet===!0&&(n[y].type==="name"?k.push("/"+y+" /"+n[y].value):k.push("/"+y+" "+n[y].value));k.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+k.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),u=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),h=s.length+u.length+o.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+h+" >>"),this.internal.write("stream"),this.internal.write(a+s+u+o+c),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(Xe.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,u){for(var o,c=u.metadata.Unicode.widths,h=["","0","00","000","0000"],f=[""],m=0,w=s.length;m<w;++m){if(o=u.metadata.characterToGlyph(s.charCodeAt(m)),u.metadata.glyIdsUsed.push(o),u.metadata.toUnicode[o]=s.charCodeAt(m),c.indexOf(o)==-1&&(c.push(o),c.push([parseInt(u.metadata.widthOfGlyph(o),10)])),o=="0")return f.join("");o=o.toString(16),f.push(h[4-o.length],o)}return f.join("")},r=function(s){var u,o,c,h,f,m,w;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],m=0,w=(o=Object.keys(s).sort(function(v,y){return v-y})).length;m<w;m++)u=o[m],c.length>=100&&(f+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[u]!==void 0&&s[u]!==null&&typeof s[u].toString=="function"&&(h=("0000"+s[u].toString(16)).slice(-4),u=("0000"+(+u).toString(16)).slice(-4),c.push("<"+u+"><"+h+">"));return c.length&&(f+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),f+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(u){var o=u.font,c=u.out,h=u.newObject,f=u.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var m=o.metadata.Unicode.widths,w=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),v="",y=0;y<w.length;y++)v+=String.fromCharCode(w[y]);var k=h();f({data:v,addLength1:!0,objectId:k}),c("endobj");var L=h();f({data:r(o.metadata.toUnicode),addLength1:!0,objectId:L}),c("endobj");var x=h();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Bs(o.fontName)),c("/FontFile2 "+k+" 0 R"),c("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),c("/Flags "+o.metadata.flags),c("/StemV "+o.metadata.stemV),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c(">>"),c("endobj");var P=h();c("<<"),c("/Type /Font"),c("/BaseFont /"+Bs(o.fontName)),c("/FontDescriptor "+x+" 0 R"),c("/W "+t.API.PDFObject.convert(m)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+o.encoding+")"),c(">>"),c(">>"),c("endobj"),o.objectNumber=h(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+L+" 0 R"),c("/BaseFont /"+Bs(o.fontName)),c("/Encoding /"+o.encoding),c("/DescendantFonts ["+P+" 0 R]"),c(">>"),c("endobj"),o.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(u){var o=u.font,c=u.out,h=u.newObject,f=u.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var m=o.metadata.rawData,w="",v=0;v<m.length;v++)w+=String.fromCharCode(m[v]);var y=h();f({data:w,addLength1:!0,objectId:y}),c("endobj");var k=h();f({data:r(o.metadata.toUnicode),addLength1:!0,objectId:k}),c("endobj");var L=h();c("<<"),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c("/StemV "+o.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+y+" 0 R"),c("/Flags 96"),c("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),c("/FontName /"+Bs(o.fontName)),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c(">>"),c("endobj"),o.objectNumber=h();for(var x=0;x<o.metadata.hmtx.widths.length;x++)o.metadata.hmtx.widths[x]=parseInt(o.metadata.hmtx.widths[x]*(1e3/o.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+k+" 0 R/BaseFont/"+Bs(o.fontName)+"/FontDescriptor "+L+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),c("endobj"),o.isAlreadyPutted=!0}})(s)}]);var a=function(s){var u,o=s.text||"",c=s.x,h=s.y,f=s.options||{},m=s.mutex||{},w=m.pdfEscape,v=m.activeFontKey,y=m.fonts,k=v,L="",x=0,P="",H=y[k].encoding;if(y[k].encoding!=="Identity-H")return{text:o,x:c,y:h,options:f,mutex:m};for(P=o,k=v,Array.isArray(o)&&(P=o[0]),x=0;x<P.length;x+=1)y[k].metadata.hasOwnProperty("cmap")&&(u=y[k].metadata.cmap.unicode.codeMap[P[x].charCodeAt(0)]),u||P[x].charCodeAt(0)<256&&y[k].metadata.hasOwnProperty("Unicode")?L+=P[x]:L+="";var M="";return parseInt(k.slice(1))<14||H==="WinAnsiEncoding"?M=w(L,k).split("").map(function(oe){return oe.charCodeAt(0).toString(16)}).join(""):H==="Identity-H"&&(M=n(L,y[k])),m.isHex=!0,{text:M,x:c,y:h,options:f,mutex:m}};e.events.push(["postProcessText",function(s){var u=s.text||"",o=[],c={text:u,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(u)){var h=0;for(h=0;h<u.length;h+=1)Array.isArray(u[h])&&u[h].length===3?o.push([a(Object.assign({},c,{text:u[h][0]})).text,u[h][1],u[h][2]]):o.push(a(Object.assign({},c,{text:u[h]})).text);s.text=o}else s.text=a(Object.assign({},c,{text:u})).text}])}(Xe),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(Xe.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var a,s,u,o,c,h,f,m=e,w=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],v=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},k={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},L=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),P=!1,H=0;this.__bidiEngine__={};var M=function(F){var B=F.charCodeAt(),ee=B>>8,Z=k[ee];return Z!==void 0?m[256*Z+(255&B)]:ee===252||ee===253?"AL":x.test(ee)?"L":ee===8?"R":"N"},oe=function(F){for(var B,ee=0;ee<F.length;ee++){if((B=M(F.charAt(ee)))==="L")return!1;if(B==="R")return!0}return!1},fe=function(F,B,ee,Z){var de,ge,ke,ve,Se=B[Z];switch(Se){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":P=!1;break;case"N":case"AN":break;case"EN":P&&(Se="AN");break;case"AL":P=!0,Se="R";break;case"WS":case"BN":Se="N";break;case"CS":Z<1||Z+1>=B.length||(de=ee[Z-1])!=="EN"&&de!=="AN"||(ge=B[Z+1])!=="EN"&&ge!=="AN"?Se="N":P&&(ge="AN"),Se=ge===de?ge:"N";break;case"ES":Se=(de=Z>0?ee[Z-1]:"B")==="EN"&&Z+1<B.length&&B[Z+1]==="EN"?"EN":"N";break;case"ET":if(Z>0&&ee[Z-1]==="EN"){Se="EN";break}if(P){Se="N";break}for(ke=Z+1,ve=B.length;ke<ve&&B[ke]==="ET";)ke++;Se=ke<ve&&B[ke]==="EN"?"EN":"N";break;case"NSM":if(u&&!o){for(ve=B.length,ke=Z+1;ke<ve&&B[ke]==="NSM";)ke++;if(ke<ve){var Ee=F[Z],Le=Ee>=1425&&Ee<=2303||Ee===64286;if(de=B[ke],Le&&(de==="R"||de==="AL")){Se="R";break}}}Se=Z<1||(de=B[Z-1])==="B"?"N":ee[Z-1];break;case"B":P=!1,a=!0,Se=H;break;case"S":s=!0,Se="N"}return Se},pe=function(F,B,ee){var Z=F.split("");return ee&&re(Z,ee,{hiLevel:H}),Z.reverse(),B&&B.reverse(),Z.join("")},re=function(F,B,ee){var Z,de,ge,ke,ve,Se=-1,Ee=F.length,Le=0,I=[],V=H?v:w,R=[];for(P=!1,a=!1,s=!1,de=0;de<Ee;de++)R[de]=M(F[de]);for(ge=0;ge<Ee;ge++){if(ve=Le,I[ge]=fe(F,R,I,ge),Z=240&(Le=V[ve][y[I[ge]]]),Le&=15,B[ge]=ke=V[Le][5],Z>0)if(Z===16){for(de=Se;de<ge;de++)B[de]=1;Se=-1}else Se=-1;if(V[Le][6])Se===-1&&(Se=ge);else if(Se>-1){for(de=Se;de<ge;de++)B[de]=ke;Se=-1}R[ge]==="B"&&(B[ge]=0),ee.hiLevel|=ke}s&&function(q,O,S){for(var j=0;j<S;j++)if(q[j]==="S"){O[j]=H;for(var C=j-1;C>=0&&q[C]==="WS";C--)O[C]=H}}(R,B,Ee)},$=function(F,B,ee,Z,de){if(!(de.hiLevel<F)){if(F===1&&H===1&&!a)return B.reverse(),void(ee&&ee.reverse());for(var ge,ke,ve,Se,Ee=B.length,Le=0;Le<Ee;){if(Z[Le]>=F){for(ve=Le+1;ve<Ee&&Z[ve]>=F;)ve++;for(Se=Le,ke=ve-1;Se<ke;Se++,ke--)ge=B[Se],B[Se]=B[ke],B[ke]=ge,ee&&(ge=ee[Se],ee[Se]=ee[ke],ee[ke]=ge);Le=ve}Le++}}},ce=function(F,B,ee){var Z=F.split(""),de={hiLevel:H};return ee||(ee=[]),re(Z,ee,de),function(ge,ke,ve){if(ve.hiLevel!==0&&f)for(var Se,Ee=0;Ee<ge.length;Ee++)ke[Ee]===1&&(Se=L.indexOf(ge[Ee]))>=0&&(ge[Ee]=L[Se+1])}(Z,ee,de),$(2,Z,B,ee,de),$(1,Z,B,ee,de),Z.join("")};return this.__bidiEngine__.doBidiReorder=function(F,B,ee){if(function(de,ge){if(ge)for(var ke=0;ke<de.length;ke++)ge[ke]=ke;o===void 0&&(o=oe(de)),h===void 0&&(h=oe(de))}(F,B),u||!c||h)if(u&&c&&o^h)H=o?1:0,F=pe(F,B,ee);else if(!u&&c&&h)H=o?1:0,F=ce(F,B,ee),F=pe(F,B);else if(!u||o||c||h){if(u&&!c&&o^h)F=pe(F,B),o?(H=0,F=ce(F,B,ee)):(H=1,F=ce(F,B,ee),F=pe(F,B));else if(u&&o&&!c&&h)H=1,F=ce(F,B,ee),F=pe(F,B);else if(!u&&!c&&o^h){var Z=f;o?(H=1,F=ce(F,B,ee),H=0,f=!1,F=ce(F,B,ee),f=Z):(H=0,F=ce(F,B,ee),F=pe(F,B),H=1,f=!1,F=ce(F,B,ee),f=Z,F=pe(F,B))}}else H=0,F=ce(F,B,ee);else H=o?1:0,F=ce(F,B,ee);return F},this.__bidiEngine__.setOptions=function(F){F&&(u=F.isInputVisual,c=F.isOutputVisual,o=F.isInputRtl,h=F.isOutputRtl,f=F.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var a=r.text;r.x,r.y;var s=r.options||{};r.mutex,s.lang;var u=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var o=0;for(u=[],o=0;o<a.length;o+=1)Object.prototype.toString.call(a[o])==="[object Array]"?u.push([n.doBidiReorder(a[o][0]),a[o][1],a[o][2]]):u.push([n.doBidiReorder(a[o])]);r.text=u}else r.text=n.doBidiReorder(a);n.setOptions({isInputVisual:!0})}])}(Xe),Xe.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new za(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new mv(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new rv(this.contents),this.head=new sv(this),this.name=new cv(this),this.cmap=new th(this),this.toUnicode={},this.hhea=new iv(this),this.maxp=new dv(this),this.hmtx=new hv(this),this.post=new lv(this),this.os2=new ov(this),this.loca=new gv(this),this.glyf=new fv(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var u,o,c,h;for(h=[],u=0,o=(c=this.bbox).length;u<o;u++)e=c[u],h.push(Math.round(e*this.scaleFactor));return h}).call(this),this.stemV=0,this.post.exists?(r=255&(a=this.post.italic_angle),32768&(n=a>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var a,s,u,o;for(u=0,s=0,o=(e=""+e).length;0<=o?s<o:s>o;s=0<=o?++s:--s)a=e.charCodeAt(s),u+=this.widthOfGlyph(this.characterToGlyph(a))+r*(1e3/n)||0;return u*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var Er,za=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,a;for(a=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)a.push(this.writeByte(e.charCodeAt(n)));return a},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,a,s,u,o,c;return e=this.readByte(),n=this.readByte(),r=this.readByte(),a=this.readByte(),s=this.readByte(),u=this.readByte(),o=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^a)+16777216*(255^s)+65536*(255^u)+256*(255^o)+(255^c)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*a+16777216*s+65536*u+256*o+c},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,a,s;for(s=[],r=0,a=e.length;r<a;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),rv=function(){var t;function e(n){var r,a,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,a,s,u,o,c,h,f,m,w,v,y,k;for(k in v=Object.keys(n).length,c=Math.log(2),m=16*Math.floor(Math.log(v)/c),u=Math.floor(m/c),f=16*v-m,(a=new za).writeInt(this.scalarType),a.writeShort(v),a.writeShort(m),a.writeShort(u),a.writeShort(f),s=16*v,h=a.pos+s,o=null,y=[],n)for(w=n[k],a.writeString(k),a.writeInt(t(w)),a.writeInt(h),a.writeInt(w.length),y=y.concat(w),k==="head"&&(o=h),h+=w.length;h%4;)y.push(0),h++;return a.write(y),r=2981146554-t(a.data),a.pos=o+8,a.writeUInt32(r),a.data},t=function(n){var r,a,s,u;for(n=nh.call(n);n.length%4;)n.push(0);for(s=new za(n),a=0,r=0,u=n.length;r<u;r=r+=4)a+=s.readUInt32();return 4294967295&a},e}(),av={}.hasOwnProperty,Jr=function(t,e){for(var n in e)av.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Er=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var sv=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Jr(t,Er),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var n;return(n=new za).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(e),n.writeShort(this.glyphDataFormat),n.data},t}(),Vd=function(){function t(e,n){var r,a,s,u,o,c,h,f,m,w,v,y,k,L,x,P,H;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),m=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(v=e.readUInt16(),w=v/2,e.pos+=6,s=function(){var M,oe;for(oe=[],c=M=0;0<=w?M<w:M>w;c=0<=w?++M:--M)oe.push(e.readUInt16());return oe}(),e.pos+=2,k=function(){var M,oe;for(oe=[],c=M=0;0<=w?M<w:M>w;c=0<=w?++M:--M)oe.push(e.readUInt16());return oe}(),h=function(){var M,oe;for(oe=[],c=M=0;0<=w?M<w:M>w;c=0<=w?++M:--M)oe.push(e.readUInt16());return oe}(),f=function(){var M,oe;for(oe=[],c=M=0;0<=w?M<w:M>w;c=0<=w?++M:--M)oe.push(e.readUInt16());return oe}(),a=(this.length-e.pos+this.offset)/2,o=function(){var M,oe;for(oe=[],c=M=0;0<=a?M<a:M>a;c=0<=a?++M:--M)oe.push(e.readUInt16());return oe}(),c=x=0,H=s.length;x<H;c=++x)for(L=s[c],r=P=y=k[c];y<=L?P<=L:P>=L;r=y<=L?++P:--P)f[c]===0?u=r+h[c]:(u=o[f[c]/2+(r-y)-(w-c)]||0)!==0&&(u+=h[c]),this.codeMap[r]=65535&u}e.pos=m}return t.encode=function(e,n){var r,a,s,u,o,c,h,f,m,w,v,y,k,L,x,P,H,M,oe,fe,pe,re,$,ce,F,B,ee,Z,de,ge,ke,ve,Se,Ee,Le,I,V,R,q,O,S,j,C,J,te,_e;switch(Z=new za,u=Object.keys(e).sort(function(be,Q){return be-Q}),n){case"macroman":for(k=0,L=function(){var be=[];for(y=0;y<256;++y)be.push(0);return be}(),P={0:0},s={},de=0,Se=u.length;de<Se;de++)P[C=e[a=u[de]]]==null&&(P[C]=++k),s[a]={old:e[a],new:P[e[a]]},L[a]=P[e[a]];return Z.writeUInt16(1),Z.writeUInt16(0),Z.writeUInt32(12),Z.writeUInt16(0),Z.writeUInt16(262),Z.writeUInt16(0),Z.write(L),{charMap:s,subtable:Z.data,maxGlyphID:k+1};case"unicode":for(B=[],m=[],H=0,P={},r={},x=h=null,ge=0,Ee=u.length;ge<Ee;ge++)P[oe=e[a=u[ge]]]==null&&(P[oe]=++H),r[a]={old:oe,new:P[oe]},o=P[oe]-a,x!=null&&o===h||(x&&m.push(x),B.push(a),h=o),x=a;for(x&&m.push(x),m.push(65535),B.push(65535),ce=2*($=B.length),re=2*Math.pow(Math.log($)/Math.LN2,2),w=Math.log(re/2)/Math.LN2,pe=2*$-re,c=[],fe=[],v=[],y=ke=0,Le=B.length;ke<Le;y=++ke){if(F=B[y],f=m[y],F===65535){c.push(0),fe.push(0);break}if(F-(ee=r[F].new)>=32768)for(c.push(0),fe.push(2*(v.length+$-y)),a=ve=F;F<=f?ve<=f:ve>=f;a=F<=f?++ve:--ve)v.push(r[a].new);else c.push(ee-F),fe.push(0)}for(Z.writeUInt16(3),Z.writeUInt16(1),Z.writeUInt32(12),Z.writeUInt16(4),Z.writeUInt16(16+8*$+2*v.length),Z.writeUInt16(0),Z.writeUInt16(ce),Z.writeUInt16(re),Z.writeUInt16(w),Z.writeUInt16(pe),S=0,I=m.length;S<I;S++)a=m[S],Z.writeUInt16(a);for(Z.writeUInt16(0),j=0,V=B.length;j<V;j++)a=B[j],Z.writeUInt16(a);for(J=0,R=c.length;J<R;J++)o=c[J],Z.writeUInt16(o);for(te=0,q=fe.length;te<q;te++)M=fe[te],Z.writeUInt16(M);for(_e=0,O=v.length;_e<O;_e++)k=v[_e],Z.writeUInt16(k);return{charMap:r,subtable:Z.data,maxGlyphID:H+1}}},t}(),th=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Jr(t,Er),t.prototype.tag="cmap",t.prototype.parse=function(e){var n,r,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=a?r<a:r>a;r=0<=a?++r:--r)n=new Vd(e,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(e,n){var r,a;return n==null&&(n="macroman"),r=Vd.encode(e,n),(a=new za).writeUInt16(0),a.writeUInt16(1),r.table=a.data.concat(r.subtable),r},t}(),iv=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Jr(t,Er),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),ov=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Jr(t,Er),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var n,r;for(r=[],n=0;n<10;++n)r.push(e.readByte());return r}(),this.charRange=function(){var n,r;for(r=[],n=0;n<4;++n)r.push(e.readInt());return r}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var n,r;for(r=[],n=0;n<2;n=++n)r.push(e.readInt());return r}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),lv=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Jr(t,Er),t.prototype.tag="post",t.prototype.parse=function(e){var n,r,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(r=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)n=e.readByte(),a.push(this.names.push(e.readString(n)));return a;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var u,o,c;for(c=[],s=u=0,o=this.file.maxp.numGlyphs;0<=o?u<o:u>o;s=0<=o?++u:--u)c.push(e.readUInt32());return c}).call(this)}},t}(),uv=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},cv=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Jr(t,Er),t.prototype.tag="name",t.prototype.parse=function(e){var n,r,a,s,u,o,c,h,f,m,w;for(e.pos=this.offset,e.readShort(),n=e.readShort(),o=e.readShort(),r=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+o+e.readShort()});for(c={},s=f=0,m=r.length;f<m;s=++f)a=r[s],e.pos=a.offset,h=e.readString(a.length),u=new uv(h,a),c[w=a.nameID]==null&&(c[w]=[]),c[a.nameID].push(u);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},t}(),dv=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Jr(t,Er),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),hv=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Jr(t,Er),t.prototype.tag="hmtx",t.prototype.parse=function(e){var n,r,a,s,u,o,c;for(e.pos=this.offset,this.metrics=[],n=0,o=this.file.hhea.numberOfMetrics;0<=o?n<o:n>o;n=0<=o?++n:--n)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var h,f;for(f=[],n=h=0;0<=a?h<a:h>a;n=0<=a?++h:--h)f.push(e.readInt16());return f}(),this.widths=(function(){var h,f,m,w;for(w=[],h=0,f=(m=this.metrics).length;h<f;h++)s=m[h],w.push(s.advance);return w}).call(this),r=this.widths[this.widths.length-1],c=[],n=u=0;0<=a?u<a:u>a;n=0<=a?++u:--u)c.push(this.widths.push(r));return c},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),nh=[].slice,fv=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Jr(t,Er),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var n,r,a,s,u,o,c,h,f,m;return e in this.cache?this.cache[e]:(s=this.file.loca,n=this.file.contents,r=s.indexOf(e),(a=s.lengthOf(e))===0?this.cache[e]=null:(n.pos=this.offset+r,u=(o=new za(n.read(a))).readShort(),h=o.readShort(),m=o.readShort(),c=o.readShort(),f=o.readShort(),this.cache[e]=u===-1?new vv(o,h,m,c,f):new pv(o,u,h,m,c,f),this.cache[e]))},t.prototype.encode=function(e,n,r){var a,s,u,o,c;for(u=[],s=[],o=0,c=n.length;o<c;o++)a=e[n[o]],s.push(u.length),a&&(u=u.concat(a.encode(r)));return s.push(u.length),{table:u,offsets:s}},t}(),pv=function(){function t(e,n,r,a,s,u){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=a,this.xMax=s,this.yMax=u,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),vv=function(){function t(e,n,r,a,s){var u,o;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],u=this.raw;o=u.readShort(),this.glyphOffsets.push(u.pos),this.glyphIDs.push(u.readUInt16()),32&o;)u.pos+=1&o?4:2,128&o?u.pos+=8:64&o?u.pos+=4:8&o&&(u.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new za(nh.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),gv=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Jr(t,Er),t.prototype.tag="loca",t.prototype.parse=function(e){var n,r;return e.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var a,s;for(s=[],r=0,a=this.length;r<a;r+=2)s.push(2*e.readUInt16());return s}).call(this):(function(){var a,s;for(s=[],r=0,a=this.length;r<a;r+=4)s.push(e.readUInt32());return s}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,n){for(var r=new Uint32Array(this.offsets.length),a=0,s=0,u=0;u<r.length;++u)if(r[u]=a,s<n.length&&n[s]==u){++s,r[u]=a;var o=this.offsets[u],c=this.offsets[u+1]-o;c>0&&(a+=c)}for(var h=new Array(4*r.length),f=0;f<r.length;++f)h[4*f+3]=255&r[f],h[4*f+2]=(65280&r[f])>>8,h[4*f+1]=(16711680&r[f])>>16,h[4*f]=(4278190080&r[f])>>24;return h},t}(),mv=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,a,s;for(n in a=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=a[r];return e},t.prototype.glyphsFor=function(e){var n,r,a,s,u,o,c;for(a={},u=0,o=e.length;u<o;u++)a[s=e[u]]=this.font.glyf.glyphFor(s);for(s in n=[],a)(r=a[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in c=this.glyphsFor(n))r=c[s],a[s]=r;return a},t.prototype.encode=function(e,n){var r,a,s,u,o,c,h,f,m,w,v,y,k,L,x;for(a in r=th.encode(this.generateCmap(),"unicode"),u=this.glyphsFor(e),v={0:0},x=r.charMap)v[(c=x[a]).old]=c.new;for(y in w=r.maxGlyphID,u)y in v||(v[y]=w++);return f=function(P){var H,M;for(H in M={},P)M[P[H]]=H;return M}(v),m=Object.keys(f).sort(function(P,H){return P-H}),k=function(){var P,H,M;for(M=[],P=0,H=m.length;P<H;P++)o=m[P],M.push(f[o]);return M}(),s=this.font.glyf.encode(u,k,v),h=this.font.loca.encode(s.offsets,k),L={cmap:this.font.cmap.raw(),glyf:s.table,loca:h,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(L["OS/2"]=this.font.os2.raw()),this.font.directory.encode(L)},t}();Xe.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,a,s,u;if(Array.isArray(n))return"["+function(){var o,c,h;for(h=[],o=0,c=n.length;o<c;o++)r=n[o],h.push(e.convert(r));return h}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n?.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(a in s=["<<"],n)u=n[a],s.push("/"+a+" "+e.convert(u));return s.push(">>"),s.join(`
`)}return""+n},e}();const bv={class:"conversation-thread"},yv={class:"thread-header"},wv={class:"thread-icon"},_v={class:"thread-label"},kv={class:"question-section"},xv={class:"question-text"},Sv={class:"answer-section"},Av={class:"answer-text"},Lv={__name:"ConversationThread",props:{thread:{type:Array,required:!0,default:()=>[]}},setup(t){return(e,n)=>(X(),ne("div",bv,[(X(!0),ne(Pt,null,Ut(t.thread,(r,a)=>(X(),ne("div",{key:r.id,class:Ze(["thread-item",{"follow-up":a>0}])},[d("div",yv,[d("span",wv,le(a===0?"💬":"↳"),1),d("span",_v,le(a===0?"Original Question":`Follow-up ${a}`),1)]),d("div",kv,[n[0]||(n[0]=d("h4",null,"Question:",-1)),d("div",xv,[st(fs,{text:r.question},null,8,["text"])])]),d("div",Sv,[n[1]||(n[1]=d("h4",null,"Answer:",-1)),d("div",Av,[st(fs,{text:r.answer},null,8,["text"])])])],2))),128))]))}},Nv=tn(Lv,[["__scopeId","data-v-3b8896ca"]]),Cv={class:"saved-answers"},Pv={class:"saved-answers-header"},Iv={class:"header-title"},Ev={key:0,class:"saved-count"},Rv={class:"header-actions"},Fv={class:"search-container"},Tv={key:0,class:"tags-filter"},qv=["onClick"],Mv={key:1,class:"empty-state"},Ov={key:2,class:"empty-state"},Bv={key:3,class:"answers-grid"},jv={class:"answer-card-header"},Dv={class:"answer-question"},$v={class:"answer-actions"},Uv=["onClick"],zv=["onClick"],Hv={key:0,class:"answer-card-content"},Vv={key:1,class:"answer-text"},Wv={class:"answer-meta"},Gv={class:"meta-item"},Jv={class:"meta-item"},Kv={key:0,class:"meta-item"},Yv={key:2,class:"answer-tags"},Qv={class:"answer-card-actions"},Xv={key:0,viewBox:"0 0 20 20",fill:"currentColor"},Zv={key:1,viewBox:"0 0 20 20",fill:"currentColor"},eg={class:"modal-body"},tg={class:"export-select-toolbar"},ng={class:"export-select-all"},rg=["checked","indeterminate"],ag={class:"export-selection-count"},sg={class:"export-answers-list"},ig=["checked","onChange"],og={class:"export-answer-content"},lg={class:"export-answer-question"},ug={class:"export-answer-meta"},cg={class:"export-format-section"},dg={class:"export-format-options"},hg={class:"export-stats"},fg={class:"stat-item"},pg={class:"stat-item"},vg={class:"stat-item"},gg={class:"modal-footer"},mg={__name:"SavedAnswers",emits:["update"],setup(t,{expose:e,emit:n}){const r=n,a=Ae([]),s=Ae(""),u=Ae(""),o=Ae(new Set),c=Ae(!1),h=Ae(null),f=Ae(new Set),m=Ae("text"),w=R=>{if(typeof R=="string")return R;if(R==null)return"";try{return String(R)}catch(q){return console.warn("Failed to normalize text value:",q),""}},v=R=>{const q=w(R).trim();return q?q.split(/\s+/).length:0},y=R=>Array.isArray(R?.conversation_thread)&&R.conversation_thread.length>0?R.conversation_thread.reduce((q,O)=>q+v(O?.answer),0):v(R?.answer),k=R=>{if(!R||typeof R!="object")return{wordCount:0};const q=typeof R.wordCount=="number"?R.wordCount:y(R);return{...R,wordCount:q}},L=Ae([]),x=async()=>{try{L.value=await ma.getAllTags()||[]}catch(R){console.error("Error getting tags:",R),L.value=[]}},P=je(()=>{let R=a.value||[];if(s.value&&s.value.trim()){const q=s.value.trim().toLowerCase();R=R.filter(O=>{const S=w(O.question).toLowerCase(),j=w(O.answer).toLowerCase();return S.includes(q)||j.includes(q)})}return u.value&&R.length>0&&(R=R.filter(q=>q.tags&&Array.isArray(q.tags)&&q.tags.includes(u.value))),R});je(()=>({totalWords:a.value.reduce((q,O)=>q+y(O),0),totalTags:L.value.length}));const H=je(()=>a.value.length>0&&a.value.every(R=>f.value.has(R.id))),M=je(()=>{const R=a.value.filter(q=>f.value.has(q.id)).length;return R>0&&R<a.value.length}),oe=je(()=>a.value.filter(R=>f.value.has(R.id))),fe=je(()=>{const R=oe.value,q=R.reduce((S,j)=>S+y(j),0),O=new Set;return R.forEach(S=>{S.tags&&Array.isArray(S.tags)&&S.tags.forEach(j=>O.add(j))}),{totalWords:q,totalTags:O.size}}),pe=async()=>{try{const R=await ma.getAll();a.value=(Array.isArray(R)?R:[]).map(k)}catch(R){console.error("Failed to load saved answers:",R),a.value=[]}},re=async R=>{if(confirm("Are you sure you want to delete this saved answer?")){const q=await ma.delete(R);q.success?(await pe(),await x(),o.value.delete(R),r("update")):console.error("Failed to delete answer:",q.message)}},$=R=>{o.value.has(R)?o.value.delete(R):o.value.add(R)},ce=R=>{f.value.has(R)?f.value.delete(R):f.value.add(R),f.value=new Set(f.value)},F=()=>{H.value?f.value.clear():a.value.forEach(R=>{f.value.add(R.id)}),f.value=new Set(f.value)},B=()=>{f.value.clear(),f.value=new Set(f.value),m.value="text",c.value=!0},ee=()=>{c.value=!1,f.value.clear(),f.value=new Set(f.value),m.value="text"},Z=async R=>{try{const q=de(R);await navigator.clipboard.writeText(q),h.value=R.id,setTimeout(()=>{h.value=null},2e3)}catch(q){console.error("Failed to copy text: ",q)}},de=R=>{let q="";return R.conversation_thread&&R.conversation_thread.length>1?q=R.conversation_thread.map((O,S)=>`${S===0?"Question":`Follow-up ${S}`}: ${O.question}

Answer: ${O.answer}`).join(`

`+"=".repeat(60)+`

`):q=`Question: ${R.question}

Answer: ${R.answer}`,q},ge=async R=>{const q=de(R);if(navigator.share){try{await navigator.share({title:"Bible Q&A - Saved Answer",text:q})}catch(O){O.name!=="AbortError"&&(console.error("Error sharing:",O),Z(R))}return}Z(R)},ke=R=>{let q="";return q+=`Question: ${R.question}
`,q+=`Saved: ${V(R.saved_at)}
`,q+=`${"─".repeat(50)}

`,R.conversation_thread&&R.conversation_thread.length>1?R.conversation_thread.forEach((O,S)=>{const j=S===0?"Question":`Follow-up ${S}`;q+=`${j}: ${O.question}

`,q+=`Answer: ${O.answer}

`,S<R.conversation_thread.length-1&&(q+=`${"─".repeat(30)}

`)}):q+=`Answer:
${R.answer}
`,R.tags&&R.tags.length>0&&(q+=`
Tags: ${R.tags.join(", ")}
`),q},ve=R=>{const q=new Date().toISOString().split("T")[0],O=R.length;let S=`Bible Q&A - Saved Answers Export
`;S+=`Exported: ${new Date().toLocaleString()}
`,S+=`Total Answers: ${O}
`,S+=`${"═".repeat(60)}

`,R.forEach((J,te)=>{S+=ke(J),te<R.length-1&&(S+=`
${"═".repeat(60)}

`)});const j=O===a.value.length?`bible-qa-saved-answers-${q}.txt`:`bible-qa-saved-answers-${O}-selected-${q}.txt`,C=new Blob([S],{type:"text/plain;charset=utf-8"});Le(C,j)},Se=R=>{const q=new Date,O=q.getFullYear()+"-"+String(q.getMonth()+1).padStart(2,"0")+"-"+String(q.getDate()).padStart(2,"0")+"_"+String(q.getHours()).padStart(2,"0")+"-"+String(q.getMinutes()).padStart(2,"0")+"-"+String(q.getSeconds()).padStart(2,"0"),S=R.length,j={exportDate:new Date().toISOString(),count:S,answers:R},C=S===a.value.length?`bible-qa-saved-answers-${O}.json`:`bible-qa-saved-answers-${S}-selected-${O}.json`,J=new Blob([JSON.stringify(j,null,2)],{type:"application/json"});Le(J,C)},Ee=async R=>{const q=new Date,O=q.getFullYear()+"-"+String(q.getMonth()+1).padStart(2,"0")+"-"+String(q.getDate()).padStart(2,"0")+"_"+String(q.getHours()).padStart(2,"0")+"-"+String(q.getMinutes()).padStart(2,"0")+"-"+String(q.getSeconds()).padStart(2,"0"),S=R.length,j=new Xe({orientation:"portrait",unit:"mm",format:"a4"}),C=j.internal.pageSize.getWidth(),J=j.internal.pageSize.getHeight(),te=20,_e=25,be=C-te*2;let Q=te;const _=ae=>ae?ae.replace(/τέκτων/g,"tekton").replace(/[α-ωΑ-Ω]/g,Oe=>({α:"a",β:"b",γ:"g",δ:"d",ε:"e",ζ:"z",η:"e",θ:"th",ι:"i",κ:"k",λ:"l",μ:"m",ν:"n",ξ:"x",ο:"o",π:"p",ρ:"r",σ:"s",ς:"s",τ:"t",υ:"u",φ:"ph",χ:"ch",ψ:"ps",ω:"o",Α:"A",Β:"B",Γ:"G",Δ:"D",Ε:"E",Ζ:"Z",Η:"E",Θ:"Th",Ι:"I",Κ:"K",Λ:"L",Μ:"M",Ν:"N",Ξ:"X",Ο:"O",Π:"P",Ρ:"R",Σ:"S",Τ:"T",Υ:"U",Φ:"Ph",Χ:"Ch",Ψ:"Ps",Ω:"O"})[Oe]||Oe).replace(/[\u0590-\u05FF]/g,"").replace(/—/g," - ").replace(/–/g,"-").replace(/[""]/g,'"').replace(/['']/g,"'").replace(/…/g,"...").replace(/[^\x00-\x7F]/g,""):"",se=ae=>Q+ae>J-_e?(j.addPage(),Q=te,!0):!1,z=(ae,Oe,Be,Ue,Ve,At="normal")=>{j.setFontSize(Ve),j.setFont("helvetica",At);const lt=_(ae),et=j.splitTextToSize(lt,Ue),ut=Ve*.4;let ct=Be;for(let ze=0;ze<et.length;ze++)ct+ut>J-_e&&(j.addPage(),ct=te),j.text(et[ze],Oe,ct),ct+=ut;return ct};j.setFontSize(22),j.setFont("helvetica","bold"),j.setTextColor(47,74,126),j.text("Bible Q&A - Saved Answers",te,Q),Q+=10,j.setDrawColor(47,74,126),j.setLineWidth(.5),j.line(te,Q,C-te,Q),Q+=8,j.setFontSize(10),j.setFont("helvetica","normal"),j.setTextColor(100,100,100),j.text(`Exported: ${new Date().toLocaleString()} | Total Answers: ${S}`,te,Q),Q+=15,R.forEach((ae,Oe)=>{se(60),j.setTextColor(47,74,126),j.setFontSize(12),j.setFont("helvetica","bold"),Q=z(ae.question,te,Q,be,12,"bold"),Q+=2,j.setTextColor(130,130,130),j.setFontSize(9),j.setFont("helvetica","normal"),j.text(`Saved: ${V(ae.saved_at)} | ${ae.wordCount} words`,te,Q),Q+=8,j.setTextColor(50,50,50),ae.conversation_thread&&ae.conversation_thread.length>1?ae.conversation_thread.forEach((Be,Ue)=>{se(40);const Ve=Ue===0?"Question":`Follow-up ${Ue}`;j.setFontSize(10),j.setFont("helvetica","bold"),j.setTextColor(80,80,80),Q=z(`${Ve}: ${Be.question}`,te+5,Q,be-10,10,"bold"),Q+=3,j.setFont("helvetica","normal"),j.setTextColor(50,50,50),j.setFontSize(10),Q=z(Be.answer,te+5,Q,be-10,10),Q+=8}):(j.setFontSize(10),Q=z(ae.answer,te,Q,be,10),Q+=5),ae.tags&&ae.tags.length>0&&(se(15),j.setFontSize(8),j.setTextColor(47,74,126),j.text(`Tags: ${ae.tags.join(", ")}`,te,Q),Q+=8),Oe<R.length-1&&(Q+=5,se(20),j.setDrawColor(200,200,200),j.setLineWidth(.2),j.line(te,Q,C-te,Q),Q+=10)});const Y=S===a.value.length?`bible-qa-saved-answers-${O}.pdf`:`bible-qa-saved-answers-${S}-selected-${O}.pdf`;j.save(Y)},Le=(R,q)=>{const O=URL.createObjectURL(R),S=document.createElement("a");S.href=O,S.download=q,document.body.appendChild(S),S.click(),document.body.removeChild(S),URL.revokeObjectURL(O)},I=async()=>{try{const R=oe.value;switch(m.value){case"text":ve(R);break;case"json":Se(R);break;case"pdf":await Ee(R);break}ee()}catch(R){console.error("Failed to export data:",R)}},V=R=>new Date(R).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return Vr(async()=>{await pe(),await x()}),qt(s,R=>{console.log("Search query changed:",R),console.log("Available answers:",a.value.length),console.log("Filtered answers:",P.value.length)}),e({refresh:pe}),(R,q)=>(X(),ne("div",Cv,[d("div",Pv,[d("div",Iv,[q[7]||(q[7]=d("h2",null,"Saved Answers",-1)),a.value.length>0?(X(),ne("span",Ev,le(a.value.length)+" saved",1)):Re("",!0)]),d("div",Rv,[d("div",Fv,[en(d("input",{"onUpdate:modelValue":q[0]||(q[0]=O=>s.value=O),type:"search",placeholder:"Search saved answers...",class:"search-input"},null,512),[[sr,s.value]]),q[9]||(q[9]=d("svg",{class:"search-icon",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})],-1)),s.value?(X(),ne("button",{key:0,onClick:q[1]||(q[1]=O=>s.value=""),class:"search-clear",title:"Clear search"},q[8]||(q[8]=[d("svg",{viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))):Re("",!0)]),a.value.length>0?(X(),ir(nr,{key:0,onClick:B,variant:"secondary",size:"sm"},{default:St(()=>q[10]||(q[10]=[d("svg",{viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),Me(" Export ",-1)])),_:1,__:[10]})):Re("",!0)])]),L.value.length>0?(X(),ne("div",Tv,[d("button",{onClick:q[2]||(q[2]=O=>u.value=""),class:Ze(["tag-button",{"tag-button--active":u.value===""}])}," All ",2),(X(!0),ne(Pt,null,Ut(L.value,O=>(X(),ne("button",{key:O,onClick:S=>u.value=O,class:Ze(["tag-button",{"tag-button--active":u.value===O}])},le(O),11,qv))),128))])):Re("",!0),a.value.length===0?(X(),ne("div",Mv,q[11]||(q[11]=[d("div",{class:"empty-icon"},[d("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[d("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"})])],-1),d("h3",null,"No Saved Answers Yet",-1),d("p",null,'When you find helpful answers to your Bible questions, click the "Save" button to store them here for future reference.',-1)]))):P.value.length===0?(X(),ne("div",Ov,q[12]||(q[12]=[d("div",{class:"empty-icon"},[d("svg",{viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1),d("h3",null,"No Results Found",-1),d("p",null,"No saved answers match your search criteria. Try a different search term or clear the filters.",-1)]))):(X(),ne("div",Bv,[(X(!0),ne(Pt,null,Ut(P.value,O=>(X(),ne("div",{key:O.id,class:"answer-card"},[d("div",jv,[d("h3",Dv,le(O.question),1),d("div",$v,[d("button",{onClick:S=>$(O.id),class:Ze(["expand-button",{"expand-button--active":o.value.has(O.id)}])},q[13]||(q[13]=[d("svg",{viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]),10,Uv),d("button",{onClick:S=>re(O.id),class:"delete-button",title:"Delete saved answer"},q[14]||(q[14]=[d("svg",{viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9zM4 5a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM6 8a1 1 0 00-1 1v8a2 2 0 002 2h6a2 2 0 002-2V9a1 1 0 10-2 0v8H8V9a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)]),8,zv)])]),st(ba,{name:"card-expand"},{default:St(()=>[o.value.has(O.id)?(X(),ne("div",Hv,[O.conversation_thread&&O.conversation_thread.length>1?(X(),ir(Nv,{key:0,thread:O.conversation_thread},null,8,["thread"])):(X(),ne("div",Vv,[st(fs,{text:O.answer},null,8,["text"])])),d("div",Wv,[d("div",Gv,[q[15]||(q[15]=d("svg",{viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})],-1)),d("span",null,le(V(O.saved_at)),1)]),d("div",Jv,[q[16]||(q[16]=d("svg",{viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z","clip-rule":"evenodd"})],-1)),d("span",null,le(O.wordCount)+" words",1)]),O.conversation_thread&&O.conversation_thread.length>1?(X(),ne("div",Kv,[q[17]||(q[17]=d("svg",{viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{d:"M2 5a2 2 0 012-2h7a2 2 0 012 2v4a2 2 0 01-2 2H9l-3 3v-3H4a2 2 0 01-2-2V5z"}),d("path",{d:"M15 7v2a4 4 0 01-4 4H9.828l-1.766 1.767c.28.149.599.233.938.233h2l3 3v-3h2a2 2 0 002-2V9a2 2 0 00-2-2h-1z"})],-1)),d("span",null,le(O.conversation_thread.length)+" messages",1)])):Re("",!0)]),O.tags&&O.tags.length>0?(X(),ne("div",Yv,[q[18]||(q[18]=d("span",{class:"answer-tags-label"},"Metadata",-1)),(X(!0),ne(Pt,null,Ut(O.tags,S=>(X(),ne("span",{key:S,class:"answer-tag"},le(S),1))),128))])):Re("",!0),d("div",Qv,[st(nr,{onClick:S=>Z(O),variant:"secondary",size:"sm",class:Ze({"action-button--success":h.value===O.id})},{default:St(()=>[h.value!==O.id?(X(),ne("svg",Xv,q[19]||(q[19]=[d("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"},null,-1),d("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"},null,-1)]))):(X(),ne("svg",Zv,q[20]||(q[20]=[d("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)]))),Me(" "+le(h.value===O.id?"Copied!":"Copy"),1)]),_:2},1032,["onClick","class"]),st(nr,{onClick:S=>ge(O),variant:"secondary",size:"sm"},{default:St(()=>q[21]||(q[21]=[d("svg",{viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{d:"M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z"})],-1),Me(" Share ",-1)])),_:2,__:[21]},1032,["onClick"])])])):Re("",!0)]),_:2},1024)]))),128))])),c.value?(X(),ne("div",{key:4,class:"modal-overlay",onClick:ee},[d("div",{class:"modal modal--wide",onClick:q[6]||(q[6]=Vn(()=>{},["stop"]))},[d("div",{class:"modal-header"},[q[23]||(q[23]=d("h3",null,"Export Saved Answers",-1)),d("button",{onClick:ee,class:"modal-close"},q[22]||(q[22]=[d("svg",{viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))]),d("div",eg,[q[31]||(q[31]=d("p",null,"Select the answers you want to export and choose a format.",-1)),d("div",tg,[d("label",ng,[d("input",{type:"checkbox",checked:H.value,indeterminate:M.value,onChange:F},null,40,rg),d("span",null,le(H.value?"Deselect All":"Select All"),1)]),d("span",ag,le(f.value.size)+" of "+le(a.value.length)+" selected ",1)]),d("div",sg,[(X(!0),ne(Pt,null,Ut(a.value,O=>(X(),ne("label",{key:O.id,class:Ze(["export-answer-item",{"export-answer-item--selected":f.value.has(O.id)}])},[d("input",{type:"checkbox",checked:f.value.has(O.id),onChange:S=>ce(O.id)},null,40,ig),d("div",og,[d("span",lg,le(O.question),1),d("span",ug,le(V(O.saved_at))+" · "+le(O.wordCount)+" words ",1)])],2))),128))]),d("div",cg,[q[27]||(q[27]=d("h4",{class:"export-format-title"},"Export Format",-1)),d("div",dg,[d("label",{class:Ze(["export-format-option",{"export-format-option--active":m.value==="text"}])},[en(d("input",{type:"radio","onUpdate:modelValue":q[3]||(q[3]=O=>m.value=O),value:"text"},null,512),[[Pl,m.value]]),q[24]||(q[24]=d("div",{class:"export-format-content"},[d("svg",{viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z","clip-rule":"evenodd"})]),d("span",null,"Text (.txt)")],-1))],2),d("label",{class:Ze(["export-format-option",{"export-format-option--active":m.value==="json"}])},[en(d("input",{type:"radio","onUpdate:modelValue":q[4]||(q[4]=O=>m.value=O),value:"json"},null,512),[[Pl,m.value]]),q[25]||(q[25]=d("div",{class:"export-format-content"},[d("svg",{viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M12.316 3.051a1 1 0 01.633 1.265l-4 12a1 1 0 11-1.898-.632l4-12a1 1 0 011.265-.633zM5.707 6.293a1 1 0 010 1.414L3.414 10l2.293 2.293a1 1 0 11-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0zm8.586 0a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 11-1.414-1.414L16.586 10l-2.293-2.293a1 1 0 010-1.414z","clip-rule":"evenodd"})]),d("span",null,"JSON (.json)")],-1))],2),d("label",{class:Ze(["export-format-option",{"export-format-option--active":m.value==="pdf"}])},[en(d("input",{type:"radio","onUpdate:modelValue":q[5]||(q[5]=O=>m.value=O),value:"pdf"},null,512),[[Pl,m.value]]),q[26]||(q[26]=d("div",{class:"export-format-content"},[d("svg",{viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z","clip-rule":"evenodd"})]),d("span",null,"PDF (.pdf)")],-1))],2)])]),d("div",hg,[d("div",fg,[d("strong",null,le(f.value.size),1),q[28]||(q[28]=d("span",null,"Answers to Export",-1))]),d("div",pg,[d("strong",null,le(fe.value.totalWords),1),q[29]||(q[29]=d("span",null,"Total Words",-1))]),d("div",vg,[d("strong",null,le(fe.value.totalTags),1),q[30]||(q[30]=d("span",null,"Unique Tags",-1))])])]),d("div",gg,[st(nr,{onClick:ee,variant:"secondary"},{default:St(()=>q[32]||(q[32]=[Me(" Cancel ",-1)])),_:1,__:[32]}),st(nr,{onClick:I,variant:"primary",disabled:f.value.size===0},{default:St(()=>[Me(" Export "+le(f.value.size)+" Answer"+le(f.value.size!==1?"s":""),1)]),_:1},8,["disabled"])])])])):Re("",!0)]))}},bg=tn(mg,[["__scopeId","data-v-f02103a5"]]),Ts="http://localhost:8000",Hs={async getCrossReferences({book:t,chapter:e,verse:n}){if(!t||!e||!n)throw new Error("book, chapter, and verse are required");return(await Gt.get(`${Ts}/api/study/cross-references`,{params:{book:t,chapter:e,verse:n}})).data},async searchTopics(t,e=10){const n={limit:e};return t&&(n.keyword=t),(await Gt.get(`${Ts}/api/study/topics`,{params:n})).data},async listReadingPlans(){return(await Gt.get(`${Ts}/api/study/reading-plans`)).data||[]},async getReadingPlan(t,e={}){if(!t)throw new Error("slug is required");const n={};return e.days&&(n.days=e.days),e.startDate&&(n.start_date=e.startDate),(await Gt.get(`${Ts}/api/study/reading-plans/${t}`,{params:n})).data},async listDevotionalTemplates(){return(await Gt.get(`${Ts}/api/study/devotional-templates`)).data||[]},async generateDevotional(t){if(!t?.topic)throw new Error("topic is required");return(await Gt.post(`${Ts}/api/study/devotionals`,{topic:t.topic,template_slug:t.templateSlug||t.template_slug,passage:t.passage,plan_slug:t.planSlug||t.plan_slug,day:t.day})).data}},Ni="http://localhost:8000",cs={async listPlans(){return(await Gt.get(`${Ni}/api/user-reading-plans`)).data||[]},async startPlan(t){return(await Gt.post(`${Ni}/api/user-reading-plans`,{plan_slug:t.planSlug||t.plan_slug,start_date:t.startDate||t.start_date,nickname:t.nickname||null})).data},async getPlanDetail(t){if(!t)throw new Error("userPlanId is required");return(await Gt.get(`${Ni}/api/user-reading-plans/${t}`)).data},async updateDayCompletion(t,e,n){if(!t||!e)throw new Error("userPlanId and dayNumber are required");return(await Gt.patch(`${Ni}/api/user-reading-plans/${t}/days/${e}`,{is_complete:!!n})).data},async deletePlan(t){if(!t)throw new Error("userPlanId is required");await Gt.delete(`${Ni}/api/user-reading-plans/${t}`)}},yg={class:"study-panel"},wg={class:"study-card"},_g={class:"form-inline"},kg=["value"],xg={key:0,class:"error-text"},Sg={key:1,class:"muted-text"},Ag={key:2,class:"topic-grid"},Lg={class:"topic-summary"},Ng={class:"topic-references"},Cg={key:0,class:"reference-note"},Pg={class:"study-card__header"},Ig=["disabled"],Eg={key:0,class:"error-text"},Rg={key:0,class:"plan-group"},Fg={class:"plan-group__header"},Tg={class:"plan-carousel"},qg=["disabled"],Mg={class:"plan-track"},Og=["onClick"],Bg={class:"plan-card__header"},jg={class:"plan-pill"},Dg={key:0,class:"plan-progress"},$g=["disabled"],Ug={key:1,class:"muted-text"},zg={key:2,class:"plan-group"},Hg={class:"plan-carousel"},Vg=["disabled"],Wg={class:"plan-track"},Gg=["onClick"],Jg={class:"plan-card__header"},Kg={class:"plan-pill"},Yg={key:0,class:"plan-progress"},Qg=["disabled"],qs=3,Xg={__name:"StudyResources",setup(t){const e=Wr(),n=Gs(),r=Ae(typeof n.query.plan=="string"?n.query.plan:""),a=Ae(null),s=Ae([]),u=Ae(!!r.value);Nr({book:"John",chapter:3,verse:16}),Nr({loading:!1,error:"",data:null});const o=Ae([]),c=Ae(""),h=Nr({loading:!1,error:"",results:[]}),f=Ae([]),m=Ae([]),w=Nr({loading:!1,error:""}),v=Ae(0),y=Ae(0),k=je(()=>f.value.filter(S=>S?.metadata?.category!=="annual")),L=je(()=>f.value.filter(S=>S?.metadata?.category==="annual")),x=je(()=>{const S={};return m.value.forEach(j=>{const C=j.plan?.slug,J=j.total_days??0,te=j.completed_days??0;if(C&&J>0){const _e=Math.round(te/J*100);S[C]={percentComplete:_e,userPlanId:j.id}}}),S}),P=S=>!!x.value[S.slug],H=S=>x.value[S.slug]?.percentComplete??null,M=S=>S?.metadata?.category==="annual"?"Annual":"Featured",oe=(S,j)=>{if(!j){S.value=0;return}const C=Math.max(0,j-qs);S.value=Math.min(Math.max(S.value,0),C)};qt(k,S=>{oe(v,S.length)}),qt(L,S=>{oe(y,S.length)});const fe=(S,j)=>S.length?S.slice(j.value,j.value+qs):[],pe=je(()=>fe(k.value,v)),re=je(()=>fe(L.value,y)),$=je(()=>v.value>0),ce=je(()=>v.value+qs<k.value.length),F=je(()=>y.value>0),B=je(()=>y.value+qs<L.value.length),ee=()=>{$.value&&(v.value=Math.max(v.value-1,0))},Z=()=>{ce.value&&(v.value=Math.min(v.value+1,Math.max(0,k.value.length-qs)))},de=()=>{F.value&&(y.value=Math.max(y.value-1,0))},ge=()=>{B.value&&(y.value=Math.min(y.value+1,Math.max(0,L.value.length-qs)))},ke=S=>{S&&e.push({name:"reading-plan",params:{slug:S}})},ve=(S,j)=>{j&&(S?s.value.push({slug:j,element:S}):s.value=s.value.filter(C=>C.slug!==j))},Se=async()=>{if(await bn(),typeof window>"u")return;const S=r.value,C=s.value.find(te=>te.slug===S)?.element??a.value;if(!C)return;const J=C.offsetTop-48;window.scrollTo({top:Math.max(J,0),behavior:"smooth"})};qt(()=>n.query.plan,S=>{r.value=typeof S=="string"?S:"",r.value&&(u.value=!0)}),qt(()=>({slug:r.value,loading:w.loading}),async({slug:S,loading:j})=>{!S||j||!u.value||(u.value=!1,await Se())});const Ee=Ae([]),Le=Nr({topic:"",templateSlug:"classic",passage:"",planSlug:"",day:1});Nr({loading:!1,error:"",result:null});const I=()=>{if(!c.value){h.results=[];return}const S=o.value.find(j=>j.topic===c.value);h.results=S?[S]:[]},V=(S,j="study")=>{const C=typeof S=="string"?S.trim():"";if(!C)return;const te=Jo(C)?.reference||C,_e={ref:te};j&&(_e.source=j),Ti(te)&&(_e.fullChapter="1"),e.push({name:"reading",query:_e})},R=async()=>{h.loading=!0,h.error="";try{const S=await Hs.searchTopics(void 0,50);if(o.value=S.results||[],!o.value.length){c.value="",h.results=[];return}(!c.value||!o.value.some(j=>j.topic===c.value))&&(c.value=o.value[0].topic),I()}catch(S){h.error=S?.response?.data?.detail||"Unable to load topics",o.value=[],h.results=[]}finally{h.loading=!1}};qt(c,()=>{o.value.length&&I()});const q=async()=>{w.loading=!0,w.error="";try{f.value=await Hs.listReadingPlans(),v.value=0,y.value=0}catch(S){w.error=S?.response?.data?.detail||"Unable to load reading plans"}finally{w.loading=!1}},O=async()=>{try{Ee.value=await Hs.listDevotionalTemplates(),!Ee.value.find(S=>S.slug===Le.templateSlug)&&Ee.value.length>0&&(Le.templateSlug=Ee.value[0].slug)}catch(S){console.error("Unable to load templates",S)}};return Vr(async()=>{await Promise.all([q(),O(),R()]);let S=null;try{S=await gr.getCurrentUser()}catch{S=null}if(S)try{m.value=await cs.listPlans()}catch{m.value=[]}else m.value=[]}),(S,j)=>(X(),ne("div",yg,[d("section",wg,[j[3]||(j[3]=d("header",{class:"study-card__header"},[d("div",null,[d("h3",null,"Bible Topic Explorer"),d("p",null," Browse curated discipleship themes—focused spiritual growth topics like faith, hope, or generosity that highlight what following Jesus looks like in everyday life. Each topic includes a short explanation plus key passages so you can dig deeper and better understand God's word. Pick a theme from the dropdown, then click any reference to jump straight into Reading View for the full context. ")])],-1)),d("div",_g,[en(d("select",{"onUpdate:modelValue":j[0]||(j[0]=C=>c.value=C),required:""},[j[2]||(j[2]=d("option",{value:"",disabled:""},"Select a topic",-1)),(X(!0),ne(Pt,null,Ut(o.value,C=>(X(),ne("option",{key:C.topic,value:C.topic},le(C.topic),9,kg))),128))],512),[[$o,c.value]])]),h.error?(X(),ne("p",xg,le(h.error),1)):h.results.length?(X(),ne("div",Ag,[(X(!0),ne(Pt,null,Ut(h.results,C=>(X(),ne("article",{key:C.topic,class:"topic-card"},[d("h4",null,le(C.topic),1),d("p",Lg,le(C.summary),1),d("ul",Ng,[(X(!0),ne(Pt,null,Ut(C.references,J=>(X(),ne("li",{key:J.passage+(J.note||""),class:"reference-row"},[st(fs,{text:J.passage,"wrapper-class":"reference-link-wrapper","text-class":"reference-link-text","read-link-text":"Open in Reading View →","enable-reference-click":"","navigation-source":"study",onReferenceClick:j[1]||(j[1]=te=>V(te,"study"))},null,8,["text"]),J.note?(X(),ne("span",Cg," – "+le(J.note),1)):Re("",!0)]))),128))])]))),128))])):(X(),ne("p",Sg,"Select a topic to view its summary and references."))]),d("section",{class:"study-card",ref_key:"readingPlanSection",ref:a},[d("header",Pg,[j[4]||(j[4]=d("div",null,[d("h3",null,"Reading Plans"),d("p",null,"Browse curated multi-day plans or year-long journeys. Selecting a card opens the dedicated plan page with full scheduling tools. Open any plan to adjust days and set a start date.")],-1)),d("button",{type:"button",class:"link-button",disabled:w.loading,onClick:q},le(w.loading?"Refreshing…":"Reload"),9,Ig)]),w.error?(X(),ne("p",Eg,le(w.error),1)):(X(),ne(Pt,{key:1},[k.value.length?(X(),ne("div",Rg,[d("div",Fg,[j[5]||(j[5]=d("h4",null,"Featured Plans",-1)),d("span",null,le(k.value.length)+" options",1)]),d("div",Tg,[d("button",{type:"button",class:"carousel-arrow",onClick:ee,disabled:!$.value,"aria-label":"View previous featured reading plan"}," ‹ ",8,qg),d("div",Mg,[(X(!0),ne(Pt,null,Ut(pe.value,C=>(X(),ne("article",{key:C.slug,class:Ze(["plan-card","plan-card--accent",{"plan-card--active":C.slug===r.value,"plan-card--tracked":P(C)}]),ref_for:!0,ref:J=>ve(J,C.slug),onClick:J=>ke(C.slug)},[d("div",Bg,[d("h4",null,le(C.name),1),d("span",null,le(C.duration_days)+" days",1)]),d("p",null,le(C.description),1),d("span",jg,le(M(C)),1),P(C)?(X(),ne("span",Dg,[j[6]||(j[6]=d("br",null,null,-1)),Me("Tracked: "+le(H(C))+"% complete",1)])):Re("",!0)],10,Og))),128))]),d("button",{type:"button",class:"carousel-arrow",onClick:Z,disabled:!ce.value,"aria-label":"View next featured reading plan"}," › ",8,$g)])])):w.loading?Re("",!0):(X(),ne("p",Ug,"No featured plans available yet.")),L.value.length?(X(),ne("div",zg,[j[8]||(j[8]=d("div",{class:"plan-group__header"},[d("h4",null,"Annual Journeys"),d("span",null,"Year-long coverage")],-1)),d("div",Hg,[d("button",{type:"button",class:"carousel-arrow",onClick:de,disabled:!F.value,"aria-label":"View previous annual reading plan"}," ‹ ",8,Vg),d("div",Wg,[(X(!0),ne(Pt,null,Ut(re.value,C=>(X(),ne("article",{key:C.slug,class:Ze(["plan-card","plan-card--accent",{"plan-card--active":C.slug===r.value,"plan-card--tracked":P(C)}]),ref_for:!0,ref:J=>ve(J,C.slug),onClick:J=>ke(C.slug)},[d("div",Jg,[d("h4",null,le(C.name),1),d("span",null,le(C.duration_days)+" days",1)]),d("p",null,le(C.description),1),d("span",Kg,le(M(C)),1),P(C)?(X(),ne("span",Yg,[j[7]||(j[7]=d("br",null,null,-1)),Me("Tracked: "+le(H(C))+"% complete",1)])):Re("",!0)],10,Gg))),128))]),d("button",{type:"button",class:"carousel-arrow",onClick:ge,disabled:!B.value,"aria-label":"View next annual reading plan"}," › ",8,Qg)])])):Re("",!0)],64))],512)]))}},Zg=tn(Xg,[["__scopeId","data-v-1a82d45c"]]);function em(){const t=Ae(""),e=Ae(""),n=Ae(null),r=Ae(null),a=Ae(!1),s=Ae(!1),u=Ae(""),o=Ae([]),c=Ae(""),h=Ae(!1);return{question:t,answer:e,questionId:n,rootQuestionId:r,isBiblicalAnswer:a,loading:s,error:u,conversationHistory:o,streamStatus:c,isStreaming:h,askQuestion:async(y=t.value,k=!0)=>{if(!y?.trim()){u.value="Please enter a question";return}s.value=!0,e.value="",a.value=!1,u.value="",c.value="",h.value=k;try{if(k)await Kt.streamQuestion(y,async L=>{switch(L.type){case"cached":e.value=L.answer,n.value=L.question_id,r.value=L.question_id,a.value=!!L.is_biblical,c.value="",o.value=[{role:"user",content:y},{role:"assistant",content:L.answer}];break;case"status":c.value=L.message;break;case"content":e.value+=L.text,await bn();break;case"done":n.value=L.question_id,r.value=L.question_id,a.value=!!L.is_biblical,c.value="",o.value=[{role:"user",content:y},{role:"assistant",content:e.value}];break;case"error":u.value=L.message,c.value="";break}});else{const L=await Kt.askQuestion(y);e.value=L.answer,n.value=L.question_id,r.value=L.question_id,a.value=!!L.is_biblical,o.value=[{role:"user",content:y},{role:"assistant",content:L.answer}]}}catch(L){const x=L?.message==="Network Error"?"The request took too long. Please try again.":L?.message||"Unable to process your question right now.";u.value=x,console.error("Bible Q&A Error:",L)}finally{s.value=!1,h.value=!1,c.value=""}},askFollowUpQuestion:async(y,k=!0)=>{if(!y?.trim()){u.value="Please enter a follow-up question";return}s.value=!0,u.value="",c.value="",h.value=k,e.value="";try{if(k)await Kt.streamFollowUpQuestion({question:y,conversation_history:o.value,parent_question_id:r.value},async L=>{switch(L.type){case"cached":e.value=L.answer,n.value=L.question_id,a.value=!!L.is_biblical,c.value="",o.value.push({role:"user",content:y},{role:"assistant",content:L.answer});break;case"status":c.value=L.message;break;case"content":e.value+=L.text,await bn();break;case"done":n.value=L.question_id,a.value=!!L.is_biblical,c.value="",o.value.push({role:"user",content:y},{role:"assistant",content:e.value});break;case"error":u.value=L.message,c.value="";break}});else{const L=await Kt.askFollowUpQuestion({question:y,conversation_history:o.value,parent_question_id:r.value});o.value.push({role:"user",content:y},{role:"assistant",content:L.answer}),e.value=L.answer,n.value=L.question_id,a.value=!!L.is_biblical}}catch(L){const x=L?.message==="Network Error"?"The follow-up request timed out. Please try again in a moment.":L?.message||"Unable to process your follow-up question right now.";u.value=x,console.error("Follow-up Question Error:",L)}finally{s.value=!1,h.value=!1,c.value=""}},clearAll:()=>{t.value="",e.value="",n.value=null,r.value=null,a.value=!1,u.value="",s.value=!1,o.value=[]},clearError:()=>{u.value=""}}}const tm="http://localhost:8000",tu=`${tm}/api/users/me/recent-questions`,Ro={async fetch(){try{return(await Gt.get(tu,{}))?.data?.recent_questions??[]}catch(t){return console.error("Failed to load recent questions:",t),[]}},async add(t,e=!1){if(!e)return[];const n=typeof t=="string"?t.trim():"";if(!n)return this.fetch();try{return(await Gt.post(tu,{question:n}))?.data?.recent_questions??[]}catch(r){return console.error("Failed to record recent question:",r),[]}},async remove(t){if(!t)return this.fetch();try{return(await Gt.delete(`${tu}/${t}`,{}))?.data?.recent_questions??[]}catch(e){throw console.error("Failed to delete recent question:",e),e}}},Do="bible_qa_pending_saved_answer",nu="bible_qa_return_to_answer",Nu="/assets/logo_cross-BvQkjCO9.png",nm={class:"navbar-simple"},rm={class:"navbar-simple-row"},am=["src"],sm={class:"navbar-simple-links"},im={class:"navbar-simple-auth"},om={__name:"Navbar",props:{activeTab:{type:String,default:null}},setup(t){const e=t,n=Wr(),r=Gs(),{currentUser:a,logout:s}=Gr(),u=je(()=>e.activeTab?e.activeTab:r.path==="/adults"?r.query.tab||"ask":null),o=async()=>{await s(),n.push("/")};return(c,h)=>{const f=ya("router-link");return X(),ne("nav",nm,[d("div",rm,[st(f,{to:"/",class:"navbar-simple-logo-link"},{default:St(()=>[d("img",{src:tt(Nu),alt:"Word of Life Answers",class:"navbar-simple-logo"},null,8,am)]),_:1}),d("div",sm,[st(f,{to:"/",class:Ze(["navbar-simple-link",{active:c.$route.path==="/"&&!c.$route.path.includes("/adults")&&!c.$route.path.includes("/kids")}])},{default:St(()=>h[0]||(h[0]=[Me("Home",-1)])),_:1,__:[0]},8,["class"]),st(f,{to:"/adults",class:Ze(["navbar-simple-link",{active:u.value==="ask"}])},{default:St(()=>h[1]||(h[1]=[Me("Ask Questions",-1)])),_:1,__:[1]},8,["class"]),st(f,{to:"/adults?tab=saved",class:Ze(["navbar-simple-link",{active:u.value==="saved"}])},{default:St(()=>h[2]||(h[2]=[Me("Saved Answers",-1)])),_:1,__:[2]},8,["class"]),st(f,{to:"/adults?tab=study",class:Ze(["navbar-simple-link",{active:u.value==="study"}])},{default:St(()=>h[3]||(h[3]=[Me("Bible Study",-1)])),_:1,__:[3]},8,["class"]),st(f,{to:"/kids",class:Ze(["navbar-simple-link",{active:c.$route.path==="/kids"}])},{default:St(()=>h[4]||(h[4]=[Me("Kids",-1)])),_:1,__:[4]},8,["class"]),tt(a)?.is_admin?(X(),ir(f,{key:0,to:"/admin/dashboard",class:Ze(["navbar-simple-link",{active:c.$route.path.includes("/admin")}])},{default:St(()=>h[5]||(h[5]=[Me("Admin",-1)])),_:1,__:[5]},8,["class"])):Re("",!0)]),d("div",im,[tt(a)?(X(),ne("button",{key:0,onClick:o,class:"navbar-simple-auth-btn"},"Logout")):(X(),ir(f,{key:1,to:"/login",class:"navbar-simple-auth-btn"},{default:St(()=>h[6]||(h[6]=[Me("Login",-1)])),_:1,__:[6]}))])])])}}},rh=tn(om,[["__scopeId","data-v-5d7bf846"]]),lm={class:"app"},um={class:"app-container"},cm={class:"app-header animate-fade-in"},dm={class:"header-content"},hm={class:"logo-wrapper"},fm={class:"logo-text"},pm={class:"app-title"},vm={class:"app-tagline"},gm={class:"app-subtitle"},mm={class:"app-main"},bm={key:0,class:"study-card tracked-plans-card"},ym={class:"tracked-plans-list"},wm=["onClick"],_m={class:"tracked-plan-progress"},km={key:1,class:"content-wrapper animate-slide-in"},xm={key:0,class:"guest-message"},Sm={class:"guest-actions"},Wd=120,Am={__name:"MainApp",setup(t){const e=(se,z)=>{z&&n.push({name:"reading-plan",params:{slug:z}})},n=Wr();n.currentRoute;const{currentUser:r}=Gr(),a=Ae([]),s=async()=>{if(r.value)try{a.value=await cs.listPlans()}catch(se){console.error("Failed to load tracked plans:",se),a.value=[]}else a.value=[]},{question:u,answer:o,questionId:c,rootQuestionId:h,isBiblicalAnswer:f,conversationHistory:m,loading:w,error:v,streamStatus:y,isStreaming:k,askQuestion:L,askFollowUpQuestion:x,clearAll:P,clearError:H}=em(),M=Ae("ask"),oe=Ae(null),fe=je(()=>{const se={ask:{title:"Answers to your Bible Questions",tagline:"Scripture • Wisdom • Truth",subtitle:"Discover insights rooted in God's Word with the help of AI-guided Scripture study."},saved:{title:"Your Saved Answers",tagline:"Reference • Reflect • Remember",subtitle:"Review, copy, export or share your saved Bible answers for easy reference anytime."},study:{title:"Bible Study Resources",tagline:"Explore • Learn • Grow",subtitle:"Discover Bible reading plans and explore topics to deepen your understanding of Scripture."}};return se[M.value]||se.ask}),pe=Ae(null),re=Ae(null),$=Ae(null),ce=Ae(null),F=Ae(""),B=Ae(""),ee=Ae(!1),Z=Ae(0),de=Ae([]);Ae(!1),Ae(!1);const ge=se=>se?typeof Element<"u"&&se instanceof Element?se:typeof Element<"u"&&se.$el instanceof Element?se.$el:null:null,ke=()=>{if(typeof window>"u")return;const se=typeof u.value=="string"?u.value.trim():"",z=typeof o.value=="string"?o.value.trim():"";if(!(!se||!z))try{const Y={question:u.value,answer:o.value,questionId:c.value,rootQuestionId:h.value,conversationHistory:Array.isArray(m.value)?JSON.parse(JSON.stringify(m.value)):[]};sessionStorage.setItem(nu,JSON.stringify(Y))}catch(Y){console.error("Failed to persist answer before Reading View:",Y)}},ve=()=>{P(),F.value="",B.value="",ee.value=!1},Se=se=>Array.isArray(se)?se.map(z=>{if(typeof z=="string"){const Y=z.trim();return Y?{id:null,question:Y,asked_at:null}:null}if(z&&typeof z=="object"){const Y=typeof z.question=="string"?z.question.trim():"";return Y?{...z,question:Y}:null}return null}).filter(Boolean):[],Ee=async()=>{if(!r.value){Z.value=0;return}try{const se=await ma.getAll();Z.value=se.length}catch(se){console.error("Error updating saved count:",se),Z.value=0}},Le=async()=>{if(!r.value){de.value=[];return}try{const se=await Ro.fetch();de.value=Se(se)}catch(se){console.error("Error loading recent questions:",se),de.value=[]}},I=async se=>{if(!r.value)return;const z=typeof se=="string"?se.trim():"";if(z)try{const Y=await Ro.add(z,!!r.value);if(Array.isArray(Y))de.value=Se(Y);else{const ae=await Ro.fetch();de.value=Se(ae)}}catch(Y){console.error("Error refreshing recent questions:",Y)}},V=async se=>{const z=typeof se=="string"?se.trim():"";z&&(F.value=z,B.value="",u.value=z,o.value="",c.value=null,h.value=null,m.value=[],ee.value=!1,M.value!=="ask"&&(M.value="ask",await bn()),ee.value=!0,await bn(),await L(z),B.value=o.value,r.value&&!v.value&&o.value&&f.value&&await I(z))},R=()=>{if(typeof window>"u")return;const se=pe.value;if(!se)return;const ae=(se.querySelector(".form-title")??se).getBoundingClientRect().top+window.scrollY-Wd,Oe=window.matchMedia("(prefers-reduced-motion: reduce)").matches;window.scrollTo({top:Math.max(ae,0),behavior:Oe?"auto":"smooth"})},q=(se=0)=>{if(typeof window>"u")return;const z=ge(re.value);if(!z){se<6&&requestAnimationFrame(()=>q(se+1));return}const Y=z.getBoundingClientRect().top+window.scrollY-Wd,ae=window.matchMedia("(prefers-reduced-motion: reduce)").matches;window.scrollTo({top:Math.max(Y,0),behavior:ae?"auto":"smooth"})},O=()=>{typeof window>"u"||requestAnimationFrame(()=>{requestAnimationFrame(()=>{q()})})},S=async()=>{await Ee(),oe.value&&oe.value.refresh()},j=()=>{Ee()},C=async se=>{const z=typeof se=="string"?se.trim():"";z&&(B.value="",o.value="",ee.value=!0,await bn(),await x(z),B.value=o.value)},J=()=>{ke()},te=()=>{ve(),u.value="",o.value="",F.value="",B.value="",c.value=null},_e=async se=>{if(!se||!se.id)return;const z=se.question?`Remove "${se.question}" from your recent questions?`:"Remove this recent question from your list?";if(!(typeof window<"u")||window.confirm(z))try{const ae=await Ro.remove(se.id);Array.isArray(ae)?de.value=Se(ae):de.value=de.value.filter(Oe=>Oe.id!==se.id)}catch(ae){console.error("Error deleting recent question:",ae)}},be=se=>{if(typeof window<"u")try{const z={question:se?.question||u.value||"",answer:se?.answer||o.value||"",questionId:se?.questionId??c.value,rootQuestionId:h.value,conversationHistory:Array.isArray(m.value)?JSON.parse(JSON.stringify(m.value)):[]};z.question&&z.answer&&sessionStorage.setItem(Do,JSON.stringify(z))}catch(z){console.error("Failed to persist pending answer before login:",z)}n.push({name:"login",query:{redirect:"pending-save"}})},Q=async()=>{if(typeof window>"u")return!1;const se=sessionStorage.getItem(Do);if(!se)return!1;try{const z=JSON.parse(se);return!z?.question||!z?.answer?!1:(u.value=z.question,o.value=z.answer,c.value=z.questionId??null,z.rootQuestionId&&(h.value=z.rootQuestionId),Array.isArray(z.conversationHistory)&&z.conversationHistory.length>0?m.value=z.conversationHistory:m.value=[{role:"user",content:z.question},{role:"assistant",content:z.answer}],F.value=z.question,B.value=z.answer,M.value="ask",ee.value=!!z.answer,await bn(),R(),!0)}catch(z){return console.error("Failed to restore pending answer after login:",z),!1}finally{sessionStorage.removeItem(Do)}},_=async()=>{if(typeof window>"u")return!1;const se=sessionStorage.getItem(nu);if(!se)return!1;try{const z=JSON.parse(se);return!z?.question||!z?.answer?!1:(u.value=z.question,o.value=z.answer,c.value=z.questionId??null,h.value=z.rootQuestionId??null,Array.isArray(z.conversationHistory)&&z.conversationHistory.length>0?m.value=z.conversationHistory:m.value=[{role:"user",content:z.question},{role:"assistant",content:z.answer}],F.value=z.question,B.value=z.answer,M.value="ask",ee.value=!0,await bn(),O(),!0)}catch(z){return console.error("Failed to restore answer after Reading View:",z),!1}finally{sessionStorage.removeItem(nu)}};return qt(r,()=>{Le(),s()},{immediate:!0}),qt(M,se=>{se!=="ask"&&ve()}),Vr(async()=>{const se=n.currentRoute.value;if(typeof window<"u"&&se.query.restore!=="answer"&&window.scrollTo({top:0,left:0,behavior:"auto"}),await Ee(),await s(),se.query.restored==="pending"&&await Q()){n.replace({name:"main"});return}if(se.query.restore==="answer"&&await _()){const Y={...se.query};delete Y.restore,Y.tab||(Y.tab="ask"),n.replace({name:"main",query:Y});return}(se.query.tab==="saved"||se.query.tab==="study")&&(M.value=se.query.tab)}),qt(()=>n.currentRoute.value.query.tab,se=>{se==="saved"||se==="study"?M.value=se:(se===void 0||se==="ask")&&(M.value="ask")}),(se,z)=>{const Y=ya("router-link");return X(),ne("div",lm,[st(rh,{activeTab:M.value},null,8,["activeTab"]),z[8]||(z[8]=ar('<div class="app-background" data-v-d891bfdd><div class="bg-gradient" data-v-d891bfdd></div><div class="bg-pattern" data-v-d891bfdd></div><div class="floating-elements" data-v-d891bfdd><div class="floating-element floating-element--1" data-v-d891bfdd></div><div class="floating-element floating-element--2" data-v-d891bfdd></div><div class="floating-element floating-element--3" data-v-d891bfdd></div></div></div>',1)),d("div",um,[d("header",cm,[d("div",dm,[st(ba,{name:"header-fade",mode:"out-in"},{default:St(()=>[(X(),ne("div",{class:"logo-section",key:M.value},[d("div",hm,[d("div",fm,[d("h2",pm,le(fe.value.title),1),d("div",vm,le(fe.value.tagline),1)])]),d("p",gm,le(fe.value.subtitle),1)]))]),_:1})])]),d("main",mm,[tt(r)&&a.value.length?(X(),ne("section",bm,[z[1]||(z[1]=d("header",{class:"study-card__header"},[d("div",null,[d("h3",null,"Your Tracked Bible Reading Plans"),d("p",null,"Continue your progress or start a new day in any plan below.")])],-1)),d("ul",ym,[(X(!0),ne(Pt,null,Ut(a.value,ae=>(X(),ne("li",{key:ae.id,class:"tracked-plan-item"},[d("button",{class:"tracked-plan-info tracked-plan-link",onClick:Oe=>e(ae.plan.id,ae.plan.slug)},[d("strong",null,le(ae.plan.name),1),d("span",_m,le(Math.round(ae.completed_days/ae.total_days*100))+"% complete",1)],8,wm)]))),128))])])):Re("",!0),M.value==="ask"?(X(),ne("div",km,[d("div",{ref_key:"questionSectionRef",ref:pe,class:"question-section"},[st(Rp,{question:tt(u),"onUpdate:question":z[0]||(z[0]=ae=>Qd(u)?u.value=ae:null),loading:tt(w),"recent-questions":de.value,"show-recent-questions":!!tt(r),onSubmit:V,onClear:te,onRemoveRecent:_e},null,8,["question","loading","recent-questions","show-recent-questions"])],512),ee.value?(X(),ne("div",{key:0,ref_key:"answerSectionRef",ref:re,class:"answer-section"},[st(w2,{answer:tt(o),question:tt(u),"question-id":tt(c),loading:tt(w),"stream-status":tt(y),"is-streaming":tt(k),onAnswerSaved:S,onFollowUpQuestion:C,onLoginRequired:be,onReadingView:J},null,8,["answer","question","question-id","loading","stream-status","is-streaming"])],512)):Re("",!0),st(N2,{error:tt(v),onDismiss:tt(H),class:"error-section"},null,8,["error","onDismiss"])])):M.value==="saved"?(X(),ne("div",{key:2,ref_key:"savedSectionRef",ref:$,class:"saved-content animate-fade-in"},[tt(r)?(X(),ir(bg,{key:1,ref_key:"savedAnswersRef",ref:oe,onUpdate:j},null,512)):(X(),ne("div",xm,[z[4]||(z[4]=d("div",{class:"guest-message-icon"},"🔒",-1)),z[5]||(z[5]=d("h3",null,"Sign in to Save Answers",-1)),z[6]||(z[6]=d("p",null,"Create an account or log in to save your favorite Bible answers and access them anytime.",-1)),d("div",Sm,[st(Y,{to:{name:"login",query:{redirect:"saved"}},class:"btn-primary"},{default:St(()=>z[2]||(z[2]=[Me("Log In",-1)])),_:1,__:[2]}),st(Y,{to:{name:"register",query:{redirect:"saved"}},class:"btn-secondary"},{default:St(()=>z[3]||(z[3]=[Me("Create Account",-1)])),_:1,__:[3]})])]))],512)):M.value==="study"?(X(),ne("div",{key:3,ref_key:"studySectionRef",ref:ce,class:"study-content animate-fade-in"},[st(Zg)],512)):Re("",!0)]),z[7]||(z[7]=ar('<footer class="app-footer" data-v-d891bfdd><div class="footer-content" data-v-d891bfdd><div class="footer-main" data-v-d891bfdd><div class="footer-disclaimer" data-v-d891bfdd><div class="disclaimer-icon" data-v-d891bfdd><svg viewBox="0 0 20 20" fill="currentColor" data-v-d891bfdd><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" data-v-d891bfdd></path></svg></div><p data-v-d891bfdd><strong data-v-d891bfdd>Important:</strong> Always verify answers with Scripture and consult trusted biblical sources, pastors, or theologians for important spiritual matters. </p></div><p class="footer-description" data-v-d891bfdd> Powered by advanced AI technology to provide thoughtful, scripture-based answers to your biblical questions. </p></div></div></footer>',1))])])}}},Lm=tn(Am,[["__scopeId","data-v-d891bfdd"]]),Nm={class:"kids-question-form animate-bounce-in"},Cm={class:"form-header"},Pm={class:"mascot-section"},Im={class:"speech-bubble"},Em={class:"bubble-content"},Rm={class:"question-input-wrapper"},Fm={class:"textarea-container"},Tm=["placeholder","disabled"],qm=["disabled"],Mm={class:"speech-emoji"},Om={class:"kids-char-count"},Bm={key:0,class:"speech-status"},jm={key:1,class:"kids-speech-error"},Dm={class:"form-actions"},$m=["disabled"],Um={key:0,class:"submit-content"},zm={key:1,class:"loading-content"},Hm=["disabled"],Vm={key:0,class:"kids-loading-section"},Wm={key:0,class:"kids-suggestions"},Gm={class:"suggestions-grid"},Jm=["onClick"],Km={class:"suggestion-emoji"},Ym={__name:"KidsQuestionForm",props:{question:{type:String,default:""},loading:{type:Boolean,default:!1}},emits:["update:question","submit","clear"],setup(t,{emit:e}){const n=t,r=e,a=Ae(n.question),s=Ae(""),u=Ae(0),o=Ae(0),{isListening:c,isSupported:h,transcript:f,error:m,startListening:w,stopListening:v,clearTranscript:y}=d1(),k=["Hi there! What would you like to know? 🌟","Ask me anything about God and the Bible! 📖","I love answering questions! What's yours? ❤️","Ready to learn something amazing? 🚀","God loves curious kids like you! 💕"],L=["How much does God love me? 💖","Who is baby Jesus? 👶","Why did God make animals? 🦁","What is prayer? 🙏","Who is my guardian angel? 👼","Why is the sky blue? 🌤️"],x=["How much does God love me?","Who is baby Jesus?","Why did God make animals?","What is prayer?","Who is my guardian angel?","What happens in heaven?","Why should I be kind?","Who was Noah?"],P=["🌟","💖","🦋","🌈","✨","🎈","🌸","🦁"],H=Ae(k[0]),M=Ae(L[0]),oe=Ae({"char-count":!0,"char-count--warning":!1,"char-count--danger":!1});let fe,pe;Vr(()=>{fe=setInterval(()=>{u.value=(u.value+1)%k.length,H.value=k[u.value]},4e3),pe=setInterval(()=>{o.value=(o.value+1)%L.length,M.value=L[o.value]},3e3)}),Yd(()=>{fe&&clearInterval(fe),pe&&clearInterval(pe)}),qt(f,de=>{de&&(a.value=de,y())}),qt(m,de=>{de&&(s.value=Z(de))}),qt(()=>n.question,de=>{a.value=de}),qt(a,de=>{r("update:question",de)}),qt(a,de=>{const ke=de.length/300*100;oe.value={"char-count":!0,"char-count--warning":ke>=80&&ke<100,"char-count--danger":ke>=100}});const re=()=>{!a.value.trim()||n.loading||r("submit",a.value)},$=de=>{a.value=de.target.value},ce=()=>{a.value="",r("clear")},F=de=>{a.value=de},B=()=>{c.value?v():(s.value="",w())},ee=()=>P[Math.floor(Math.random()*P.length)],Z=de=>{const ge=de.toLowerCase();return ge.includes("not-allowed")||ge.includes("denied")?"I need permission to use your microphone! Ask a grown-up to help! 🎤":ge.includes("no-speech")?"I didn't hear anything! Try speaking a little louder! 📢":ge.includes("network")?"Oops! Check your internet connection! 🌐":"Something went wrong, but that's okay! Try again! 😊"};return(de,ge)=>(X(),ne("div",Nm,[d("div",Cm,[d("div",Pm,[ge[2]||(ge[2]=ar('<div class="mascot" data-v-a5043210><div class="mascot-character" data-v-a5043210>🦁</div><div class="mascot-sparkles" data-v-a5043210><span class="sparkle" data-v-a5043210>✨</span><span class="sparkle" data-v-a5043210>⭐</span><span class="sparkle" data-v-a5043210>💫</span></div></div>',1)),d("div",Im,[d("div",Em,le(H.value),1)])]),ge[3]||(ge[3]=d("div",{class:"form-title-section"},[d("h2",{class:"kids-form-title"},"Ask Me Anything! 🌟"),d("p",{class:"kids-form-subtitle"},"What do you want to know about God and the Bible?")],-1))]),d("form",{onSubmit:Vn(re,["prevent"]),class:"kids-form"},[d("div",Rm,[ge[6]||(ge[6]=d("label",{class:"kids-label"},[d("span",{class:"label-emoji"},"💭"),Me(" Your Question ")],-1)),d("div",Fm,[en(d("textarea",{"onUpdate:modelValue":ge[0]||(ge[0]=ke=>a.value=ke),placeholder:M.value,disabled:t.loading,maxlength:"300",rows:"4",class:"kids-textarea",onInput:$},null,40,Tm),[[sr,a.value]]),tt(h)?(X(),ne("button",{key:0,onClick:B,disabled:t.loading,type:"button",class:Ze(["kids-speech-button",{"kids-speech-button--listening":tt(c)}])},[d("span",Mm,le(tt(c)?"🔴":"🎤"),1)],10,qm)):Re("",!0),d("div",Om,[d("span",{class:Ze(oe.value)},le(a.value.length)+"/300",3)])]),tt(c)?(X(),ne("div",Bm,ge[4]||(ge[4]=[ar('<div class="listening-animation" data-v-a5043210><span class="music-note" data-v-a5043210>🎵</span><span class="music-note" data-v-a5043210>🎶</span><span class="music-note" data-v-a5043210>🎵</span></div><span class="listening-text" data-v-a5043210>I&#39;m listening... speak now! 👂</span>',2)]))):Re("",!0),s.value?(X(),ne("div",jm,[ge[5]||(ge[5]=d("span",{class:"error-emoji"},"😅",-1)),d("span",null,le(s.value),1),d("button",{onClick:ge[1]||(ge[1]=ke=>s.value=""),class:"error-dismiss"},"❌")])):Re("",!0)]),d("div",Dm,[d("button",{type:"submit",disabled:t.loading||!a.value.trim(),class:Ze(["kids-submit-button",{"kids-submit-button--loading":t.loading}])},[t.loading?(X(),ne("span",zm,ge[8]||(ge[8]=[d("span",{class:"loading-emoji"},"⏳",-1),Me(" Thinking... ",-1)]))):(X(),ne("span",Um,ge[7]||(ge[7]=[d("span",{class:"submit-emoji"},"🚀",-1),Me(" Ask Question! ",-1)])))],10,$m),a.value.trim()?(X(),ne("button",{key:0,type:"button",onClick:ce,disabled:t.loading,class:"kids-clear-button"},ge[9]||(ge[9]=[d("span",{class:"clear-emoji"},"🗑️",-1),Me(" Clear ",-1)]),8,Hm)):Re("",!0)]),t.loading?(X(),ne("div",Vm,ge[10]||(ge[10]=[d("div",{class:"loading-character"},"🔍",-1),d("div",{class:"loading-text"},[d("p",{class:"loading-primary"},"Looking through the Bible for you! 📖"),d("p",{class:"loading-secondary"},"Finding the perfect answer... ✨")],-1)]))):Re("",!0)],32),!a.value.trim()&&!t.loading?(X(),ne("div",Wm,[ge[11]||(ge[11]=d("h3",{class:"suggestions-title"},[d("span",{class:"title-emoji"},"💡"),Me(" Try asking about these! ")],-1)),d("div",Gm,[(X(),ne(Pt,null,Ut(x,ke=>d("button",{key:ke,onClick:ve=>F(ke),class:"kids-suggestion-button",type:"button"},[d("span",Km,le(ee()),1),Me(" "+le(ke),1)],8,Jm)),64))])])):Re("",!0)]))}},Qm=tn(Ym,[["__scopeId","data-v-a5043210"]]),Xm={key:0,class:"kids-answer-display animate-bounce-in"},Zm={class:"answer-header"},eb={class:"header-character"},tb={class:"character-icon"},nb={class:"header-content"},rb={class:"answer-title"},ab={key:0,class:"answer-badge"},sb={class:"answer-content"},ib={key:0,class:"stream-status"},ob={class:"answer-text-wrapper"},lb={key:0,class:"question-prompt"},ub={class:"question-prompt__text"},cb={key:2,class:"kids-loading-inline"},db={key:3,class:"typing-indicator"},hb={key:4,class:"reading-info"},fb={class:"word-info"},pb={key:0,class:"answer-actions"},vb={class:"action-buttons"},gb={class:"action-emoji"},mb=["disabled"],bb={class:"action-emoji"},yb={class:"answer-time"},wb={key:0,class:"followup-section"},_b={class:"followup-input-group"},kb=["disabled"],xb=["disabled"],Sb={key:0,class:"followup-button-content"},Ab={key:1,class:"followup-button-content"},Lb={key:1,class:"kids-feedback"},Nb={class:"feedback-buttons"},Cb={key:2,class:"encouragement"},Pb={class:"encouragement-text"},Ib={__name:"KidsAnswerDisplay",props:{answer:{type:String,default:""},question:{type:String,default:""},questionId:{type:Number,default:null},loading:{type:Boolean,default:!1},streamStatus:{type:String,default:""},isStreaming:{type:Boolean,default:!1}},emits:["answerSaved","followUpQuestion","loginRequired","readingView"],setup(t,{emit:e}){const n=e,{currentUser:r}=Gr(),a=t,s=Ae(!1),u=Ae(null),o=Ae(!1),c=Ae(""),h=Ae(""),f=Ae(!1),m=["🦁","🐑","🕊️","👼","⭐"],w=Ae(m[Math.floor(Math.random()*m.length)]),v=["Keep asking questions! God loves curious kids! 🌟","You're learning so much about God! Keep it up! 💪","Great question! God is so happy when we want to learn! 😊","Wow! You're becoming a Bible expert! 🎓","God loves it when kids like you ask questions! ❤️"],y=Ae(v[Math.floor(Math.random()*v.length)]),k=je(()=>new Date().toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})),L=je(()=>a.answer.split(/\s+/).filter(re=>re.length>0).length),x=je(()=>{const $=Math.ceil(L.value/100);return Math.max(1,$)}),P=async()=>{try{await navigator.clipboard.writeText(a.answer),s.value=!0,setTimeout(()=>{s.value=!1},3e3)}catch(re){console.error("Failed to copy text: ",re)}},H=async()=>{if(navigator.share)try{await navigator.share({title:"Kids Bible Q&A Answer",text:a.answer})}catch(re){console.error("Error sharing:",re)}else P()},M=async()=>{if(!o.value){if(!r.value){confirm("You need to be logged in to save answers. Would you like to create an account or log in?")&&n("loginRequired",{question:a.question,answer:a.answer,questionId:a.questionId});return}if(!a.questionId){console.error("Cannot save answer without a questionId."),u.value=!1,setTimeout(()=>{u.value=null},3e3);return}try{o.value=!0,await new Promise($=>setTimeout($,0));const re=await ma.save(a.questionId);re.success?(u.value=!0,n("answerSaved",re.id),w.value=m[Math.floor(Math.random()*m.length)],y.value=v[Math.floor(Math.random()*v.length)]):u.value=!1,setTimeout(()=>{u.value=null},3e3)}catch(re){console.error("Failed to save answer:",re),u.value=!1,setTimeout(()=>{u.value=null},3e3)}finally{o.value=!1}}},oe=re=>{console.log(`Kids feedback: ${re}`)},fe=re=>{n("readingView",re)},pe=()=>{!c.value.trim()||a.loading||(n("followUpQuestion",c.value),h.value=c.value,c.value="")};return qt(()=>a.question,re=>{h.value=re||""},{immediate:!0}),qt(()=>a.answer,async(re,$)=>{if(!re){f.value=!1;return}!$&&re&&!f.value&&(f.value=!0,await bn(),setTimeout(()=>{const ce=document.querySelector(".kids-answer-display");ce&&ce.scrollIntoView({behavior:"smooth",block:"start"})},100))}),(re,$)=>(X(),ir(ba,{name:"kids-answer-appear",appear:""},{default:St(()=>[t.answer||t.loading?(X(),ne("div",Xm,[d("div",Zm,[d("div",eb,[d("div",tb,le(w.value),1),$[3]||($[3]=d("div",{class:"character-sparkles"},[d("span",{class:"sparkle"},"✨"),d("span",{class:"sparkle"},"⭐"),d("span",{class:"sparkle"},"💫")],-1))]),d("div",nb,[d("h3",rb,le(t.loading&&!t.answer?"Finding your answer! 🔍":"Here's what I found! 🎉"),1),$[4]||($[4]=d("p",{class:"answer-subtitle"},"A special answer just for you!",-1))]),!t.loading||t.answer?(X(),ne("div",ab,$[5]||($[5]=[d("span",{class:"badge-emoji"},"✅",-1),d("span",null,"Bible Answer",-1)]))):Re("",!0)]),d("div",sb,[st(ba,{name:"status-fade"},{default:St(()=>[t.streamStatus?(X(),ne("div",ib,[$[6]||($[6]=d("div",{class:"stream-status-icon"},"⚡",-1)),d("span",null,le(t.streamStatus),1)])):Re("",!0)]),_:1}),d("div",ob,[h.value?(X(),ne("div",lb,[$[7]||($[7]=d("span",{class:"question-prompt__label"},"🙋 You asked:",-1)),d("p",ub,le(h.value),1)])):Re("",!0),t.answer?(X(),ir(fs,{key:1,text:t.answer,"text-class":"answer-text","navigation-source":"kids-answer",onReadingView:fe},null,8,["text"])):Re("",!0),t.loading&&!t.answer?(X(),ne("div",cb,$[8]||($[8]=[d("div",{class:"loading-character"},"📖",-1),d("div",{class:"loading-text"},[d("p",{class:"loading-primary"},"Looking through the Bible for you!"),d("p",{class:"loading-secondary"},"Finding the perfect answer... ✨")],-1)]))):Re("",!0),t.isStreaming&&t.answer?(X(),ne("div",db,$[9]||($[9]=[d("span",{class:"typing-dot"},null,-1),d("span",{class:"typing-dot"},null,-1),d("span",{class:"typing-dot"},null,-1)]))):Re("",!0),t.answer&&!t.isStreaming?(X(),ne("div",hb,[$[11]||($[11]=d("span",{class:"reading-emoji"},"⏰",-1)),d("span",null,le(x.value)+" minute"+le(x.value!==1?"s":"")+" to read",1),d("span",fb,[$[10]||($[10]=d("span",{class:"word-emoji"},"📝",-1)),Me(" "+le(L.value)+" words ",1)])])):Re("",!0)]),t.answer&&!t.isStreaming?(X(),ne("div",pb,[d("div",vb,[d("button",{onClick:P,class:Ze(["kids-action-button","kids-action-button--copy",{"kids-action-button--success":s.value}])},[d("span",gb,le(s.value?"✅":"📋"),1),Me(" "+le(s.value?"Copied!":"Copy"),1)],2),d("button",{onClick:H,class:"kids-action-button kids-action-button--share"},$[12]||($[12]=[d("span",{class:"action-emoji"},"📤",-1),Me(" Share ",-1)])),d("button",{onClick:M,class:Ze(["kids-action-button","kids-action-button--save",{"kids-action-button--success":u.value}]),disabled:o.value},[d("span",bb,le(u.value?"💖":"💾"),1),Me(" "+le(u.value?"Saved!":"Save"),1)],10,mb)]),d("div",yb,[$[13]||($[13]=d("span",{class:"time-emoji"},"🕐",-1)),d("span",null,le(k.value),1)])])):Re("",!0)]),t.answer&&!t.isStreaming?(X(),ne("section",wb,[$[16]||($[16]=d("div",{class:"followup-header"},[d("span",{class:"followup-emoji"},"💬"),d("span",{class:"followup-title"},"Want to know more?")],-1)),$[17]||($[17]=d("p",{class:"followup-description"},"Ask a follow-up question to learn even more!",-1)),d("div",_b,[en(d("input",{"onUpdate:modelValue":$[0]||($[0]=ce=>c.value=ce),class:"followup-input",type:"text",disabled:t.loading,placeholder:"e.g., Tell me more about ...",onKeyup:ds(pe,["enter"])},null,40,kb),[[sr,c.value]]),d("button",{class:"kids-followup-button",disabled:t.loading||!c.value.trim(),onClick:pe},[t.loading?(X(),ne("span",Ab,$[15]||($[15]=[d("span",{class:"followup-button-emoji"},"⏳",-1),Me(" Asking... ",-1)]))):(X(),ne("span",Sb,$[14]||($[14]=[d("span",{class:"followup-button-emoji"},"🚀",-1),Me(" Ask More! ",-1)])))],8,xb)])])):Re("",!0),t.answer&&!t.isStreaming?(X(),ne("div",Lb,[$[20]||($[20]=d("div",{class:"feedback-header"},[d("span",{class:"feedback-emoji"},"🤗"),d("span",{class:"feedback-title"},"Did this help you learn?")],-1)),d("div",Nb,[d("button",{onClick:$[1]||($[1]=ce=>oe("yes")),class:"feedback-button feedback-button--yes"},$[18]||($[18]=[d("span",{class:"feedback-emoji-button"},"😊",-1),Me(" Yes! ",-1)])),d("button",{onClick:$[2]||($[2]=ce=>oe("no")),class:"feedback-button feedback-button--no"},$[19]||($[19]=[d("span",{class:"feedback-emoji-button"},"😕",-1),Me(" Not really ",-1)]))])])):Re("",!0),t.answer&&!t.isStreaming?(X(),ne("div",Cb,[$[21]||($[21]=d("div",{class:"encouragement-character"},"🌟",-1)),d("p",Pb,le(y.value),1)])):Re("",!0)])):Re("",!0)]),_:1}))}},Eb=tn(Ib,[["__scopeId","data-v-b0b47256"]]),Rb={key:0,class:"kids-error-message",role:"alert","aria-live":"polite"},Fb={class:"error-content"},Tb={class:"error-text-content"},qb={class:"kids-error-text"},Mb={class:"error-actions"},Ob={__name:"KidsErrorMessage",props:{error:{type:String,default:""}},emits:["dismiss","retry"],setup(t,{emit:e}){const n=t,r=e,a=je(()=>{const u=n.error.toLowerCase();return u.includes("network")||u.includes("connection")?"It looks like there's a problem with the internet connection. Let's check that!":u.includes("server")||u.includes("service")?"The computer that helps answer questions is taking a little break. Let's try again in a moment!":u.includes("timeout")?"The answer is taking too long to find. Let's try asking again!":"Something unexpected happened, but don't worry - we can try again!"}),s=()=>{r("retry"),r("dismiss")};return(u,o)=>(X(),ir(ba,{name:"kids-error-appear"},{default:St(()=>[t.error?(X(),ne("div",Rb,[d("div",Fb,[o[5]||(o[5]=d("div",{class:"error-character"},[d("div",{class:"sad-character"},"😔"),d("div",{class:"comfort-sparkles"},[d("span",{class:"comfort-sparkle"},"💙"),d("span",{class:"comfort-sparkle"},"💚"),d("span",{class:"comfort-sparkle"},"💜")])],-1)),d("div",Tb,[o[1]||(o[1]=d("h4",{class:"kids-error-title"},"Oops! Something went wrong 😅",-1)),d("p",qb,le(a.value),1),o[2]||(o[2]=d("div",{class:"error-suggestions"},[d("p",{class:"suggestions-title"},[d("span",{class:"suggestions-emoji"},"💡"),Me(" Let's try these ideas: ")]),d("ul",{class:"kids-suggestions-list"},[d("li",null,[d("span",{class:"suggestion-emoji"},"🔌"),Me(" Check if your internet is working ")]),d("li",null,[d("span",{class:"suggestion-emoji"},"🔄"),Me(" Try asking your question again ")]),d("li",null,[d("span",{class:"suggestion-emoji"},"🤔"),Me(" Make sure your question is clear ")]),d("li",null,[d("span",{class:"suggestion-emoji"},"👨‍👩‍👧‍👦"),Me(" Ask your parents or teacher for help ")])])],-1))]),d("div",Mb,[d("button",{onClick:o[0]||(o[0]=c=>u.$emit("dismiss")),class:"kids-dismiss-button"},o[3]||(o[3]=[d("span",{class:"button-emoji"},"👍",-1),Me(" Okay! ",-1)])),d("button",{onClick:s,class:"kids-retry-button"},o[4]||(o[4]=[d("span",{class:"button-emoji"},"🔄",-1),Me(" Try Again ",-1)]))])]),o[6]||(o[6]=d("div",{class:"comfort-section"},[d("div",{class:"comfort-character"},"🤗"),d("p",{class:"comfort-message"}," Don't worry! Even when things don't work perfectly, God is always with you! 💕 ")],-1))])):Re("",!0)]),_:1}))}},Bb=tn(Ob,[["__scopeId","data-v-d15b1c03"]]),jb={class:"kids-saved-answers"},Db={key:0,class:"kids-guest-message"},$b={class:"guest-actions"},Ub={class:"kids-saved-header"},zb={class:"header-title"},Hb={key:0,class:"kids-count-badge"},Vb={class:"header-actions"},Wb={class:"kids-search-container"},Gb={key:0,class:"kids-loading-state"},Jb={key:1,class:"kids-empty-state"},Kb={key:2,class:"kids-empty-state"},Yb={class:"empty-text"},Qb={key:3,class:"kids-answers-grid"},Xb={class:"card-header"},Zb={class:"card-emoji"},ey={class:"card-question"},ty={class:"card-actions"},ny=["onClick"],ry={class:"expand-emoji"},ay=["onClick"],sy={key:0,class:"card-content"},iy={class:"answer-text"},oy={class:"answer-meta"},ly={class:"meta-item"},uy={class:"meta-item"},cy={key:0,class:"kids-tags"},dy={class:"card-bottom-actions"},hy=["onClick"],fy={__name:"KidsSavedAnswers",emits:["update"],setup(t,{expose:e,emit:n}){const r=n,{currentUser:a}=Gr(),s=Ae([]),u=Ae(""),o=Ae(new Set),c=Ae(!1),h=["🌟","💖","🌈","✨","🎉","🦋","🌸","🎈","🍀","🌺"],f=je(()=>{let x=s.value||[];if(u.value&&u.value.trim()){const P=u.value.trim().toLowerCase();x=x.filter(H=>H.question&&H.question.toLowerCase().includes(P)||H.answer&&H.answer.toLowerCase().includes(P))}return x}),m=async()=>{if(!a.value){s.value=[];return}c.value=!0;try{s.value=await ma.getAll()}catch(x){console.error("Error loading saved answers:",x),s.value=[]}finally{c.value=!1}},w=async x=>{if(confirm("Are you sure you want to delete this saved answer? 🤔"))try{const P=await ma.delete(x);P.success?(await m(),o.value.delete(x),r("update")):console.error("Failed to delete answer:",P.message)}catch(P){console.error("Error deleting answer:",P)}},v=x=>{o.value.has(x)?o.value.delete(x):o.value.add(x)},y=async x=>{try{await navigator.clipboard.writeText(x)}catch(P){console.error("Failed to copy text: ",P)}},k=x=>{const P=new Date(x),M=Math.floor((new Date-P)/(1e3*60*60*24));return M===0?"Today! 🌟":M===1?"Yesterday 📅":M<7?`${M} days ago 📆`:P.toLocaleDateString("en-US",{month:"short",day:"numeric"})+" 📅"},L=()=>h[Math.floor(Math.random()*h.length)];return qt(a,()=>{m()}),Vr(()=>{m()}),e({refresh:m}),(x,P)=>{const H=ya("router-link");return X(),ne("div",jb,[tt(a)?(X(),ne(Pt,{key:1},[d("div",Ub,[P[10]||(P[10]=d("div",{class:"header-mascot"},[d("div",{class:"mascot"},"📚"),d("div",{class:"mascot-speech"},[d("div",{class:"speech-bubble"}," Look at all the cool things you've learned! 🌟 ")])],-1)),d("div",zb,[P[8]||(P[8]=d("h2",{class:"kids-saved-title"},"My Saved Answers",-1)),s.value.length>0?(X(),ne("span",Hb,[P[7]||(P[7]=d("span",{class:"badge-emoji"},"🎉",-1)),Me(" "+le(s.value.length)+" awesome answer"+le(s.value.length!==1?"s":"")+"! ",1)])):Re("",!0)]),d("div",Vb,[d("div",Wb,[P[9]||(P[9]=d("div",{class:"search-icon"},"🔍",-1)),en(d("input",{"onUpdate:modelValue":P[0]||(P[0]=M=>u.value=M),type:"search",placeholder:"Search your saved answers...",class:"kids-search-input"},null,512),[[sr,u.value]]),u.value?(X(),ne("button",{key:0,onClick:P[1]||(P[1]=M=>u.value=""),class:"search-clear",title:"Clear search"}," ❌ ")):Re("",!0)])])]),c.value?(X(),ne("div",Gb,P[11]||(P[11]=[d("div",{class:"loading-character"},"📖",-1),d("p",{class:"loading-text"},"Loading your saved answers... ✨",-1)]))):s.value.length===0?(X(),ne("div",Jb,P[12]||(P[12]=[ar('<div class="empty-character" data-v-c60880f9>📖</div><h3 class="empty-title" data-v-c60880f9>No saved answers yet!</h3><p class="empty-text" data-v-c60880f9> When you find awesome answers to your Bible questions, click the <span class="save-example" data-v-c60880f9>💾 Save</span> button to keep them here! Then you can read them again anytime! 🌟 </p><div class="empty-encouragement" data-v-c60880f9><div class="encouragement-emoji" data-v-c60880f9>🚀</div><span data-v-c60880f9>Go ask your first question!</span></div>',4)]))):f.value.length===0?(X(),ne("div",Kb,[P[13]||(P[13]=d("div",{class:"empty-character"},"🔍",-1)),P[14]||(P[14]=d("h3",{class:"empty-title"},"No matches found!",-1)),d("p",Yb,` I couldn't find any saved answers that match "`+le(u.value)+'". Try searching for something else! 😊 ',1)])):(X(),ne("div",Qb,[(X(!0),ne(Pt,null,Ut(f.value,(M,oe)=>(X(),ne("div",{key:M.id,class:"kids-answer-card",style:yu({animationDelay:`${oe*.1}s`})},[d("div",Xb,[d("div",Zb,le(L()),1),d("h3",ey,le(M.question),1),d("div",ty,[d("button",{onClick:fe=>v(M.id),class:Ze(["kids-expand-button",{"kids-expand-button--active":o.value.has(M.id)}])},[d("span",ry,le(o.value.has(M.id)?"🔼":"🔽"),1)],10,ny),d("button",{onClick:fe=>w(M.id),class:"kids-delete-button",title:"Delete this answer"},P[15]||(P[15]=[d("span",{class:"delete-emoji"},"🗑️",-1)]),8,ay)])]),st(ba,{name:"kids-card-expand"},{default:St(()=>[o.value.has(M.id)?(X(),ne("div",sy,[d("div",iy,le(M.answer),1),d("div",oy,[d("div",ly,[P[16]||(P[16]=d("span",{class:"meta-emoji"},"📅",-1)),d("span",null,le(k(M.saved_at||M.timestamp)),1)]),d("div",uy,[P[17]||(P[17]=d("span",{class:"meta-emoji"},"📝",-1)),d("span",null,le(M.word_count||M.wordCount||0)+" words",1)])]),M.tags&&M.tags.length>0?(X(),ne("div",cy,[(X(!0),ne(Pt,null,Ut(M.tags,fe=>(X(),ne("span",{key:fe,class:"kids-tag"},[P[18]||(P[18]=d("span",{class:"tag-emoji"},"🏷️",-1)),Me(" "+le(fe),1)]))),128))])):Re("",!0),d("div",dy,[d("button",{onClick:fe=>y(M.answer),class:"kids-copy-button"},P[19]||(P[19]=[d("span",{class:"copy-emoji"},"📋",-1),Me(" Copy Answer ",-1)]),8,hy)])])):Re("",!0)]),_:2},1024)],4))),128))]))],64)):(X(),ne("div",Db,[P[4]||(P[4]=d("div",{class:"guest-character"},"🔒",-1)),P[5]||(P[5]=d("h3",{class:"guest-title"},"Sign In to Save Answers!",-1)),P[6]||(P[6]=d("p",{class:"guest-text"}," Create an account or log in to save your favorite Bible answers and come back to them anytime! 🌟 ",-1)),d("div",$b,[st(H,{to:{name:"login",query:{redirect:"kids-saved"}},class:"kids-btn-primary"},{default:St(()=>P[2]||(P[2]=[d("span",{class:"btn-emoji"},"🔑",-1),Me(" Log In ",-1)])),_:1,__:[2]}),st(H,{to:{name:"register",query:{redirect:"kids-saved"}},class:"kids-btn-secondary"},{default:St(()=>P[3]||(P[3]=[d("span",{class:"btn-emoji"},"✨",-1),Me(" Create Account ",-1)])),_:1,__:[3]})])]))])}}},py=tn(fy,[["__scopeId","data-v-c60880f9"]]);function vy(){const t=Ae(""),e=Ae(""),n=Ae(null),r=Ae(null),a=Ae(!1),s=Ae(!1),u=Ae(""),o=Ae([]),c=Ae(""),h=Ae(!1),f=async(L=t.value,x=!0)=>{if(!L?.trim()){u.value="Oops! Please type a question first! 🤔";return}s.value=!0,e.value="",a.value=!1,u.value="",c.value="",h.value=x;try{if(x)await Kt.streamQuestion(L,async P=>{switch(P.type){case"cached":e.value=P.answer,n.value=P.question_id,r.value=P.question_id,a.value=!!P.is_biblical,c.value="",o.value=[{role:"user",content:L},{role:"assistant",content:P.answer}];break;case"status":c.value=w(P.message);break;case"content":e.value+=P.text,await bn();break;case"done":n.value=P.question_id,r.value=P.question_id,a.value=!!P.is_biblical,c.value="",o.value=[{role:"user",content:L},{role:"assistant",content:e.value}];break;case"error":u.value=v(P.message),c.value="";break}});else{const P=await Kt.askQuestion(L);e.value=P.answer,n.value=P.question_id,r.value=P.question_id,a.value=!!P.is_biblical,o.value=[{role:"user",content:L},{role:"assistant",content:P.answer}]}}catch(P){u.value=v(P?.message||"Something went wrong"),console.error("Kids Bible Q&A Error:",P)}finally{s.value=!1,h.value=!1,c.value=""}},m=async(L,x=!0)=>{if(!L?.trim()){u.value="Please ask a follow-up question! 🤔";return}s.value=!0,u.value="",c.value="",h.value=x,e.value="";try{if(x)await Kt.streamFollowUpQuestion({question:L,conversation_history:o.value,parent_question_id:r.value},async P=>{switch(P.type){case"cached":e.value=P.answer,n.value=P.question_id,a.value=!!P.is_biblical,c.value="",o.value.push({role:"user",content:L},{role:"assistant",content:P.answer});break;case"status":c.value=w(P.message);break;case"content":e.value+=P.text,await bn();break;case"done":n.value=P.question_id,a.value=!!P.is_biblical,c.value="",o.value.push({role:"user",content:L},{role:"assistant",content:e.value});break;case"error":u.value=v(P.message),c.value="";break}});else{const P=await Kt.askFollowUpQuestion({question:L,conversation_history:o.value,parent_question_id:r.value});o.value.push({role:"user",content:L},{role:"assistant",content:P.answer}),e.value=P.answer,n.value=P.question_id,a.value=!!P.is_biblical}}catch(P){u.value=v(P?.message||"Something went wrong"),console.error("Kids Follow-up Question Error:",P)}finally{s.value=!1,h.value=!1,c.value=""}},w=L=>{if(!L)return"";const x=L.toLowerCase();return x.includes("searching")||x.includes("looking")?"🔍 Looking through the Bible for you...":x.includes("thinking")||x.includes("processing")?"🤔 Thinking about your question...":x.includes("finding")||x.includes("bible")?"📖 Finding Bible verses...":x.includes("generating")||x.includes("writing")?"✍️ Writing your answer...":"✨ Working on your answer..."},v=L=>{if(!L)return"Oops! Something went wrong. Try again! 😊";const x=L.toLowerCase();return x.includes("network")||x.includes("timeout")?"Hmm, the internet is being slow! Try again in a moment. 🐢":x.includes("empty")||x.includes("question")?"Please type a question first! 🤔":"Oops! Something went wrong, but that's okay! Try again! 😊"};return{question:t,answer:e,questionId:n,rootQuestionId:r,isBiblicalAnswer:a,loading:s,error:u,conversationHistory:o,streamStatus:c,isStreaming:h,askQuestion:f,askFollowUpQuestion:m,clearAll:()=>{t.value="",e.value="",n.value=null,r.value=null,a.value=!1,u.value="",s.value=!1,o.value=[],c.value="",h.value=!1},clearError:()=>{u.value=""}}}const gy={class:"kids-app"},my={class:"kids-nav"},by={class:"nav-container nav-container--centered"},yy={class:"kids-container"},wy={class:"kids-main"},_y={class:"kids-nav-tabs"},ky={key:0,class:"kids-badge"},xy={key:0,class:"kids-content animate-slide-in"},Sy={key:1,class:"kids-saved-content animate-fade-in"},Ay={__name:"KidsApp",setup(t){const e=Wr(),{currentUser:n}=Gr(),{question:r,answer:a,questionId:s,rootQuestionId:u,conversationHistory:o,loading:c,error:h,streamStatus:f,isStreaming:m,askQuestion:w,askFollowUpQuestion:v,clearAll:y,clearError:k}=vy(),L=Ae("ask"),x=Ae(null),P=Ae(0),H=async()=>{if(!n.value){P.value=0;return}try{const F=await ma.getAll();P.value=F.length}catch(F){console.error("Error updating saved count:",F),P.value=0}},M=async F=>{await w(F),L.value!=="ask"&&(L.value="ask")},oe=()=>{y(),a.value="",r.value=""},fe=async F=>{await v(F)},pe=()=>{H(),x.value&&x.value.refresh()},re=()=>{H()},$=F=>{if(typeof window<"u")try{const B={question:F?.question||r.value||"",answer:F?.answer||a.value||"",questionId:F?.questionId??s.value,rootQuestionId:u.value,conversationHistory:Array.isArray(o.value)?JSON.parse(JSON.stringify(o.value)):[]};B.question&&B.answer&&sessionStorage.setItem(Do,JSON.stringify(B))}catch(B){console.error("Failed to persist pending answer before login:",B)}e.push({name:"login",query:{redirect:"kids-pending-save"}})},ce=F=>{const B={ref:F.reference};F.source&&(B.source=F.source),e.push({name:"reading",query:B})};return Vr(()=>{H()}),(F,B)=>{const ee=ya("router-link");return X(),ne("div",gy,[d("nav",my,[d("div",by,[st(ee,{to:"/",class:"nav-link nav-link--home"},{default:St(()=>B[3]||(B[3]=[d("svg",{class:"nav-home-icon",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})],-1),Me(" Home ",-1)])),_:1,__:[3]})])]),B[9]||(B[9]=ar('<div class="kids-background" data-v-5a405bd4><div class="rainbow-gradient" data-v-5a405bd4></div><div class="floating-shapes" data-v-5a405bd4><div class="shape shape--star shape--1" data-v-5a405bd4>⭐</div><div class="shape shape--heart shape--2" data-v-5a405bd4>💖</div><div class="shape shape--rainbow shape--3" data-v-5a405bd4>🌈</div><div class="shape shape--dove shape--4" data-v-5a405bd4>🕊️</div><div class="shape shape--cross shape--5" data-v-5a405bd4>✝️</div><div class="shape shape--sun shape--6" data-v-5a405bd4>☀️</div><div class="shape shape--flower shape--7" data-v-5a405bd4>🌸</div><div class="shape shape--lamb shape--8" data-v-5a405bd4>🐑</div></div></div>',1)),d("div",yy,[B[7]||(B[7]=ar('<header class="kids-header animate-bounce-in" data-v-5a405bd4><div class="header-content" data-v-5a405bd4><div class="logo-section" data-v-5a405bd4><div class="logo-wrapper" data-v-5a405bd4><div class="logo-icon" data-v-5a405bd4>📖</div><div class="logo-text" data-v-5a405bd4><h2 class="kids-title" data-v-5a405bd4>Answers from God&#39;s Word</h2><div class="kids-tagline" data-v-5a405bd4>Questions • Stories • Faith</div></div></div><p class="kids-subtitle" data-v-5a405bd4> Ask anything about God, Jesus, and the Bible — and discover answers from Scripture made just for you! </p></div></div></header>',1)),d("main",wy,[d("div",_y,[d("button",{onClick:B[0]||(B[0]=Z=>L.value="ask"),class:Ze(["kids-tab",{"kids-tab--active":L.value==="ask"}])},B[4]||(B[4]=[d("span",{class:"tab-emoji"},"🙋‍♀️",-1),Me(" Ask a Question ",-1)]),2),d("button",{onClick:B[1]||(B[1]=Z=>L.value="saved"),class:Ze(["kids-tab",{"kids-tab--active":L.value==="saved"}])},[B[5]||(B[5]=d("span",{class:"tab-emoji"},"💾",-1)),B[6]||(B[6]=Me(" My Saved Answers ",-1)),P.value>0?(X(),ne("span",ky,le(P.value),1)):Re("",!0)],2)]),L.value==="ask"?(X(),ne("div",xy,[st(Qm,{question:tt(r),"onUpdate:question":B[2]||(B[2]=Z=>Qd(r)?r.value=Z:null),loading:tt(c),onSubmit:M,onClear:oe,class:"kids-question-section"},null,8,["question","loading"]),st(Eb,{answer:tt(a),question:tt(r),"question-id":tt(s),loading:tt(c),"stream-status":tt(f),"is-streaming":tt(m),class:"kids-answer-section",onAnswerSaved:pe,onFollowUpQuestion:fe,onLoginRequired:$,onReadingView:ce},null,8,["answer","question","question-id","loading","stream-status","is-streaming"]),st(Bb,{error:tt(h),onDismiss:tt(k),class:"kids-error-section"},null,8,["error","onDismiss"])])):L.value==="saved"?(X(),ne("div",Sy,[st(py,{ref_key:"savedAnswersRef",ref:x,onUpdate:re},null,512)])):Re("",!0)]),B[8]||(B[8]=ar('<footer class="kids-footer" data-v-5a405bd4><div class="footer-content" data-v-5a405bd4><div class="footer-character" data-v-5a405bd4><div class="character-bubble" data-v-5a405bd4><span class="character" data-v-5a405bd4>🐑</span><div class="speech-bubble" data-v-5a405bd4> Remember to always ask your parents or Sunday school teacher about important questions too! God loves you! 💕 </div></div></div></div></footer>',1))])])}}},Ly=tn(Ay,[["__scopeId","data-v-5a405bd4"]]),Ny={class:"auth-page"},Cy={class:"auth-container"},Py={class:"auth-card"},Iy={class:"logo-icon","aria-hidden":"true"},Ey=["src"],Ry={key:0,class:"error-message"},Fy={class:"form-group"},Ty=["disabled"],qy={class:"form-group password-group"},My={class:"password-input"},Oy=["type","disabled"],By=["aria-pressed","aria-label","title","disabled"],jy={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},Dy={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},$y=["disabled"],Uy={key:0},zy={key:1,class:"loading-spinner"},Hy={class:"auth-footer"},Vy={__name:"Login",setup(t){const e=Wr(),n=Gs(),{login:r,isLoading:a,error:s}=Gr(),u=Ae(""),o=Ae(""),c=Ae(""),h=Ae(!1),f=async()=>{c.value="";const v=await r(u.value,o.value);if(v.success){const y=n.query.redirect,k=typeof n.query.planSlug=="string"?n.query.planSlug:"";if(y==="pending-save")e.push({name:"main",query:{restored:"pending"}});else if(y==="saved")e.push({name:"main",query:{tab:"saved"}});else if(y==="reading-plan"){const L=k?{slug:k}:{};e.push({name:"reading-plan",params:L})}else e.push({name:"home"})}else c.value=v.message||s.value||"Login failed"},m=()=>{e.push("/")},w=()=>{h.value=!h.value};return(v,y)=>{const k=ya("router-link");return X(),ne("div",Ny,[y[14]||(y[14]=ar('<div class="auth-background" data-v-5af182c3><div class="bg-gradient" data-v-5af182c3></div><div class="bg-pattern" data-v-5af182c3></div><div class="floating-elements" data-v-5af182c3><div class="floating-element floating-element--1" data-v-5af182c3></div><div class="floating-element floating-element--2" data-v-5af182c3></div><div class="floating-element floating-element--3" data-v-5af182c3></div></div></div>',1)),d("div",Cy,[d("div",Py,[d("div",Iy,[d("img",{src:tt(Nu),alt:"Word of Life Answers logo"},null,8,Ey)]),y[10]||(y[10]=d("h2",null,"Welcome Back!",-1)),y[11]||(y[11]=d("p",{class:"subtitle"},"Sign in to save answers, revisit your saved answers anytime, and view your recently asked questions.",-1)),d("form",{onSubmit:Vn(f,["prevent"]),class:"auth-form"},[c.value?(X(),ne("div",Ry,[y[2]||(y[2]=d("svg",{viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),Me(" "+le(c.value),1)])):Re("",!0),d("div",Fy,[y[3]||(y[3]=d("label",{for:"email"},"Email",-1)),en(d("input",{id:"email","onUpdate:modelValue":y[0]||(y[0]=L=>u.value=L),type:"email",required:"",placeholder:"your@email.com",disabled:tt(a)},null,8,Ty),[[sr,u.value]])]),d("div",qy,[y[6]||(y[6]=d("label",{for:"password"},"Password",-1)),d("div",My,[en(d("input",{id:"password","onUpdate:modelValue":y[1]||(y[1]=L=>o.value=L),type:h.value?"text":"password",required:"",placeholder:"••••••••",disabled:tt(a)},null,8,Oy),[[Xd,o.value]]),d("button",{type:"button",class:"password-toggle",onClick:w,"aria-pressed":h.value,"aria-label":h.value?"Hide password":"Show password",title:h.value?"Hide password":"Show password",disabled:tt(a)},[h.value?(X(),ne("svg",Dy,y[5]||(y[5]=[d("path",{d:"M2.5 12s3-5.5 9.5-5.5 9.5 5.5 9.5 5.5-3 5.5-9.5 5.5S2.5 12 2.5 12z"},null,-1),d("path",{d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),d("path",{d:"M4 4l16 16"},null,-1)]))):(X(),ne("svg",jy,y[4]||(y[4]=[d("path",{d:"M2.5 12s3-5.5 9.5-5.5 9.5 5.5 9.5 5.5-3 5.5-9.5 5.5S2.5 12 2.5 12z"},null,-1),d("path",{d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1)])))],8,By)])]),d("button",{type:"submit",class:"btn-primary",disabled:tt(a)},[tt(a)?(X(),ne("span",zy,"Signing in...")):(X(),ne("span",Uy,"Sign In"))],8,$y)],32),y[12]||(y[12]=d("div",{class:"auth-divider"},[d("span",null,"or")],-1)),d("button",{onClick:m,class:"btn-guest"},y[7]||(y[7]=[d("svg",{viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707l-3-3a1 1 0 00-1.414 1.414L10.586 9H7a1 1 0 100 2h3.586l-1.293 1.293a1 1 0 101.414 1.414l3-3a1 1 0 000-1.414z","clip-rule":"evenodd"})],-1),Me(" Continue as Guest ",-1)])),y[13]||(y[13]=d("p",{class:"guest-note guest-note--inline"},[Me(" You can use Word of Life Answers without an account."),d("br"),Me(" Sign in only if you want to save answers. ")],-1)),d("p",Hy,[y[9]||(y[9]=Me(" Don't have an account? ",-1)),st(k,{to:"/register"},{default:St(()=>y[8]||(y[8]=[Me("Create one",-1)])),_:1,__:[8]})])])])])}}},Wy=tn(Vy,[["__scopeId","data-v-5af182c3"]]),Gy={class:"auth-page"},Jy={class:"auth-container"},Ky={class:"auth-card"},Yy={class:"logo-icon","aria-hidden":"true"},Qy=["src"],Xy={key:0,class:"error-message"},Zy={class:"form-group"},e4=["disabled"],t4={class:"form-group"},n4=["disabled"],r4={class:"form-group password-group"},a4={class:"password-input"},s4=["type","disabled"],i4=["aria-pressed","aria-label","title","disabled"],o4={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},l4={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},u4=["disabled"],c4={key:0},d4={key:1,class:"loading-spinner"},h4={class:"auth-footer"},f4={__name:"Register",setup(t){const e=Wr(),n=Gs(),{register:r,isLoading:a,error:s}=Gr(),u=Ae(""),o=Ae(""),c=Ae(""),h=Ae(""),f=Ae(!1),m=async()=>{h.value="";const y=await r(o.value,u.value,c.value);if(y.success){const k=n.query.redirect,L=typeof n.query.planSlug=="string"?n.query.planSlug:"";if(k==="pending-save")e.push({name:"main",query:{restored:"pending"}});else if(k==="saved")e.push({name:"main",query:{tab:"saved"}});else if(k==="reading-plan"){const x=L?{slug:L}:{};e.push({name:"reading-plan",params:x})}else e.push({name:"main"})}else h.value=y.message||s.value||"Registration failed"},w=()=>{e.push("/")},v=()=>{f.value=!f.value};return(y,k)=>{const L=ya("router-link");return X(),ne("div",Gy,[k[16]||(k[16]=ar('<div class="auth-background" data-v-ddb2fe83><div class="bg-gradient" data-v-ddb2fe83></div><div class="bg-pattern" data-v-ddb2fe83></div><div class="floating-elements" data-v-ddb2fe83><div class="floating-element floating-element--1" data-v-ddb2fe83></div><div class="floating-element floating-element--2" data-v-ddb2fe83></div><div class="floating-element floating-element--3" data-v-ddb2fe83></div></div></div>',1)),d("div",Jy,[d("div",Ky,[d("div",Yy,[d("img",{src:tt(Nu),alt:"Word of Life Answers logo"},null,8,Qy)]),k[12]||(k[12]=d("h2",null,"Create Account",-1)),k[13]||(k[13]=d("p",{class:"subtitle"},"Sign in to save answers, revisit your saved answers anytime, and view your recently asked questions.",-1)),d("form",{onSubmit:Vn(m,["prevent"]),class:"auth-form"},[h.value?(X(),ne("div",Xy,[k[3]||(k[3]=d("svg",{viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),Me(" "+le(h.value),1)])):Re("",!0),d("div",Zy,[k[4]||(k[4]=d("label",{for:"username"},"Username",-1)),en(d("input",{id:"username","onUpdate:modelValue":k[0]||(k[0]=x=>u.value=x),type:"text",required:"",minlength:"3",placeholder:"Your name",disabled:tt(a)},null,8,e4),[[sr,u.value]])]),d("div",t4,[k[5]||(k[5]=d("label",{for:"email"},"Email",-1)),en(d("input",{id:"email","onUpdate:modelValue":k[1]||(k[1]=x=>o.value=x),type:"email",required:"",placeholder:"your@email.com",disabled:tt(a)},null,8,n4),[[sr,o.value]])]),d("div",r4,[k[8]||(k[8]=d("label",{for:"password"},"Password",-1)),d("div",a4,[en(d("input",{id:"password","onUpdate:modelValue":k[2]||(k[2]=x=>c.value=x),type:f.value?"text":"password",required:"",minlength:"8",placeholder:"At least 8 characters",disabled:tt(a)},null,8,s4),[[Xd,c.value]]),d("button",{type:"button",class:"password-toggle",onClick:v,"aria-pressed":f.value,"aria-label":f.value?"Hide password":"Show password",title:f.value?"Hide password":"Show password",disabled:tt(a)},[f.value?(X(),ne("svg",l4,k[7]||(k[7]=[d("path",{d:"M2.5 12s3-5.5 9.5-5.5 9.5 5.5 9.5 5.5-3 5.5-9.5 5.5S2.5 12 2.5 12z"},null,-1),d("path",{d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),d("path",{d:"M4 4l16 16"},null,-1)]))):(X(),ne("svg",o4,k[6]||(k[6]=[d("path",{d:"M2.5 12s3-5.5 9.5-5.5 9.5 5.5 9.5 5.5-3 5.5-9.5 5.5S2.5 12 2.5 12z"},null,-1),d("path",{d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1)])))],8,i4)])]),d("button",{type:"submit",class:"btn-primary",disabled:tt(a)},[tt(a)?(X(),ne("span",d4,"Creating account...")):(X(),ne("span",c4,"Create Account"))],8,u4)],32),k[14]||(k[14]=d("div",{class:"auth-divider"},[d("span",null,"or")],-1)),d("button",{onClick:w,class:"btn-guest"},k[9]||(k[9]=[d("svg",{viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707l-3-3a1 1 0 00-1.414 1.414L10.586 9H7a1 1 0 100 2h3.586l-1.293 1.293a1 1 0 101.414 1.414l3-3a1 1 0 000-1.414z","clip-rule":"evenodd"})],-1),Me(" Continue as Guest ",-1)])),k[15]||(k[15]=d("p",{class:"guest-note guest-note--inline"}," 💡 You can use Word of Life Answers without an account. Create one only if you want to save answers. ",-1)),d("p",h4,[k[11]||(k[11]=Me(" Already have an account? ",-1)),st(L,{to:"/login"},{default:St(()=>k[10]||(k[10]=[Me("Sign in",-1)])),_:1,__:[10]})])])])])}}},p4=tn(f4,[["__scopeId","data-v-ddb2fe83"]]),v4={class:"home app"},g4={class:"app-container"},m4={class:"app-header animate-fade-in"},b4={class:"header-content"},y4={class:"logo-section"},w4={class:"logo-wrapper"},_4={class:"logo-text"},k4={class:"app-title"},x4={class:"home-main"},S4={class:"home-quick-actions animate-fade-in"},A4={class:"action-grid"},L4={__name:"Home",setup(t){const e=Wr(),{currentUser:n}=Gr(),r=()=>{e.push({path:"/adults",query:{tab:"saved"}})},a=()=>{e.push({path:"/adults",query:{tab:"study"}})};return(s,u)=>{const o=ya("router-link");return X(),ne("div",v4,[st(rh),u[6]||(u[6]=ar('<div class="app-background" data-v-9d9c14d4><div class="bg-gradient" data-v-9d9c14d4></div><div class="bg-pattern" data-v-9d9c14d4></div><div class="floating-elements" data-v-9d9c14d4><div class="floating-element floating-element--1" data-v-9d9c14d4></div><div class="floating-element floating-element--2" data-v-9d9c14d4></div><div class="floating-element floating-element--3" data-v-9d9c14d4></div></div></div>',1)),d("div",g4,[d("header",m4,[d("div",b4,[d("div",y4,[d("div",w4,[d("div",_4,[d("h1",k4,"Welcome "+le(tt(n)?.username?`, ${tt(n).username}`:""),1),u[0]||(u[0]=d("div",{class:"app-tagline"},"Scripture • Wisdom • Truth",-1))])]),u[1]||(u[1]=d("p",{class:"app-subtitle"}," Welcome to your personalized Bible companion—ask thoughtful questions, explore answers and topics, follow guided reading plans, and grow in your understanding of Scripture each day. ",-1))])])]),d("main",x4,[d("section",S4,[d("div",A4,[st(o,{to:"/adults",class:"action-card"},{default:St(()=>u[2]||(u[2]=[d("div",{class:"action-icon"},[Me("❔ "),d("h3",null,"Ask Biblical Questions")],-1),d("p",null,"Open the Questions section to submit detailed Bible questions, explore related topics, and review recently asked questions.",-1)])),_:1,__:[2]}),d("button",{type:"button",class:"action-card action-card--button",onClick:a},u[3]||(u[3]=[d("div",{class:"action-icon"},[Me("📖 "),d("h3",null,"Bible Study Aids")],-1),d("p",null,"Enjoy guided Bible reading plans, explore Scripture at your own pace, and discover biblical topics supported by verse references.",-1)])),d("button",{type:"button",class:"action-card action-card--button",onClick:r},u[4]||(u[4]=[d("div",{class:"action-icon"},[Me("💾 "),d("h3",null,"Saved Answers")],-1),d("p",null,"Review your saved answers and choose to copy them for emails or documents, share them through text or email, or export them as a downloadable PDF.",-1)]))])]),u[5]||(u[5]=d("section",{class:"home-insights animate-fade-in"},[d("div",{class:"insights-card"},[d("h3",null,"Need Inspiration?"),d("p",null," Whether you’re wondering about forgiveness, faith, wisdom, or any passage of Scripture, your questions can lead to new, insightful perspectives. ")]),d("div",{class:"insights-card"},[d("h3",null,"Tip: Ask Follow-Up Questions"),d("p",null," Keep the conversation going — after you receive an answer, you can ask follow-up questions to explore the topic more deeply. Every answer is a starting point. Ask follow-up questions to dig deeper, clarify details, and uncover new insights. ")])],-1))])])])}}},N4=tn(L4,[["__scopeId","data-v-9d9c14d4"]]),C4={class:"reading-header"},P4={key:0,class:"reference-pill"},I4={class:"reading-card"},E4={class:"card-header"},R4={class:"card-actions"},F4=["disabled"],T4={key:0,class:"error-text"},q4={key:1,class:"loading-text"},M4={key:2,class:"passage-text"},O4={key:0,class:"chapter-heading"},B4={class:"verse-number"},j4={key:3,class:"chapter-nav chapter-nav--compact"},D4=["disabled"],$4={class:"chapter-nav__status"},U4=["disabled"],z4={key:4,class:"muted-text"},H4={key:0,class:"reading-card"},V4={class:"card-header"},W4={key:0,class:"error-text"},G4={key:1,class:"loading-text"},J4={key:2,class:"chapter-text"},K4={class:"verse-number"},Y4={key:3,class:"chapter-nav"},Q4=["disabled"],X4={class:"chapter-nav__status"},Z4=["disabled"],e3={__name:"ReadingView",setup(t){const e=Gs(),n=Wr(),r=Ae(null),a=Nr({loading:!1,error:"",data:null}),s=Nr({loading:!1,error:"",data:null,expanded:!1,currentChapter:null}),u=Ae(null),o=Ae(typeof e.query.ref=="string"?e.query.ref:""),c=je(()=>typeof e.query.plan=="string"?e.query.plan:""),h=je(()=>a.data?.reference||o.value||""),f=je(()=>{if(e.query.fullChapter==="1")return!0;const O=o.value?.trim();return O?Ti(O):!1}),m=je(()=>{const O=a.data?.verses;return O?.length?O.reduce((S,j)=>{const C=j.chapter,J=S[S.length-1];return!J||J.chapter!==C?S.push({chapter:C,verses:[j]}):J.verses.push(j),S},[]):[]}),w=je(()=>m.value.length>1),v=je(()=>{if(!m.value.length)return null;if(Number.isInteger(u.value)){const O=m.value.find(S=>S.chapter===u.value);if(O)return O}return m.value[0]}),y=je(()=>v.value?.verses??[]),k=je(()=>v.value?.chapter??null),L=je(()=>Number.isInteger(k.value)),x=je(()=>{const O=typeof e.query.source=="string"?e.query.source:"";return O==="answer"||O==="study"||O==="reading-plan"?O:""}),P=je(()=>x.value==="answer"?"← Return to Answer":x.value==="study"?"← Return to Study Helps":x.value==="reading-plan"?"← Return to Reading Plan":"← Back to Study Helps"),H=je(()=>s.data?`${s.data.book} ${s.data.chapter}`:""),M=je(()=>{const O=Number.isInteger(a.data?.chapter)?a.data.chapter:null,S=Number.isInteger(a.data?.end_chapter)?a.data.end_chapter:O,j=Number.isInteger(S)?S:null;return{start:O,end:j}}),oe=je(()=>{if(!m.value.length)return!1;const{start:O,end:S}=M.value;return Number.isInteger(O)&&Number.isInteger(S)&&S>O}),fe=je(()=>{if(!oe.value||!Number.isInteger(k.value))return!1;const{start:O}=M.value;return Number.isInteger(O)&&k.value>O}),pe=je(()=>{if(!oe.value||!Number.isInteger(k.value))return!1;const{end:O}=M.value;return Number.isInteger(O)&&k.value<O}),re=je(()=>w.value||oe.value),$=je(()=>{if(!a.data||!Number.isInteger(k.value))return!1;if(f.value)return!0;const O=a.data,S=k.value,j=Number.isInteger(O.chapter)?O.chapter:null,C=Number.isInteger(O.end_chapter)?O.end_chapter:j,J=O.start_verse,te=O.end_verse;return Number.isInteger(j)?C===j?J==null&&te==null:S===j?J==null||J<=1:S===C?te==null:!!(Number.isInteger(C)&&S>j&&S<C):!1}),ce=je(()=>{if(!s.expanded)return!1;const{start:O,end:S}=M.value;return Number.isInteger(O)&&Number.isInteger(S)&&S>O}),F=je(()=>{if(!ce.value||!Number.isInteger(s.currentChapter))return!1;const{start:O}=M.value;return Number.isInteger(O)&&s.currentChapter>O}),B=je(()=>{if(!ce.value||!Number.isInteger(s.currentChapter))return!1;const{end:O}=M.value;return Number.isInteger(O)&&s.currentChapter<O}),ee=je(()=>{if(!a.data||s.expanded)return!1;const O=Number.isInteger(u.value)?u.value:a.data?.chapter;return!!(a.data.book&&Number.isInteger(O))}),Z=O=>O?typeof O.reference=="string"&&O.reference.includes(":")?O.reference.split(":")[1]:O.verse??"":"",de=async()=>{if(await bn(),typeof window>"u")return;const O=r.value;O?.scrollIntoView?O.scrollIntoView({behavior:"smooth",block:"start"}):window.scrollTo({top:0,behavior:"smooth"})},ge=async()=>{!fe.value||!Number.isInteger(k.value)||(u.value=k.value-1,await de())},ke=async()=>{!pe.value||!Number.isInteger(k.value)||(u.value=k.value+1,await de())},ve=async()=>{const O=o.value?.trim();if(!O){a.error="No reference selected.",a.data=null;return}a.loading=!0,a.error="",s.expanded=!1,s.data=null,s.error="",s.currentChapter=null;try{const S=await Kt.getPassage(O);a.data=S;const j=Number.isInteger(S?.chapter)?S.chapter:S?.verses?.[0]?.chapter;u.value=Number.isInteger(j)?j:null}catch(S){a.error=S.message||"Unable to load passage",a.data=null,u.value=null}finally{a.loading=!1}},Se=async O=>{if(!a.data?.book||!Number.isInteger(O)){s.error="Chapter not available";return}s.loading=!0,s.error="";try{const S=await Kt.getChapter(a.data.book,O);s.data=S,s.expanded=!0,s.currentChapter=S?.chapter??O,Number.isInteger(s.currentChapter)&&(u.value=s.currentChapter)}catch(S){s.error=S.message||"Unable to load chapter",s.data=null,s.expanded=!1,s.currentChapter=null}finally{s.loading=!1}},Ee=async()=>{const O=Number.isInteger(u.value)?u.value:a.data?.chapter;Number.isInteger(O)&&await Se(O)},Le=()=>{s.expanded=!1,s.data=null,s.error="",s.currentChapter=null},I=async()=>{!F.value||!Number.isInteger(s.currentChapter)||(await Se(s.currentChapter-1),await de())},V=async()=>{!B.value||!Number.isInteger(s.currentChapter)||(await Se(s.currentChapter+1),await de())},R=()=>{o.value=typeof e.query.ref=="string"?e.query.ref:""};qt(()=>e.query.ref,async()=>{R(),o.value?await ve():(a.data=null,a.error="No reference selected.",u.value=null)});const q=()=>{if(x.value==="answer"){n.push({name:"main",query:{tab:"ask",restore:"answer"}});return}if(x.value==="study"){n.push({name:"main",query:{tab:"study"}});return}if(x.value==="reading-plan"){if(c.value){n.push({name:"reading-plan",params:{slug:c.value}});return}n.push({name:"main",query:{tab:"study"}});return}n.push({name:"main"})};return Vr(async()=>{if(!o.value){a.error="No reference selected.";return}await ve()}),(O,S)=>(X(),ne("div",{class:"reading-shell",ref_key:"readingShellRef",ref:r},[d("header",C4,[d("button",{type:"button",class:"link-button",onClick:q},le(P.value),1),h.value?(X(),ne("div",P4,[d("span",null,le(h.value),1)])):Re("",!0)]),d("section",I4,[d("header",E4,[d("div",null,[S[0]||(S[0]=d("p",{class:"card-label"},"Focused Passage",-1)),d("h1",null,le(h.value||"Select a reference"),1)]),d("div",R4,[!s.expanded&&!$.value?(X(),ne("button",{key:0,type:"button",class:"btn-secondary",disabled:s.loading||!ee.value,onClick:Ee},le(s.loading?"Loading…":"View full chapter"),9,F4)):s.expanded?(X(),ne("button",{key:1,type:"button",class:"btn-link",onClick:Le}," Hide chapter ")):Re("",!0)])]),a.error?(X(),ne("p",T4,le(a.error),1)):a.loading?(X(),ne("div",q4,"Loading passage…")):a.data?(X(),ne("div",M4,[re.value&&L.value?(X(),ne("h3",O4,le(a.data.book)+" "+le(k.value),1)):Re("",!0),(X(!0),ne(Pt,null,Ut(y.value,j=>(X(),ne("p",{key:j.reference,class:"verse-text"},[d("span",B4,le(Z(j)),1),Me(" "+le(j.text),1)]))),128))])):Re("",!0),oe.value?(X(),ne("div",j4,[d("button",{type:"button",class:"btn-secondary",disabled:!fe.value,onClick:ge}," ‹ Previous Chapter ",8,D4),d("span",$4," Chapter "+le(k.value||M.value.start)+" of "+le(M.value.end||k.value||M.value.start),1),d("button",{type:"button",class:"btn-secondary",disabled:!pe.value,onClick:ke}," Next Chapter › ",8,U4)])):a.data?Re("",!0):(X(),ne("p",z4,"Pick any topic reference to start reading."))]),s.expanded?(X(),ne("section",H4,[d("header",V4,[d("div",null,[S[1]||(S[1]=d("p",{class:"card-label"},"Full Chapter",-1)),d("h2",null,le(H.value),1)])]),s.error?(X(),ne("p",W4,le(s.error),1)):s.loading?(X(),ne("div",G4,"Loading chapter…")):s.data?(X(),ne("div",J4,[(X(!0),ne(Pt,null,Ut(s.data.verses,j=>(X(),ne("p",{key:`chapter-${j.reference}`,class:"verse-text"},[d("span",K4,le(Z(j)),1),Me(" "+le(j.text),1)]))),128))])):Re("",!0),ce.value?(X(),ne("div",Y4,[d("button",{type:"button",class:"btn-secondary",disabled:!F.value,onClick:I}," ‹ Previous Chapter ",8,Q4),d("span",X4," Chapter "+le(s.currentChapter)+" of "+le(M.value.end||s.currentChapter),1),d("button",{type:"button",class:"btn-secondary",disabled:!B.value,onClick:V}," Next Chapter › ",8,Z4)])):Re("",!0)])):Re("",!0)],512))}},t3=tn(e3,[["__scopeId","data-v-34c1bdd9"]]),n3={class:"reading-plan-view"},r3={class:"plan-header"},a3={class:"plan-switcher"},s3=["value"],i3={key:0,class:"plan-hero"},o3={class:"plan-hero__content"},l3={key:0,class:"plan-pill"},u3={key:1,class:"plan-status"},c3={key:2,class:"plan-status"},d3={class:"error-text"},h3={key:3,class:"plan-controls"},f3=["disabled"],p3={key:0,class:"control-hint"},v3={key:0},g3={key:1,class:"control-hint"},m3={class:"tracking-panel tracking-panel--compact"},b3={class:"tracking-cta-actions"},y3={key:0,class:"tracking-status"},w3={key:1,class:"tracking-panel__compact-body"},_3={key:0,class:"error-text"},k3={key:1,class:"tracking-summary-row"},x3={key:0},S3={key:1},A3={class:"tracking-compact-grid"},L3={class:"tracking-card tracking-card--select"},N3=["value"],C3={key:0,class:"tracking-card__actions"},P3=["disabled"],I3={key:1,class:"tracking-empty"},E3={class:"tracking-mini-fields"},R3=["disabled"],F3={key:4,class:"plan-schedule"},T3={class:"plan-schedule__header"},q3={key:0,class:"schedule-pagination"},M3=["disabled"],O3=["disabled"],B3={class:"schedule-list"},j3={class:"schedule-details"},D3={class:"schedule-secondary"},$3={key:0},U3={class:"schedule-meta"},z3={key:0,class:"completion-toggle"},H3=["checked","disabled","onChange"],V3={key:0},W3={key:1},G3=30,J3={__name:"ReadingPlanView",setup(t){const{isAuthenticated:e}=Gr(),n=Wr(),r=Gs(),a=Ae([]),s=Ae(typeof r.params.slug=="string"?r.params.slug:""),u=je(()=>a.value.find(Q=>Q.slug===s.value)||null),o=Q=>{const _={name:Q};return s.value&&(_.query={redirect:"reading-plan",planSlug:s.value}),_},c=je(()=>o("login")),h=je(()=>o("register")),f=Nr({loading:!1,error:"",detail:null,startDate:"",page:1}),m=()=>new Date().toISOString().slice(0,10),w=Q=>{if(!Q)return"";const _=typeof Q=="string"?new Date(Q):Q;return Number.isNaN(_?.getTime?.())?Q:_.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})},v=Q=>{if(!Q)return"Saved plan";const se=Q.nickname?.trim()||Q.plan?.name||`Plan #${Q.id}`,z=Q.plan?.metadata?.category==="annual"?"Annual":"Featured",Y=w(Q.start_date)||Q.start_date||"N/A";return`${se} · ${z} · Started ${Y}`},y=Nr({loading:!1,error:"",plans:[],selectedPlanId:null,detail:null,createNickname:"",createStartDate:m(),actionLoading:!1}),k=Ae(null),L=Ae(null),x=Ae(null),P=je(()=>y.plans.filter(Q=>Q.plan.slug===s.value)),H=je(()=>y.plans.length?[...y.plans].sort((Q,_)=>{const se=Q.start_date?new Date(Q.start_date).getTime():0,z=_.start_date?new Date(_.start_date).getTime():0;if(se!==z)return z-se;const Y=(Q.nickname||Q.plan?.name||"").toLowerCase(),ae=(_.nickname||_.plan?.name||"").toLowerCase();return Y.localeCompare(ae)}):[]),M=je(()=>y.plans.find(Q=>Q.id===y.selectedPlanId)||null),oe=je(()=>y.detail&&y.detail.id===y.selectedPlanId?y.detail:null),fe=async()=>{try{a.value=await Hs.listReadingPlans(),!s.value&&a.value.length&&n.replace({name:"reading-plan",params:{slug:a.value[0].slug}})}catch(Q){console.error("Unable to load reading plans list",Q)}},pe=async Q=>{if(!Q){f.detail=null;return}f.loading=!0,f.error="";try{const _=u.value?.duration_days;let se=await Hs.getReadingPlan(Q,{startDate:f.startDate||void 0,days:_});const z=se?.plan?.duration_days;!_&&z&&se?.schedule?.length&&se.schedule.length<z&&(se=await Hs.getReadingPlan(Q,{startDate:f.startDate||void 0,days:z})),f.detail=se}catch(_){f.detail=null,f.error=_?.response?.data?.detail||"Unable to load plan detail"}finally{f.loading=!1}},re=(Q={})=>{y.selectedPlanId=null,y.detail=null,Q.keepPending||(k.value=null)},$=async()=>{if(!e.value||!s.value){y.plans=[],re();return}y.loading=!0,y.error="";try{y.plans=await cs.listPlans(),await F()}catch(Q){y.error=Q?.response?.data?.detail||"Unable to load your reading plans"}finally{y.loading=!1}},ce=async Q=>{if(!Q){y.detail=null;return}try{y.detail=await cs.getPlanDetail(Q)}catch(_){console.error("Unable to fetch tracked plan detail",_)}},F=async()=>{if(!y.plans.length){re();return}if(k.value){if(y.plans.some(se=>se.id===k.value)){y.selectedPlanId=k.value,k.value=null,await ce(y.selectedPlanId);return}k.value=null}const Q=P.value;if(!Q.length){y.selectedPlanId&&!y.plans.some(_=>_.id===y.selectedPlanId)&&re();return}Q.some(_=>_.id===y.selectedPlanId)||(y.selectedPlanId=Q[0].id),y.selectedPlanId&&await ce(y.selectedPlanId)},B=async()=>{f.error="",await pe(s.value)},ee=()=>{s.value&&(f.startDate="",f.page=1,y.createStartDate=m(),re(),n.push({name:"reading-plan",params:{slug:s.value}}))},Z=async()=>{if(!y.selectedPlanId){y.detail=null;return}await ce(y.selectedPlanId);const _=M.value?.plan?.slug;_&&_!==s.value?(k.value=y.selectedPlanId,n.push({name:"reading-plan",params:{slug:_}})):k.value=null},de=()=>{s.value&&(f.page=1,pe(s.value))},ge=async()=>{if(s.value){y.actionLoading=!0,y.error="";try{await cs.startPlan({planSlug:s.value,startDate:y.createStartDate,nickname:y.createNickname?.trim()||void 0}),y.createNickname="",y.createStartDate=m(),await $()}catch(Q){y.error=Q?.response?.data?.detail||"Unable to start this plan"}finally{y.actionLoading=!1}}},ke=async(Q,_)=>{if(!(!y.selectedPlanId||L.value===Q)){L.value=Q;try{const se=await cs.updateDayCompletion(y.selectedPlanId,Q,_);if(y.detail?.schedule){const z=y.detail.schedule.find(Y=>Y.day_number===Q);z&&(z.is_complete=se.is_complete,z.completed_at=se.completed_at),y.detail.completed_days=se.completed_days,y.detail.percent_complete=se.percent_complete,y.detail.total_days=se.total_days,y.detail.completed_at=se.plan_completed_at}y.plans=y.plans.map(z=>z.id===y.selectedPlanId?{...z,completed_days:se.completed_days,percent_complete:se.percent_complete,completed_at:se.plan_completed_at}:z)}catch(se){console.error("Unable to update completion",se)}finally{L.value=null}}},ve=async()=>{if(!(!y.selectedPlanId||x.value||!window.confirm("Delete this saved plan? Your completion history for it will be removed."))){x.value=y.selectedPlanId,y.error="";try{await cs.deletePlan(y.selectedPlanId),await $()}catch(_){y.error=_?.response?.data?.detail||"Unable to delete this plan"}finally{x.value=null}}},Se=je(()=>f.detail?.plan?.metadata?.category==="annual"),Ee=je(()=>Se.value?"Annual Journey":null),Le=je(()=>oe.value?.schedule||f.detail?.schedule||[]);je(()=>{if(Le.value.length)return Le.value.length;const Q=f.detail?.plan?.steps?.length;return Q||f.detail?.schedule?.length||null});const I=je(()=>{const Q=f.detail?.plan?.duration_days||u.value?.duration_days||30;return Se.value?G3:Math.max(1,Math.min(30,Q))}),V=je(()=>{const Q=Le.value.length;return Q?Math.max(1,Math.ceil(Q/I.value)):1}),R=je(()=>Se.value?{prev:"‹ Previous Month",next:"Next Month ›"}:{prev:"‹ Prev",next:"Next ›"}),q=je(()=>{if(!Le.value.length)return[];const Q=(f.page-1)*I.value;return Le.value.slice(Q,Q+I.value)}),O=je(()=>{const Q=(f.page-1)*I.value+1,_=Math.min(f.page*I.value,Le.value.length||0);return Se.value?`Month ${f.page} (Days ${Q}–${_})`:`Days ${Q}–${_}`}),S=()=>{f.page<=1||(f.page-=1)},j=()=>{f.page>=V.value||(f.page+=1)},C=()=>{const Q={tab:"study"};s.value&&(Q.plan=s.value),n.push({name:"main",query:Q})},J=(Q,_="reading-plan")=>{const se=typeof Q=="string"?Q.trim():"";if(!se)return;const Y=Jo(se)?.reference||se,ae={ref:Y};_&&(ae.source=_),s.value&&(ae.plan=s.value),Ti(Y)&&(ae.fullChapter="1"),n.push({name:"reading",query:ae})},te=je(()=>e.value&&!!oe.value),_e=Q=>oe.value?.schedule?!!oe.value.schedule.find(_=>_.day_number===Q)?.is_complete:!1,be=Q=>{if(!oe.value?.schedule)return null;const _=oe.value.schedule.find(se=>se.day_number===Q);return _?.completed_at?w(_.completed_at):null};return qt(()=>r.params.slug,Q=>{const _=typeof Q=="string"?Q:"";s.value=_,f.startDate="",f.page=1,y.createStartDate=m(),re({keepPending:!!k.value}),_&&pe(_)},{immediate:!0}),qt(()=>Le.value.length,()=>{f.page=1}),qt(V,Q=>{f.page>Q&&(f.page=Q||1)}),qt(()=>({authed:e.value,slug:s.value}),({authed:Q,slug:_})=>{Q&&_?$():(y.plans=[],re())},{immediate:!0}),Vr(async()=>{await fe()}),(Q,_)=>{const se=ya("router-link");return X(),ne("div",n3,[d("header",r3,[d("button",{type:"button",class:"link-button",onClick:C},"← Back to Study Tools"),d("label",a3,[_[7]||(_[7]=d("span",null,"Open another plan",-1)),en(d("select",{"onUpdate:modelValue":_[0]||(_[0]=z=>s.value=z),onChange:ee},[_[6]||(_[6]=d("option",{value:"",disabled:""},"Select a plan",-1)),(X(!0),ne(Pt,null,Ut(a.value,z=>(X(),ne("option",{key:z.slug,value:z.slug},le(z.name),9,s3))),128))],544),[[$o,s.value]])])]),f.detail?(X(),ne("section",i3,[d("div",o3,[Ee.value?(X(),ne("span",l3,le(Ee.value),1)):Re("",!0),d("h1",null,le(f.detail.plan.name),1),d("p",null,[Me(le(f.detail.plan.description)+" This plan is ",1),d("strong",null,le(f.detail.plan.duration_days)+" days.",1)])])])):f.loading?(X(),ne("section",u3,_[8]||(_[8]=[d("p",null,"Loading reading plan…",-1)]))):f.error?(X(),ne("section",c3,[d("p",d3,le(f.error),1),d("button",{class:"btn-secondary",type:"button",onClick:B},"Try Again")])):Re("",!0),f.detail?(X(),ne("section",h3,[d("div",{class:Ze(["control-form",{"control-form--disabled":!!oe.value}])},[d("label",null,[_[9]||(_[9]=d("span",null,"Preview Start Date",-1)),en(d("input",{"onUpdate:modelValue":_[1]||(_[1]=z=>f.startDate=z),type:"date",onChange:de,disabled:!!oe.value},null,40,f3),[[sr,f.startDate]])]),oe.value?(X(),ne("p",p3,[_[10]||(_[10]=Me(" Start date follows your tracked plan ",-1)),M.value?.start_date?(X(),ne("span",v3," ("+le(w(M.value.start_date)||M.value.start_date)+") ",1)):Re("",!0),_[11]||(_[11]=Me(". ",-1)),d("button",{type:"button",class:"link-button link-button--inline",onClick:re}," Preview without tracking ")])):(X(),ne("p",g3,"We’ll schedule each day starting from your chosen date.")),_[12]||(_[12]=d("div",{class:"tracking-instructions"},[d("p",null,"How tracking works:"),d("ul",null,[d("li",null,"Select a start date to preview the full schedule."),d("li",null,"Use the panel on the right to save the plan to your account."),d("li",null,"Once saved, mark days complete directly in the schedule.")])],-1))],2),d("div",m3,[_[23]||(_[23]=d("div",{class:"tracking-panel__header"},[d("div",null,[d("p",{class:"tracking-eyebrow"},"Tracking"),d("h3",null,"Stay on track")]),d("p",{class:"tracking-subtitle"},"Save progress without leaving the schedule.")],-1)),tt(e)?(X(),ne(Pt,{key:1},[y.loading?(X(),ne("div",y3,"Loading your plans…")):(X(),ne("div",w3,[y.error?(X(),ne("p",_3,le(y.error),1)):Re("",!0),M.value?(X(),ne("div",k3,[d("div",null,[_[16]||(_[16]=d("span",{class:"tracking-label"},"Progress",-1)),d("strong",null,le(M.value.completed_days)+" / "+le(M.value.total_days),1)]),d("div",null,[_[17]||(_[17]=d("span",{class:"tracking-label"},"Percent",-1)),d("strong",null,le(M.value.percent_complete)+"%",1)]),M.value.start_date?(X(),ne("div",x3,[_[18]||(_[18]=d("span",{class:"tracking-label"},"Started",-1)),d("span",null,le(w(M.value.start_date)||M.value.start_date),1)])):Re("",!0),M.value.completed_at?(X(),ne("div",S3,[_[19]||(_[19]=d("span",{class:"tracking-label"},"Finished",-1)),d("span",null,le(w(M.value.completed_at)),1)])):Re("",!0)])):Re("",!0),d("div",A3,[d("div",L3,[H.value.length?(X(),ne(Pt,{key:0},[d("label",null,[_[20]||(_[20]=d("span",null,"Your tracked plans",-1)),en(d("select",{"onUpdate:modelValue":_[2]||(_[2]=z=>y.selectedPlanId=z),onChange:Z},[(X(!0),ne(Pt,null,Ut(H.value,z=>(X(),ne("option",{key:z.id,value:z.id},le(v(z)),9,N3))),128))],544),[[$o,y.selectedPlanId,void 0,{number:!0}]])]),y.selectedPlanId?(X(),ne("div",C3,[d("button",{type:"button",class:"link-button link-button--danger",disabled:x.value===y.selectedPlanId,onClick:ve},le(x.value===y.selectedPlanId?"Deleting…":"Delete this saved plan"),9,P3)])):Re("",!0)],64)):(X(),ne("p",I3,"No saved plans yet."))]),d("form",{class:"tracking-card tracking-card--create",onSubmit:Vn(ge,["prevent"])},[d("div",E3,[d("label",null,[_[21]||(_[21]=d("span",null,"Start Date",-1)),en(d("input",{type:"date","onUpdate:modelValue":_[3]||(_[3]=z=>y.createStartDate=z),required:""},null,512),[[sr,y.createStartDate]])]),d("label",null,[_[22]||(_[22]=d("span",null,"Nickname",-1)),en(d("input",{type:"text","onUpdate:modelValue":_[4]||(_[4]=z=>y.createNickname=z),maxlength:"100",placeholder:"Optional"},null,512),[[sr,y.createNickname]])])]),d("button",{class:"btn-primary",type:"submit",disabled:y.actionLoading},le(P.value.length?"Start another plan":"Start tracking this plan"),9,R3)],32)])]))],64)):(X(),ne(Pt,{key:0},[_[15]||(_[15]=d("p",{class:"tracking-cta-text"}," Create a free account to save this reading plan and mark days complete. ",-1)),d("div",b3,[st(se,{class:"btn-primary",to:h.value},{default:St(()=>_[13]||(_[13]=[Me("Create Account",-1)])),_:1,__:[13]},8,["to"]),st(se,{class:"btn-secondary",to:c.value},{default:St(()=>_[14]||(_[14]=[Me("Log In",-1)])),_:1,__:[14]},8,["to"])])],64))])])):Re("",!0),f.detail?(X(),ne("section",F3,[d("header",T3,[_[24]||(_[24]=d("div",null,[d("h2",null,"Schedule Preview"),d("p",null,"Click any passage to open it inside Reading View.")],-1)),V.value>1?(X(),ne("div",q3,[d("button",{type:"button",class:"btn-secondary",onClick:S,disabled:f.page===1},le(R.value.prev),9,M3),d("span",null,le(O.value)+" · Page "+le(f.page)+" of "+le(V.value),1),d("button",{type:"button",class:"btn-secondary",onClick:j,disabled:f.page===V.value},le(R.value.next),9,O3)])):Re("",!0)]),d("ul",B3,[(X(!0),ne(Pt,null,Ut(q.value,z=>(X(),ne("li",{key:z.day_number,class:Ze({"schedule-completed":_e(z.day_number)})},[d("div",j3,[d("strong",null,"Day "+le(z.day_number)+" – "+le(z.title),1),d("div",D3,[st(fs,{text:z.passage,"wrapper-class":"reference-link-wrapper","text-class":"reference-link-text","read-link-text":"Open in Reading View →","enable-reference-click":"","allow-book-only":!0,"navigation-source":"reading-plan",onReferenceClick:_[5]||(_[5]=Y=>J(Y,"reading-plan"))},null,8,["text"]),z.notes?(X(),ne("small",$3,le(z.notes),1)):Re("",!0)])]),d("div",U3,[te.value?(X(),ne("div",z3,[d("label",null,[d("input",{type:"checkbox",checked:_e(z.day_number),disabled:L.value===z.day_number,onChange:Y=>ke(z.day_number,Y.target.checked)},null,40,H3),d("span",null,le(_e(z.day_number)?"Completed":"Mark complete"),1)]),be(z.day_number)?(X(),ne("small",V3," Finished "+le(be(z.day_number)),1)):Re("",!0)])):Re("",!0),z.scheduled_date?(X(),ne("span",W3,le(z.scheduled_date),1)):Re("",!0)])],2))),128))])])):Re("",!0)])}}},K3=tn(J3,[["__scopeId","data-v-1b1c1d9a"]]),Y3={class:"admin-dashboard"},Q3={class:"dashboard-header"},X3={class:"tabs"},Z3={key:0,class:"error-banner"},ew={key:1,class:"tab-content"},tw={class:"stats-grid"},nw={class:"stat-card"},rw={class:"stat-value"},aw={class:"stat-card"},sw={class:"stat-value"},iw={class:"stat-card"},ow={class:"stat-value success"},lw={class:"stat-percentage"},uw={class:"stat-card"},cw={class:"stat-value error"},dw={class:"stat-card"},hw={class:"stat-value"},fw={key:2,class:"tab-content"},pw={class:"filters"},vw={class:"table-container"},gw={class:"logs-table"},mw={class:"endpoint-cell"},bw={key:0,class:"empty-state"},yw={class:"pagination"},ww=["disabled"],_w={class:"page-info"},kw=["disabled"],xw={key:3,class:"tab-content"},Sw={class:"table-container"},Aw={class:"endpoints-table"},Lw={class:"endpoint-cell"},Nw={class:"progress-bar"},Cw={class:"progress-text"},Pw={key:0,class:"empty-state"},Iw={key:4,class:"tab-content"},Ew={class:"stats-grid"},Rw={class:"stat-card"},Fw={class:"stat-value"},Tw={class:"stat-card"},qw={class:"stat-value"},Mw={class:"stat-percentage"},Ow={class:"stat-card"},Bw={class:"stat-value"},jw={class:"stat-card"},Dw={class:"stat-value"},$w={class:"stat-card"},Uw={class:"stat-value success"},zw={class:"table-container"},Hw={key:0,class:"empty-state"},Vw={class:"table-container"},Ww={class:"question-cell"},Gw={key:0,class:"empty-state"},Jw={key:5,class:"tab-content"},Kw={class:"stats-grid"},Yw={class:"stat-card"},Qw={class:"stat-value"},Xw={class:"stat-card"},Zw={class:"stat-value success"},e6={class:"stat-card"},t6={class:"stat-value"},n6={class:"stat-card"},r6={class:"stat-value"},a6={class:"stat-card"},s6={class:"stat-value"},i6={class:"filters",style:{"margin-top":"2rem"}},o6={class:"checkbox-label"},l6={class:"table-container"},u6={class:"users-table"},c6={key:0,class:"guest-badge",title:"Guest User"},d6={key:0,class:"admin-badge"},h6={class:"action-buttons"},f6=["onClick"],p6=["onClick"],v6=["onClick"],g6=["onClick"],m6={key:0,class:"empty-state"},b6={class:"pagination"},y6=["disabled"],w6={class:"page-info"},_6=["disabled"],k6={key:0,class:"modal-body"},x6={class:"detail-grid"},S6={class:"detail-item"},A6={class:"detail-item"},L6={class:"detail-item"},N6={class:"detail-item"},C6={class:"detail-item"},P6={class:"detail-item"},I6={class:"detail-item"},E6={class:"detail-item"},R6={class:"detail-item"},F6={class:"detail-item"},T6={class:"detail-item"},q6={class:"detail-item"},M6={class:"modal-actions"},O6={__name:"AdminDashboard",setup(t){const e=Ae("stats"),n=Ae(""),r=Ae({}),a=Ae([]),s=Ae([]),u=Ae({}),o=Ae([]),c=Ae([]),h=Ae(1),f=Ae(50),m=Ae({}),w=Ae([]),v=Ae(""),y=Ae(!1),k=Ae(1),L=Ae(50),x=Ae(!1),P=Ae(null),H=Ae({endpoint:"",status_code:"",user_id:null});let M=null;const oe=async()=>{try{n.value="";const z=await Kt.getApiStats();r.value=z}catch(z){n.value="Failed to load statistics: "+z.message}},fe=async()=>{try{n.value="";const z={limit:f.value,offset:(h.value-1)*f.value};H.value.endpoint&&(z.endpoint=H.value.endpoint),H.value.status_code&&(z.status_code=parseInt(H.value.status_code)),H.value.user_id&&(z.user_id=parseInt(H.value.user_id));const Y=await Kt.getApiLogs(z);a.value=Y.logs||[]}catch(z){n.value="Failed to load logs: "+z.message}},pe=async()=>{try{n.value="";const z=await Kt.getEndpointStats({limit:20});s.value=z.endpoints||[]}catch(z){n.value="Failed to load endpoint stats: "+z.message}},re=()=>{clearTimeout(M),M=setTimeout(()=>{h.value=1,fe()},300)},$=()=>{H.value={endpoint:"",status_code:"",user_id:null},h.value=1,fe()},ce=()=>{h.value>1&&(h.value--,fe())},F=()=>{h.value++,fe()},B=z=>z?new Date(z).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",ee=z=>z>=200&&z<300?"success":z>=400&&z<500?"client-error":z>=500?"server-error":"",Z=()=>r.value.total_requests?(r.value.successful_requests/r.value.total_requests*100).toFixed(1):0,de=async()=>{try{n.value="";const z=await Kt.getOpenAIStats();u.value=z}catch(z){n.value="Failed to load OpenAI stats: "+z.message}},ge=async()=>{try{n.value="";const z=await Kt.getOpenAICalls({limit:50});o.value=z.calls||[]}catch(z){n.value="Failed to load OpenAI calls: "+z.message}},ke=async()=>{try{n.value="";const z=await Kt.getOpenAIUserUsage({limit:10});c.value=z.users||[]}catch(z){n.value="Failed to load OpenAI user usage: "+z.message}},ve=()=>{e.value="openai",de(),ge(),ke()},Se=()=>u.value.total_calls?(u.value.successful_calls/u.value.total_calls*100).toFixed(1):0,Ee=z=>new Intl.NumberFormat().format(z),Le=z=>(z/1e6*5).toFixed(2),I=(z,Y)=>z?z.length>Y?z.substring(0,Y)+"...":z:"N/A",V=async()=>{try{n.value="";const z=await Kt.getUserStats();m.value=z}catch(z){n.value="Failed to load user stats: "+z.message}},R=async()=>{try{n.value="";const z={limit:L.value,offset:(k.value-1)*L.value};v.value&&(z.search=v.value),y.value&&(z.active_only=!0);const Y=await Kt.listUsers(z);w.value=Y||[]}catch(z){n.value="Failed to load users: "+z.message}},q=()=>{clearTimeout(M),M=setTimeout(()=>{k.value=1,R()},300)},O=()=>{v.value="",y.value=!1,k.value=1,R()},S=()=>{k.value>1&&(k.value--,R())},j=()=>{k.value++,R()},C=async z=>{try{n.value="";const Y=await Kt.getUserDetail(z);P.value=Y,x.value=!0}catch(Y){n.value="Failed to load user details: "+Y.message}},J=()=>{x.value=!1,P.value=null},te=async z=>{if(confirm("Are you sure you want to toggle this user's active status?"))try{n.value="",await Kt.toggleUserActive(z),await R(),await V()}catch(Y){n.value="Failed to toggle user active status: "+Y.message}},_e=async z=>{if(confirm("Are you sure you want to clear all saved answers for this user?"))try{n.value="";const Y=await Kt.clearUserSavedAnswers(z);alert(Y.message),x.value&&P.value?.id===z&&await C(z),await R()}catch(Y){n.value="Failed to clear saved answers: "+Y.message}},be=async z=>{if(prompt(`This will delete ALL data for user ${z.email||z.username} (${z.question_count} questions, ${z.saved_answer_count} saved answers).

Type "RESET" to confirm:`)==="RESET")try{n.value="";const ae=await Kt.resetUserAccount(z.id);alert("Account reset successfully"),J(),await R(),await V()}catch(ae){n.value="Failed to reset account: "+ae.message}},Q=async z=>{if(prompt(`This will PERMANENTLY DELETE user ${z.email||z.username} and all their data.

This action CANNOT be undone.

Type "DELETE" to confirm:`)==="DELETE")try{n.value="",await Kt.deleteUser(z.id),alert("User permanently deleted"),J(),await R(),await V()}catch(ae){n.value="Failed to delete user: "+ae.message}},_=()=>{e.value="users",V(),R()},se=async()=>{if(confirm(`This will permanently delete all guest user accounts except user_id=1.

This includes users without email addresses that may have been created by mistake.

Continue?`))try{n.value="";const z=await Kt.cleanupGuestUsers();alert(`${z.message}

Deleted: ${z.deleted_count} user(s)`),await R(),await V()}catch(z){n.value="Failed to cleanup guest users: "+z.message}};return Vr(()=>{oe(),fe(),pe()}),(z,Y)=>(X(),ne("div",Y3,[d("div",Q3,[Y[11]||(Y[11]=d("h1",null,"Admin Dashboard",-1)),d("button",{onClick:Y[0]||(Y[0]=ae=>z.$router.push("/")),class:"back-button"},"← Back to App")]),d("div",X3,[d("button",{class:Ze({active:e.value==="stats"}),onClick:Y[1]||(Y[1]=ae=>e.value="stats")}," Statistics ",2),d("button",{class:Ze({active:e.value==="logs"}),onClick:Y[2]||(Y[2]=ae=>e.value="logs")}," API Logs ",2),d("button",{class:Ze({active:e.value==="endpoints"}),onClick:Y[3]||(Y[3]=ae=>e.value="endpoints")}," Endpoints ",2),d("button",{class:Ze({active:e.value==="openai"}),onClick:ve}," OpenAI Usage ",2),d("button",{class:Ze({active:e.value==="users"}),onClick:_}," Users ",2)]),n.value?(X(),ne("div",Z3,le(n.value),1)):Re("",!0),e.value==="stats"?(X(),ne("div",ew,[d("div",tw,[d("div",nw,[Y[12]||(Y[12]=d("h3",null,"Total Requests",-1)),d("div",rw,le(r.value.total_requests||0),1)]),d("div",aw,[Y[13]||(Y[13]=d("h3",null,"Unique Users",-1)),d("div",sw,le(r.value.unique_users||0),1)]),d("div",iw,[Y[14]||(Y[14]=d("h3",null,"Successful Requests",-1)),d("div",ow,le(r.value.successful_requests||0),1),d("div",lw,le(Z())+"% ",1)]),d("div",uw,[Y[15]||(Y[15]=d("h3",null,"Error Requests",-1)),d("div",cw,le(r.value.error_requests||0),1)]),d("div",dw,[Y[16]||(Y[16]=d("h3",null,"OpenAI Requests",-1)),d("div",hw,le(r.value.openai_requests||0),1)])])])):Re("",!0),e.value==="logs"?(X(),ne("div",fw,[d("div",pw,[en(d("input",{"onUpdate:modelValue":Y[4]||(Y[4]=ae=>H.value.endpoint=ae),placeholder:"Filter by endpoint",onInput:re},null,544),[[sr,H.value.endpoint]]),en(d("select",{"onUpdate:modelValue":Y[5]||(Y[5]=ae=>H.value.status_code=ae),onChange:fe},Y[17]||(Y[17]=[ar('<option value="" data-v-7d0b787d>All Status Codes</option><option value="200" data-v-7d0b787d>200 - Success</option><option value="400" data-v-7d0b787d>400 - Bad Request</option><option value="401" data-v-7d0b787d>401 - Unauthorized</option><option value="404" data-v-7d0b787d>404 - Not Found</option><option value="500" data-v-7d0b787d>500 - Server Error</option>',6)]),544),[[$o,H.value.status_code]]),d("button",{onClick:$,class:"btn-secondary"},"Reset")]),d("div",vw,[d("table",gw,[Y[18]||(Y[18]=d("thead",null,[d("tr",null,[d("th",null,"Timestamp"),d("th",null,"User ID"),d("th",null,"Endpoint"),d("th",null,"Method"),d("th",null,"Status"),d("th",null,"IP")])],-1)),d("tbody",null,[(X(!0),ne(Pt,null,Ut(a.value,ae=>(X(),ne("tr",{key:ae.id},[d("td",null,le(B(ae.timestamp)),1),d("td",null,le(ae.user_id||"Guest"),1),d("td",mw,le(ae.endpoint),1),d("td",null,[d("span",{class:Ze(["method-badge",ae.method.toLowerCase()])},le(ae.method),3)]),d("td",null,[d("span",{class:Ze(["status-badge",ee(ae.status_code)])},le(ae.status_code),3)]),d("td",null,le(ae.ip_address),1)]))),128))])]),a.value.length===0?(X(),ne("div",bw," No logs found ")):Re("",!0)]),d("div",yw,[d("button",{onClick:ce,disabled:h.value===1,class:"btn-secondary"}," Previous ",8,ww),d("span",_w,"Page "+le(h.value),1),d("button",{onClick:F,disabled:a.value.length<f.value,class:"btn-secondary"}," Next ",8,kw)])])):Re("",!0),e.value==="endpoints"?(X(),ne("div",xw,[Y[20]||(Y[20]=d("h2",null,"Top Endpoints by Request Count",-1)),d("div",Sw,[d("table",Aw,[Y[19]||(Y[19]=d("thead",null,[d("tr",null,[d("th",null,"Endpoint"),d("th",null,"Request Count"),d("th",null,"Success Rate")])],-1)),d("tbody",null,[(X(!0),ne(Pt,null,Ut(s.value,ae=>(X(),ne("tr",{key:ae.endpoint},[d("td",Lw,le(ae.endpoint),1),d("td",null,le(ae.request_count),1),d("td",null,[d("div",Nw,[d("div",{class:"progress-fill",style:yu({width:ae.success_rate+"%"})},null,4),d("span",Cw,le(ae.success_rate.toFixed(1))+"%",1)])])]))),128))])]),s.value.length===0?(X(),ne("div",Pw," No endpoint data available ")):Re("",!0)])])):Re("",!0),e.value==="openai"?(X(),ne("div",Iw,[Y[28]||(Y[28]=d("h2",null,"OpenAI API Usage",-1)),d("div",Ew,[d("div",Rw,[Y[21]||(Y[21]=d("h3",null,"Total API Calls",-1)),d("div",Fw,le(u.value.total_calls||0),1)]),d("div",Tw,[Y[22]||(Y[22]=d("h3",null,"Total Tokens Used",-1)),d("div",qw,le(Ee(u.value.total_tokens_used||0)),1),d("div",Mw,"~$"+le(Le(u.value.total_tokens_used)),1)]),d("div",Ow,[Y[23]||(Y[23]=d("h3",null,"Avg Tokens/Call",-1)),d("div",Bw,le(Math.round(u.value.avg_tokens_per_call||0)),1)]),d("div",jw,[Y[24]||(Y[24]=d("h3",null,"Avg Response Time",-1)),d("div",Dw,le(Math.round(u.value.avg_response_time_ms||0))+"ms",1)]),d("div",$w,[Y[25]||(Y[25]=d("h3",null,"Success Rate",-1)),d("div",Uw,le(Se())+"%",1)])]),Y[29]||(Y[29]=d("h3",{style:{"margin-top":"2rem","margin-bottom":"1rem"}},"Top Users by Token Usage",-1)),d("div",zw,[d("table",null,[Y[26]||(Y[26]=d("thead",null,[d("tr",null,[d("th",null,"User ID"),d("th",null,"Total Calls"),d("th",null,"Total Tokens"),d("th",null,"Avg Tokens/Call"),d("th",null,"Est. Cost"),d("th",null,"Last Call")])],-1)),d("tbody",null,[(X(!0),ne(Pt,null,Ut(c.value,ae=>(X(),ne("tr",{key:ae.user_id},[d("td",null,le(ae.user_id),1),d("td",null,le(ae.call_count),1),d("td",null,le(Ee(ae.total_tokens)),1),d("td",null,le(Math.round(ae.avg_tokens_per_call)),1),d("td",null,"$"+le(Le(ae.total_tokens)),1),d("td",null,le(B(ae.last_call)),1)]))),128))])]),c.value.length===0?(X(),ne("div",Hw," No user data available ")):Re("",!0)]),Y[30]||(Y[30]=d("h3",{style:{"margin-top":"2rem","margin-bottom":"1rem"}},"Recent OpenAI API Calls",-1)),d("div",Vw,[d("table",null,[Y[27]||(Y[27]=d("thead",null,[d("tr",null,[d("th",null,"Timestamp"),d("th",null,"User ID"),d("th",null,"Question"),d("th",null,"Total Tokens"),d("th",null,"Response Time"),d("th",null,"Status")])],-1)),d("tbody",null,[(X(!0),ne(Pt,null,Ut(o.value,ae=>(X(),ne("tr",{key:ae.id},[d("td",null,le(B(ae.timestamp)),1),d("td",null,le(ae.user_id||"Guest"),1),d("td",Ww,le(I(ae.question,50)),1),d("td",null,le(ae.total_tokens),1),d("td",null,le(ae.response_time_ms)+"ms",1),d("td",null,[d("span",{class:Ze(["status-badge",ae.status])},le(ae.status),3)])]))),128))])]),o.value.length===0?(X(),ne("div",Gw," No OpenAI calls logged yet ")):Re("",!0)])])):Re("",!0),e.value==="users"?(X(),ne("div",Jw,[Y[38]||(Y[38]=d("h2",null,"User Management",-1)),d("div",Kw,[d("div",Yw,[Y[31]||(Y[31]=d("h3",null,"Total Users",-1)),d("div",Qw,le(m.value.total_users||0),1)]),d("div",Xw,[Y[32]||(Y[32]=d("h3",null,"Active Users",-1)),d("div",Zw,le(m.value.active_users||0),1)]),d("div",e6,[Y[33]||(Y[33]=d("h3",null,"Admin Users",-1)),d("div",t6,le(m.value.admin_users||0),1)]),d("div",n6,[Y[34]||(Y[34]=d("h3",null,"Guest Users",-1)),d("div",r6,le(m.value.guest_users||0),1)]),d("div",a6,[Y[35]||(Y[35]=d("h3",null,"Users with Questions",-1)),d("div",s6,le(m.value.users_with_questions||0),1)])]),d("div",i6,[en(d("input",{"onUpdate:modelValue":Y[6]||(Y[6]=ae=>v.value=ae),placeholder:"Search by email or username",onInput:q},null,544),[[sr,v.value]]),d("label",o6,[en(d("input",{type:"checkbox","onUpdate:modelValue":Y[7]||(Y[7]=ae=>y.value=ae),onChange:R},null,544),[[Gh,y.value]]),Y[36]||(Y[36]=Me(" Active users only ",-1))]),d("button",{onClick:O,class:"btn-secondary"},"Reset"),d("button",{onClick:se,class:"btn-warning",title:"Remove invalid guest user accounts"}," 🧹 Cleanup Guests ")]),d("div",l6,[d("table",u6,[Y[37]||(Y[37]=d("thead",null,[d("tr",null,[d("th",null,"ID"),d("th",null,"Email"),d("th",null,"Username"),d("th",null,"Status"),d("th",null,"IP Address"),d("th",null,"Questions"),d("th",null,"Saved Answers"),d("th",null,"Last Activity"),d("th",null,"Created At"),d("th",null,"Actions")])],-1)),d("tbody",null,[(X(!0),ne(Pt,null,Ut(w.value,ae=>(X(),ne("tr",{key:ae.id},[d("td",null,le(ae.id),1),d("td",null,le(ae.email||"N/A"),1),d("td",null,[Me(le(ae.username||"N/A")+" ",1),ae.is_guest?(X(),ne("span",c6,"👤")):Re("",!0)]),d("td",null,[d("span",{class:Ze(["status-badge",ae.is_active?"success":"inactive"])},le(ae.is_active?"Active":"Inactive"),3),ae.is_admin?(X(),ne("span",d6,"Admin")):Re("",!0)]),d("td",null,le(ae.last_ip_address||"N/A"),1),d("td",null,le(ae.question_count),1),d("td",null,le(ae.saved_answer_count),1),d("td",null,le(B(ae.last_activity)||"Never"),1),d("td",null,le(B(ae.created_at)),1),d("td",null,[d("div",h6,[d("button",{onClick:Oe=>C(ae.id),class:"btn-small",title:"View Details"}," 👁️ ",8,f6),d("button",{onClick:Oe=>te(ae.id),class:"btn-small",title:"Toggle Active"},le(ae.is_active?"🚫":"✅"),9,p6),d("button",{onClick:Oe=>be(ae),class:"btn-small btn-warning",title:"Reset Account"}," 🔄 ",8,v6),d("button",{onClick:Oe=>Q(ae),class:"btn-small btn-danger",title:"Delete User"}," 🗑️ ",8,g6)])])]))),128))])]),w.value.length===0?(X(),ne("div",m6," No users found ")):Re("",!0)]),d("div",b6,[d("button",{onClick:S,disabled:k.value===1,class:"btn-secondary"}," Previous ",8,y6),d("span",w6,"Page "+le(k.value),1),d("button",{onClick:j,disabled:w.value.length<L.value,class:"btn-secondary"}," Next ",8,_6)])])):Re("",!0),x.value?(X(),ne("div",{key:6,class:"modal-overlay",onClick:J},[d("div",{class:"modal-content",onClick:Y[10]||(Y[10]=Vn(()=>{},["stop"]))},[d("div",{class:"modal-header"},[Y[39]||(Y[39]=d("h2",null,"User Details",-1)),d("button",{onClick:J,class:"close-button"},"×")]),P.value?(X(),ne("div",k6,[d("div",x6,[d("div",S6,[Y[40]||(Y[40]=d("strong",null,"ID:",-1)),Me(" "+le(P.value.id),1)]),d("div",A6,[Y[41]||(Y[41]=d("strong",null,"Email:",-1)),Me(" "+le(P.value.email||"N/A"),1)]),d("div",L6,[Y[42]||(Y[42]=d("strong",null,"Username:",-1)),Me(" "+le(P.value.username||"N/A"),1)]),d("div",N6,[Y[43]||(Y[43]=d("strong",null,"Status:",-1)),d("span",{class:Ze(P.value.is_active?"text-success":"text-inactive")},le(P.value.is_active?"Active":"Inactive"),3)]),d("div",C6,[Y[44]||(Y[44]=d("strong",null,"Admin:",-1)),Me(" "+le(P.value.is_admin?"Yes":"No"),1)]),d("div",P6,[Y[45]||(Y[45]=d("strong",null,"Guest:",-1)),Me(" "+le(P.value.is_guest?"Yes":"No"),1)]),d("div",I6,[Y[46]||(Y[46]=d("strong",null,"IP Address:",-1)),Me(" "+le(P.value.last_ip_address||"N/A"),1)]),d("div",E6,[Y[47]||(Y[47]=d("strong",null,"Created:",-1)),Me(" "+le(B(P.value.created_at)),1)]),d("div",R6,[Y[48]||(Y[48]=d("strong",null,"Last Activity:",-1)),Me(" "+le(B(P.value.last_activity)||"Never"),1)]),d("div",F6,[Y[49]||(Y[49]=d("strong",null,"Total Questions:",-1)),Me(" "+le(P.value.question_count),1)]),d("div",T6,[Y[50]||(Y[50]=d("strong",null,"Saved Answers:",-1)),Me(" "+le(P.value.saved_answer_count),1)]),d("div",q6,[Y[51]||(Y[51]=d("strong",null,"Recent Questions:",-1)),Me(" "+le(P.value.recent_question_count),1)])]),d("div",M6,[d("button",{onClick:Y[8]||(Y[8]=ae=>_e(P.value.id)),class:"btn-secondary"}," Clear Saved Answers "),d("button",{onClick:Y[9]||(Y[9]=ae=>be(P.value)),class:"btn-warning"}," Reset Account ")])])):Re("",!0)])])):Re("",!0)]))}},B6=tn(O6,[["__scopeId","data-v-7d0b787d"]]),j6=[{path:"/login",name:"login",component:Wy,meta:{title:"Login",requiresGuest:!0}},{path:"/register",name:"register",component:p4,meta:{title:"Register",requiresGuest:!0}},{path:"/",name:"home",component:N4,meta:{title:"Home",requiresAuth:!1}},{path:"/adults",name:"main",component:Lm,meta:{title:"Word of Life Answers",requiresAuth:!1}},{path:"/reading",name:"reading",component:t3,meta:{title:"Word of Life Answers",requiresAuth:!1}},{path:"/reading-plans/:slug?",name:"reading-plan",component:K3,meta:{title:"Word of Life Answers",requiresAuth:!1}},{path:"/kids",name:"kids",component:Ly,meta:{title:"Kids Bible Q&A",requiresAuth:!1}},{path:"/admin",name:"admin-dashboard",component:B6,alias:"/admin/dashboard",meta:{title:"Word of Life Answers",requiresAuth:!0,requiresAdmin:!0}}],ah=Xf({history:Nf(),routes:j6,scrollBehavior(t,e,n){return n||{left:0,top:0}}});ah.beforeEach(async(t,e,n)=>{document.title=t.meta.title||"Bible Q&A";const r=t.matched.some(u=>u.meta.requiresAuth),a=t.matched.some(u=>u.meta.requiresAdmin),s=t.matched.some(u=>u.meta.requiresGuest);if(r){const u=await gr.getCurrentUser();if(!u){n("/login");return}if(a&&!u.is_admin){n("/home");return}}else if(s&&gr.getStoredUser()){n({name:"home"});return}n()});Jh(Kh).use(ah).mount("#app");export{Bt as _};
